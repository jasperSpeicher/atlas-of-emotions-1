!function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){!function(t){function n(t){function e(t,e){var i=e.length;r.push(function(){return"seq"==t?e[0].apply(this,n(arguments)):t+"("+(1==i&&"function"==typeof e[0]?e[0].apply(this,n(arguments)):e)+")"})}function n(t){return Array.prototype.slice.call(t)}var r=[];void 0!==t&&r.push(t);var i=function(){var t=this,e=n(arguments);return r.map(function(n){return n.apply(t,e)}).join(" ")};return["translate","rotate","scale","matrix","skewX","skewY","seq"].forEach(function(t){i[t]=function(){return e(t,n(arguments)),i}}),i}"undefined"!=typeof d3&&d3.svg&&(d3.svg.transform=n),"undefined"!=typeof e&&e.exports?e.exports=n:t.d3Transform=n}(this)},{}],2:[function(t,e,n){!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function i(t){return null===t?NaN:+t}function a(t){return!isNaN(t)}function o(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}function s(t){return t.length}function u(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function c(){this._=Object.create(null)}function f(t){return(t+="")===Eo||t[0]===Mo?Mo+t:t}function h(t){return(t+="")[0]===Mo?t.slice(1):t}function d(t){return f(t)in this._}function p(t){return(t=f(t))in this._&&delete this._[t]}function g(){var t=[];for(var e in this._)t.push(h(e));return t}function m(){var t=0;for(var e in this._)++t;return t}function v(){for(var t in this._)return!1;return!0}function y(){this._=Object.create(null)}function w(t){return t}function b(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function x(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=_o.length;r>n;++n){var i=_o[n]+e;if(i in t)return i}}function E(){}function M(){}function _(t){function e(){for(var e,r=n,i=-1,a=r.length;++i<a;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new c;return e.on=function(e,i){var a,o=r.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function k(){uo.event.preventDefault()}function C(){for(var t,e=uo.event;t=e.sourceEvent;)e=t;return e}function S(t){for(var e=new M,n=0,r=arguments.length;++n<r;)e[arguments[n]]=_(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=uo.event;i.target=t,uo.event=i,e[i.type].apply(n,r)}finally{uo.event=a}}},e}function L(t){return Co(t,Ao),t}function T(t){return"function"==typeof t?t:function(){return So(t,this)}}function A(t){return"function"==typeof t?t:function(){return Lo(t,this)}}function I(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=uo.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:o:t.local?a:i}function O(t){return t.trim().replace(/\s+/g," ")}function j(t){return new RegExp("(?:^|\\s+)"+uo.requote(t)+"(?:\\s+|$)","g")}function N(t){return(t+"").trim().split(/^|\s+/)}function H(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=N(t).map(P);var i=t.length;return"function"==typeof e?r:n}function P(t){var e=j(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",O(i+" "+t))):n.setAttribute("class",O(i.replace(e," ")))}}function D(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function a(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?a:i}function R(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function q(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=uo.ns.qualify(t)).local?n:e}function z(){var t=this.parentNode;t&&t.removeChild(this)}function G(t){return{__data__:t}}function U(t){return function(){return To(this,t)}}function B(t){return arguments.length||(t=r),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function F(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,a=t[n],o=0,s=a.length;s>o;o++)(i=a[o])&&e(i,o,n);return t}function W(t){return Co(t,Oo),t}function V(t){var e,n;return function(r,i,a){var o,s=t[a].update,u=s.length;for(a!=n&&(n=a,e=0),i>=e&&(e=i+1);!(o=s[e])&&++e<u;);return o}}function X(t,e,n){function r(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function i(){var i=u(e,co(arguments));r.call(this),this.addEventListener(t,this[o]=i,i.$=n),i._=e}function a(){var e,n=new RegExp("^__on([^.]+)"+uo.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var o="__on"+t,s=t.indexOf("."),u=Y;s>0&&(t=t.slice(0,s));var l=jo.get(t);return l&&(t=l,u=$),s?e?i:r:e?E:a}function Y(t,e){return function(n){var r=uo.event;uo.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{uo.event=r}}}function $(t,e){var n=Y(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function Z(e){var r=".dragsuppress-"+ ++Ho,i="click"+r,a=uo.select(n(e)).on("touchmove"+r,k).on("dragstart"+r,k).on("selectstart"+r,k);if(null==No&&(No="onselectstart"in e?!1:x(e.style,"userSelect")),No){var o=t(e).style,s=o[No];o[No]="none"}return function(t){if(a.on(r,null),No&&(o[No]=s),t){var e=function(){a.on(i,null)};a.on(i,function(){k(),e()},!0),setTimeout(e,0)}}}function Q(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Po){var a=n(t);if(a.scrollX||a.scrollY){r=uo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Po=!(o.f||o.e),r.remove()}}return Po?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function J(){return uo.event.changedTouches[0].identifier}function K(t){return t>0?1:0>t?-1:0}function tt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function et(t){return t>1?0:-1>t?qo:Math.acos(t)}function nt(t){return t>1?Uo:-1>t?-Uo:Math.asin(t)}function rt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function at(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function st(){}function ut(t,e,n){return this instanceof ut?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ut?new ut(t.h,t.s,t.l):Et(""+t,Mt,ut):new ut(t,e,n)}function lt(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(o-a)*t/60:180>t?o:240>t?a+(o-a)*(240-t)/60:a}function i(t){return Math.round(255*r(t))}var a,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,a=2*n-o,new yt(i(t+120),i(t),i(t-120))}function ct(t,e,n){return this instanceof ct?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ct?new ct(t.h,t.c,t.l):t instanceof ht?pt(t.l,t.a,t.b):pt((t=_t((t=uo.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ct(t,e,n)}function ft(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ht(n,Math.cos(t*=Bo)*e,Math.sin(t)*e)}function ht(t,e,n){return this instanceof ht?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof ct?ft(t.h,t.c,t.l):_t((t=yt(t)).r,t.g,t.b):new ht(t,e,n)}function dt(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return i=gt(i)*ts,r=gt(r)*es,a=gt(a)*ns,new yt(vt(3.2404542*i-1.5371385*r-.4985314*a),vt(-.969266*i+1.8760108*r+.041556*a),vt(.0556434*i-.2040259*r+1.0572252*a))}function pt(t,e,n){return t>0?new ct(Math.atan2(n,e)*Fo,Math.sqrt(e*e+n*n),t):new ct(NaN,NaN,t)}function gt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function mt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function vt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function yt(t,e,n){return this instanceof yt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof yt?new yt(t.r,t.g,t.b):Et(""+t,yt,lt):new yt(t,e,n)}function wt(t){return new yt(t>>16,t>>8&255,255&t)}function bt(t){return wt(t)+""}function xt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Et(t,e,n){var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Ct(i[0]),Ct(i[1]),Ct(i[2]))}return(a=as.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,u=15&a,u=u<<4|u):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),e(o,s,u))}function Mt(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,u=(o+a)/2;return s?(i=.5>u?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(n>e?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=u>0&&1>u?0:r),new ut(r,i,u)}function _t(t,e,n){t=kt(t),e=kt(e),n=kt(n);var r=mt((.4124564*t+.3575761*e+.1804375*n)/ts),i=mt((.2126729*t+.7151522*e+.072175*n)/es),a=mt((.0193339*t+.119192*e+.9503041*n)/ns);return ht(116*i-16,500*(r-i),200*(i-a))}function kt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ct(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function St(t){return"function"==typeof t?t:function(){return t}}function Lt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Tt(e,n,t,r)}}function Tt(t,e,n,r){function i(){var t,e=u.status;if(!e&&It(u)||e>=200&&300>e||304===e){try{t=n.call(a,u)}catch(r){return void o.error.call(a,r)}o.load.call(a,t)}else o.error.call(a,u)}var a={},o=uo.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(t){var e=uo.event;uo.event=t;try{o.progress.call(a,u)}finally{uo.event=e}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",a):e},a.responseType=function(t){return arguments.length?(l=t,a):l},a.response=function(t){return n=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(co(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),u.setRequestHeader)for(var c in s)u.setRequestHeader(c,s[c]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=l&&(u.responseType=l),null!=i&&a.on("error",i).on("load",function(t){i(null,t)}),o.beforesend.call(a,u),u.send(null==r?null:r),a},a.abort=function(){return u.abort(),a},uo.rebind(a,o,"on"),null==r?a:a.get(At(r))}function At(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function It(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ot(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,a={c:t,t:i,n:null};return ss?ss.n=a:os=a,ss=a,us||(ls=clearTimeout(ls),us=1,cs(jt)),a}function jt(){var t=Nt(),e=Ht()-t;e>24?(isFinite(e)&&(clearTimeout(ls),ls=setTimeout(jt,e)),us=0):(us=1,cs(jt))}function Nt(){for(var t=Date.now(),e=os;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ht(){for(var t,e=os,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:os=e.n;return ss=t,n}function Pt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Dt(t,e){var n=Math.pow(10,3*xo(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Rt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,a=r&&n?function(t,e){for(var i=t.length,a=[],o=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),a.push(t.substring(i-=s,i+s)),!((u+=s+1)>e));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:w;return function(t){var n=hs.exec(t),r=n[1]||" ",o=n[2]||">",s=n[3]||"-",u=n[4]||"",l=n[5],c=+n[6],f=n[7],h=n[8],d=n[9],p=1,g="",m="",v=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),d){case"n":f=!0,d="g";break;case"%":p=100,m="%",d="f";break;case"p":p=100,m="%",d="r";break;case"b":case"o":case"x":case"X":"#"===u&&(g="0"+d.toLowerCase());case"c":y=!1;case"d":v=!0,h=0;break;case"s":p=-1,d="r"}"$"===u&&(g=i[0],m=i[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):("e"==d||"f"==d)&&(h=Math.max(0,Math.min(20,h)))),d=ds.get(d)||qt;var w=l&&f;return function(t){var n=m;if(v&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>p){var u=uo.formatPrefix(t,h);t=u.scale(t),n=u.symbol+m}else t*=p;t=d(t,h);var b,x,E=t.lastIndexOf(".");if(0>E){var M=y?t.lastIndexOf("e"):-1;0>M?(b=t,x=""):(b=t.substring(0,M),x=t.substring(M))}else b=t.substring(0,E),x=e+t.substring(E+1);!l&&f&&(b=a(b,1/0));var _=g.length+b.length+x.length+(w?0:i.length),k=c>_?new Array(_=c-_+1).join(r):"";return w&&(b=a(k+b,k.length?c-x.length:1/0)),i+=g,t=b+x,("<"===o?i+t+k:">"===o?k+i+t:"^"===o?k.substring(0,_>>=1)+i+t+k.substring(_):i+(w?t:k+t))+n}}}function qt(t){return t+""}function zt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Gt(t,e,n){function r(e){var n=t(e),r=a(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new gs(n-1)),1),n}function a(t,n){return e(t=new gs(+t),n),t}function o(t,r,a){var o=i(t),s=[];if(a>1)for(;r>o;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;r>o;)s.push(new Date(+o)),e(o,1);return s}function s(t,e,n){try{gs=zt;var r=new zt;return r._=t,o(r,e,n)}finally{gs=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var u=t.utc=Ut(t);return u.floor=u,u.round=Ut(r),u.ceil=Ut(i),u.offset=Ut(a),u.range=s,t}function Ut(t){return function(e,n){try{gs=zt;var r=new zt;return r._=e,t(r,n)._}finally{gs=Date}}}function Bt(t){function e(t){function e(e){for(var n,i,a,o=[],s=-1,u=0;++s<r;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=vs[n=t.charAt(++s)])&&(n=t.charAt(++s)),(a=L[n])&&(n=a(e,null==i?"e"===n?" ":"0":i)),o.push(n),u=s+1);return o.push(t.slice(u,s)),o.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&gs!==zt,o=new(a?zt:gs);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?o._:o},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,a,o,s=0,u=e.length,l=n.length;u>s;){if(r>=l)return-1;if(i=e.charCodeAt(s++),37===i){if(o=e.charAt(s++),a=T[o in vs?e.charAt(s++):o],!a||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){E.lastIndex=0;var r=E.exec(e.slice(n));return r?(t.w=M.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){C.lastIndex=0;var r=C.exec(e.slice(n));return r?(t.m=S.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,r){return n(t,L.c.toString(),e,r)}function u(t,e,r){return n(t,L.x.toString(),e,r)}function l(t,e,r){return n(t,L.X.toString(),e,r)}function c(t,e,n){var r=w.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,h=t.date,d=t.time,p=t.periods,g=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{gs=zt;var e=new gs;return e._=t,r(e)}finally{gs=Date}}var r=e(t);return n.parse=function(t){try{gs=zt;var e=r.parse(t);return e&&e._}finally{gs=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=le;var w=uo.map(),b=Wt(g),x=Vt(g),E=Wt(m),M=Vt(m),_=Wt(v),k=Vt(v),C=Wt(y),S=Vt(y);p.forEach(function(t,e){w.set(t.toLowerCase(),e)});var L={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(f),d:function(t,e){return Ft(t.getDate(),e,2)},e:function(t,e){return Ft(t.getDate(),e,2)},H:function(t,e){return Ft(t.getHours(),e,2)},I:function(t,e){return Ft(t.getHours()%12||12,e,2)},j:function(t,e){return Ft(1+ps.dayOfYear(t),e,3)},L:function(t,e){return Ft(t.getMilliseconds(),e,3)},m:function(t,e){return Ft(t.getMonth()+1,e,2)},M:function(t,e){return Ft(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Ft(t.getSeconds(),e,2)},U:function(t,e){return Ft(ps.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ft(ps.mondayOfYear(t),e,2)},x:e(h),X:e(d),y:function(t,e){return Ft(t.getFullYear()%100,e,2)},Y:function(t,e){return Ft(t.getFullYear()%1e4,e,4)},Z:se,"%":function(){return"%"}},T={a:r,A:i,b:a,B:o,c:s,d:ee,e:ee,H:re,I:re,j:ne,L:oe,m:te,M:ie,p:c,S:ae,U:Yt,w:Xt,W:$t,x:u,X:l,y:Qt,Y:Zt,Z:Jt,"%":ue};return e}function Ft(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(e)+i:i)}function Wt(t){return new RegExp("^(?:"+t.map(uo.requote).join("|")+")","i")}function Vt(t){for(var e=new c,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Xt(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Yt(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function $t(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Zt(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Qt(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+2));return r?(t.y=Kt(+r[0]),n+r[0].length):-1}function Jt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Kt(t){return t+(t>68?1900:2e3)}function te(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ee(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ne(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function re(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ie(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ae(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function oe(t,e,n){ys.lastIndex=0;var r=ys.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function se(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=xo(e)/60|0,i=xo(e)%60;return n+Ft(r,"0",2)+Ft(i,"0",2)}function ue(t,e,n){ws.lastIndex=0;var r=ws.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function le(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function ce(){}function fe(t,e,n){var r=n.s=t+e,i=r-t,a=r-i;n.t=t-a+(e-i)}function he(t,e){t&&Ms.hasOwnProperty(t.type)&&Ms[t.type](t,e)}function de(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function pe(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)de(t[n],e,1);e.polygonEnd()}function ge(){function t(t,e){t*=Bo,e=e*Bo/2+qo/4;var n=t-r,o=n>=0?1:-1,s=o*n,u=Math.cos(e),l=Math.sin(e),c=a*l,f=i*u+c*Math.cos(s),h=c*o*Math.sin(s);ks.add(Math.atan2(h,f)),r=t,i=u,a=l}var e,n,r,i,a;Cs.point=function(o,s){Cs.point=t,r=(e=o)*Bo,i=Math.cos(s=(n=s)*Bo/2+qo/4),a=Math.sin(s)},Cs.lineEnd=function(){t(e,n)}}function me(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function ve(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ye(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function we(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function be(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xe(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ee(t){return[Math.atan2(t[1],t[0]),nt(t[2])]}function Me(t,e){return xo(t[0]-e[0])<Do&&xo(t[1]-e[1])<Do}function _e(t,e){t*=Bo;var n=Math.cos(e*=Bo);ke(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ke(t,e,n){++Ss,Ts+=(t-Ts)/Ss,As+=(e-As)/Ss,Is+=(n-Is)/Ss}function Ce(){function t(t,i){t*=Bo;var a=Math.cos(i*=Bo),o=a*Math.cos(t),s=a*Math.sin(t),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*u-r*s)*l+(l=r*o-e*u)*l+(l=e*s-n*o)*l),e*o+n*s+r*u);Ls+=l,Os+=l*(e+(e=o)),js+=l*(n+(n=s)),Ns+=l*(r+(r=u)),ke(e,n,r)}var e,n,r;Rs.point=function(i,a){i*=Bo;var o=Math.cos(a*=Bo);e=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),Rs.point=t,ke(e,n,r)}}function Se(){Rs.point=_e}function Le(){function t(t,e){t*=Bo;var n=Math.cos(e*=Bo),o=n*Math.cos(t),s=n*Math.sin(t),u=Math.sin(e),l=i*u-a*s,c=a*o-r*u,f=r*s-i*o,h=Math.sqrt(l*l+c*c+f*f),d=r*o+i*s+a*u,p=h&&-et(d)/h,g=Math.atan2(h,d);Hs+=p*l,Ps+=p*c,Ds+=p*f,Ls+=g,Os+=g*(r+(r=o)),js+=g*(i+(i=s)),Ns+=g*(a+(a=u)),ke(r,i,a)}var e,n,r,i,a;Rs.point=function(o,s){e=o,n=s,Rs.point=t,o*=Bo;var u=Math.cos(s*=Bo);r=u*Math.cos(o),i=u*Math.sin(o),a=Math.sin(s),ke(r,i,a)},Rs.lineEnd=function(){t(e,n),Rs.lineEnd=Se,Rs.point=_e}}function Te(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Ae(){return!0}function Ie(t,e,n,r,i){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Me(n,r)){i.lineStart();for(var s=0;e>s;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var u=new je(n,t,null,!0),l=new je(n,null,u,!1);u.o=l,a.push(u),o.push(l),u=new je(r,t,null,!1),l=new je(r,null,u,!0),u.o=l,a.push(u),o.push(l)}}),o.sort(e),Oe(a),Oe(o),a.length){for(var s=0,u=n,l=o.length;l>s;++s)o[s].e=u=!u;for(var c,f,h=a[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(var s=0,l=c.length;l>s;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p){c=d.p.z;for(var s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1])}else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);i.lineEnd()}}}function Oe(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function je(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ne(t,e,n,r){return function(i,a){function o(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function s(t,e){var n=i(t,e);m.point(n[0],n[1])}function u(){y.point=s,m.lineStart()}function l(){y.point=o,m.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=w.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&e){t=n[0];var i,r=t.length-1,o=-1;if(r>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(He))}var d,p,g,m=e(a),v=i.invert(r[0],r[1]),y={point:o,lineStart:u,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=h,d=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=u,y.lineEnd=l,d=uo.merge(d);var t=Ge(v,p);d.length?(x||(a.polygonStart(),x=!0),Ie(d,De,t,n,a)):t&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),d=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},w=Pe(),b=e(w),x=!1;return y}}function He(t){return t.length>1}function Pe(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:E,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function De(t,e){return((t=t.x)[0]<0?t[1]-Uo-Do:Uo-t[1])-((e=e.x)[0]<0?e[1]-Uo-Do:Uo-e[1])}function Re(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?qo:-qo,u=xo(a-n);xo(u-qo)<Do?(t.point(n,r=(r+o)/2>0?Uo:-Uo),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=qo&&(xo(n-i)<Do&&(n-=i*Do),xo(a-s)<Do&&(a-=s*Do),r=qe(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function qe(t,e,n,r){var i,a,o=Math.sin(t-n);return xo(o)>Do?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}function ze(t,e,n,r){var i;if(null==t)i=n*Uo,r.point(-qo,i),r.point(0,i),r.point(qo,i),r.point(qo,0),r.point(qo,-i),r.point(0,-i),r.point(-qo,-i),r.point(-qo,0),r.point(-qo,i);else if(xo(t[0]-e[0])>Do){var a=t[0]<e[0]?qo:-qo;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Ge(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;ks.reset();for(var s=0,u=e.length;u>s;++s){var l=e[s],c=l.length;if(c)for(var f=l[0],h=f[0],d=f[1]/2+qo/4,p=Math.sin(d),g=Math.cos(d),m=1;;){m===c&&(m=0),t=l[m];var v=t[0],y=t[1]/2+qo/4,w=Math.sin(y),b=Math.cos(y),x=v-h,E=x>=0?1:-1,M=E*x,_=M>qo,k=p*w;if(ks.add(Math.atan2(k*E*Math.sin(M),g*b+k*Math.cos(M))),a+=_?x+E*zo:x,_^h>=n^v>=n){var C=ye(me(f),me(t));xe(C);var S=ye(i,C);xe(S);var L=(_^x>=0?-1:1)*nt(S[2]);(r>L||r===L&&(C[0]||C[1]))&&(o+=_^x>=0?1:-1)}if(!m++)break;h=v,p=w,g=b,f=t}}return(-Do>a||Do>a&&0>ks)^1&o}function Ue(t){function e(t,e){return Math.cos(t)*Math.cos(e)>a}function n(t){var n,a,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var d,p=[f,h],g=e(f,h),m=o?g?0:i(f,h):g?i(f+(0>f?qo:-qo),h):0;if(!n&&(l=u=g)&&t.lineStart(),g!==u&&(d=r(n,p),(Me(n,d)||Me(p,d))&&(p[0]+=Do,p[1]+=Do,g=e(p[0],p[1]))),g!==u)c=0,g?(t.lineStart(),d=r(p,n),t.point(d[0],d[1])):(d=r(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(s&&n&&o^g){var v;m&a||!(v=r(p,n,!0))||(c=0,o?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&Me(n,p)||t.point(p[0],p[1]),n=p,u=g,a=m},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function r(t,e,n){var r=me(t),i=me(e),o=[1,0,0],s=ye(r,i),u=ve(s,s),l=s[0],c=u-l*l;if(!c)return!n&&t;var f=a*u/c,h=-a*l/c,d=ye(o,s),p=be(o,f),g=be(s,h);we(p,g);var m=d,v=ve(p,m),y=ve(m,m),w=v*v-y*(ve(p,p)-1);if(!(0>w)){var b=Math.sqrt(w),x=be(m,(-v-b)/y);if(we(x,p),x=Ee(x),!n)return x;var E,M=t[0],_=e[0],k=t[1],C=e[1];M>_&&(E=M,M=_,_=E);var S=_-M,L=xo(S-qo)<Do,T=L||Do>S;if(!L&&k>C&&(E=k,k=C,C=E),T?L?k+C>0^x[1]<(xo(x[0]-M)<Do?k:C):k<=x[1]&&x[1]<=C:S>qo^(M<=x[0]&&x[0]<=_)){var A=be(m,(-v+b)/y);return we(A,p),[x,Ee(A)]}}}function i(e,n){var r=o?t:qo-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var a=Math.cos(t),o=a>0,s=xo(a)>Do,u=mn(t,6*Bo);return Ne(e,n,u,o?[0,-t]:[-qo,t-qo])}function Be(t,e,n,r){return function(i){var a,o=i.a,s=i.b,u=o.x,l=o.y,c=s.x,f=s.y,h=0,d=1,p=c-u,g=f-l;if(a=t-u,p||!(a>0)){if(a/=p,0>p){if(h>a)return;d>a&&(d=a)}else if(p>0){if(a>d)return;a>h&&(h=a)}if(a=n-u,p||!(0>a)){if(a/=p,0>p){if(a>d)return;a>h&&(h=a)}else if(p>0){if(h>a)return;d>a&&(d=a)}if(a=e-l,g||!(a>0)){if(a/=g,0>g){if(h>a)return;d>a&&(d=a)}else if(g>0){if(a>d)return;a>h&&(h=a)}if(a=r-l,g||!(0>a)){if(a/=g,0>g){if(a>d)return;a>h&&(h=a)}else if(g>0){if(h>a)return;d>a&&(d=a)}return h>0&&(i.a={x:u+h*p,y:l+h*g}),1>d&&(i.b={x:u+d*p,y:l+d*g}),i}}}}}}function Fe(t,e,n,r){function i(r,i){return xo(r[0]-t)<Do?i>0?0:3:xo(r[0]-n)<Do?i>0?2:1:xo(r[1]-e)<Do?i>0?1:0:i>0?3:2}function a(t,e){return o(t.x,e.x)}function o(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t){for(var e=0,n=m.length,r=t[1],i=0;n>i;++i)for(var a,o=1,s=m[i],u=s.length,l=s[0];u>o;++o)a=s[o],l[1]<=r?a[1]>r&&tt(l,a,t)>0&&++e:a[1]<=r&&tt(l,a,t)<0&&--e,l=a;return 0!==e}function l(a,s,u,l){var c=0,f=0;if(null==a||(c=i(a,u))!==(f=i(s,u))||o(a,s)<0^u>0){do l.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+u+4)%4)!==f)}else l.point(s[0],s[1])}function c(i,a){return i>=t&&n>=i&&a>=e&&r>=a}function f(t,e){c(t,e)&&s.point(t,e)}function h(){T.point=p,m&&m.push(v=[]),_=!0,M=!1,x=E=NaN}function d(){g&&(p(y,w),b&&M&&S.rejoin(),g.push(S.buffer())),T.point=f,M&&s.lineEnd()}function p(t,e){t=Math.max(-zs,Math.min(zs,t)),e=Math.max(-zs,Math.min(zs,e));var n=c(t,e);if(m&&v.push([t,e]),_)y=t,w=e,b=n,_=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&M)s.point(t,e);else{var r={a:{x:x,y:E},b:{x:t,y:e}};L(r)?(M||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),k=!1):n&&(s.lineStart(),s.point(t,e),k=!1)}x=t,E=e,M=n}var g,m,v,y,w,b,x,E,M,_,k,C=s,S=Pe(),L=Be(t,e,n,r),T={point:f,lineStart:h,lineEnd:d,polygonStart:function(){s=S,g=[],m=[],k=!0},polygonEnd:function(){s=C,g=uo.merge(g);var e=u([t,r]),n=k&&e,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&Ie(g,a,e,l,s),s.polygonEnd()),g=m=v=null}};return T}}function We(t){var e=0,n=qo/3,r=un(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*qo/180,n=t[1]*qo/180):[e/qo*180,n/qo*180]},i}function Ve(t,e){function n(t,e){var n=Math.sqrt(a-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,nt((a-(t*t+n*n)*i*i)/(2*i))]},n}function Xe(){function t(t,e){Us+=i*t-r*e,r=t,i=e}var e,n,r,i;Xs.point=function(a,o){Xs.point=t,e=r=a,n=i=o},Xs.lineEnd=function(){t(e,n)}}function Ye(t,e){Bs>t&&(Bs=t),t>Ws&&(Ws=t),Fs>e&&(Fs=e),e>Vs&&(Vs=e)}function $e(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function r(){s.point=t}function i(){o.push("Z")}var a=Ze(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return a=Ze(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}function Ze(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Qe(t,e){Ts+=t,As+=e,++Is}function Je(){function t(t,r){var i=t-e,a=r-n,o=Math.sqrt(i*i+a*a);Os+=o*(e+t)/2,js+=o*(n+r)/2,Ns+=o,Qe(e=t,n=r)}var e,n;
$s.point=function(r,i){$s.point=t,Qe(e=r,n=i)}}function Ke(){$s.point=Qe}function tn(){function t(t,e){var n=t-r,a=e-i,o=Math.sqrt(n*n+a*a);Os+=o*(r+t)/2,js+=o*(i+e)/2,Ns+=o,o=i*t-r*e,Hs+=o*(r+t),Ps+=o*(i+e),Ds+=3*o,Qe(r=t,i=e)}var e,n,r,i;$s.point=function(a,o){$s.point=t,Qe(e=r=a,n=i=o)},$s.lineEnd=function(){t(e,n)}}function en(t){function e(e,n){t.moveTo(e+o,n),t.arc(e,n,o,0,zo)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return o=t,s},result:E};return s}function nn(t){function e(t){return(s?r:n)(t)}function n(e){return on(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){w=NaN,_.point=a,e.lineStart()}function a(n,r){var a=me([n,r]),o=t(n,r);i(w,b,y,x,E,M,w=o[0],b=o[1],y=n,x=a[0],E=a[1],M=a[2],s,e),e.point(w,b)}function o(){_.point=n,e.lineEnd()}function u(){r(),_.point=l,_.lineEnd=c}function l(t,e){a(f=t,h=e),d=w,p=b,g=x,m=E,v=M,_.point=a}function c(){i(w,b,y,x,E,M,d,p,f,g,m,v,s,e),_.lineEnd=o,o()}var f,h,d,p,g,m,v,y,w,b,x,E,M,_={point:n,lineStart:r,lineEnd:o,polygonStart:function(){e.polygonStart(),_.lineStart=u},polygonEnd:function(){e.polygonEnd(),_.lineStart=r}};return _}function i(e,n,r,s,u,l,c,f,h,d,p,g,m,v){var y=c-e,w=f-n,b=y*y+w*w;if(b>4*a&&m--){var x=s+d,E=u+p,M=l+g,_=Math.sqrt(x*x+E*E+M*M),k=Math.asin(M/=_),C=xo(xo(M)-1)<Do||xo(r-h)<Do?(r+h)/2:Math.atan2(E,x),S=t(C,k),L=S[0],T=S[1],A=L-e,I=T-n,O=w*A-y*I;(O*O/b>a||xo((y*A+w*I)/b-.5)>.3||o>s*d+u*p+l*g)&&(i(e,n,r,s,u,l,L,T,C,x/=_,E/=_,M,m,v),v.point(L,T),i(L,T,C,x,E,M,c,f,h,d,p,g,m,v))}}var a=.5,o=Math.cos(30*Bo),s=16;return e.precision=function(t){return arguments.length?(s=(a=t*t)>0&&16,e):Math.sqrt(a)},e}function rn(t){var e=nn(function(e,n){return t([e*Fo,n*Fo])});return function(t){return ln(e(t))}}function an(t){this.stream=t}function on(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function sn(t){return un(function(){return t})()}function un(t){function e(t){return t=s(t[0]*Bo,t[1]*Bo),[t[0]*h+u,l-t[1]*h]}function n(t){return t=s.invert((t[0]-u)/h,(l-t[1])/h),t&&[t[0]*Fo,t[1]*Fo]}function r(){s=Te(o=hn(v,y,b),a);var t=a(g,m);return u=d-t[0]*h,l=p+t[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),e}var a,o,s,u,l,c,f=nn(function(t,e){return t=a(t,e),[t[0]*h+u,l-t[1]*h]}),h=150,d=480,p=250,g=0,m=0,v=0,y=0,b=0,x=qs,E=w,M=null,_=null;return e.stream=function(t){return c&&(c.valid=!1),c=ln(x(o,f(E(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(x=null==t?(M=t,qs):Ue((M=+t)*Bo),i()):M},e.clipExtent=function(t){return arguments.length?(_=t,E=t?Fe(t[0][0],t[0][1],t[1][0],t[1][1]):w,i()):_},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],r()):[d,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Bo,m=t[1]%360*Bo,r()):[g*Fo,m*Fo]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Bo,y=t[1]%360*Bo,b=t.length>2?t[2]%360*Bo:0,r()):[v*Fo,y*Fo,b*Fo]},uo.rebind(e,f,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,r()}}function ln(t){return on(t,function(e,n){t.point(e*Bo,n*Bo)})}function cn(t,e){return[t,e]}function fn(t,e){return[t>qo?t-zo:-qo>t?t+zo:t,e]}function hn(t,e,n){return t?e||n?Te(pn(t),gn(e,n)):pn(t):e||n?gn(e,n):fn}function dn(t){return function(e,n){return e+=t,[e>qo?e-zo:-qo>e?e+zo:e,n]}}function pn(t){var e=dn(t);return e.invert=dn(-t),e}function gn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*r+s*i;return[Math.atan2(u*a-c*o,s*r-l*i),nt(c*a+u*o)]}var r=Math.cos(t),i=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*a-u*o;return[Math.atan2(u*a+l*o,s*r+c*i),nt(c*r-s*i)]},n}function mn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,s){var u=o*e;null!=i?(i=vn(n,i),a=vn(n,a),(o>0?a>i:i>a)&&(i+=o*zo)):(i=t+o*zo,a=t-.5*u);for(var l,c=i;o>0?c>a:a>c;c-=u)s.point((l=Ee([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function vn(t,e){var n=me(e);n[0]-=t,xe(n);var r=et(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Do)%(2*Math.PI)}function yn(t,e,n){var r=uo.range(t,e-Do,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function wn(t,e,n){var r=uo.range(t,e-Do,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function bn(t){return t.source}function xn(t){return t.target}function En(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(t),l=i*Math.sin(t),c=o*Math.cos(n),f=o*Math.sin(n),h=2*Math.asin(Math.sqrt(ot(r-e)+i*o*ot(n-t))),d=1/Math.sin(h),p=h?function(t){var e=Math.sin(t*=h)*d,n=Math.sin(h-t)*d,r=n*u+e*c,i=n*l+e*f,o=n*a+e*s;return[Math.atan2(i,r)*Fo,Math.atan2(o,Math.sqrt(r*r+i*i))*Fo]}:function(){return[t*Fo,e*Fo]};return p.distance=h,p}function Mn(){function t(t,i){var a=Math.sin(i*=Bo),o=Math.cos(i),s=xo((t*=Bo)-e),u=Math.cos(s);Zs+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-n*o*u)*s),n*a+r*o*u),e=t,n=a,r=o}var e,n,r;Qs.point=function(i,a){e=i*Bo,n=Math.sin(a*=Bo),r=Math.cos(a),Qs.point=t},Qs.lineEnd=function(){Qs.point=Qs.lineEnd=E}}function _n(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]},n}function kn(t,e){function n(t,e){o>0?-Uo+Do>e&&(e=-Uo+Do):e>Uo-Do&&(e=Uo-Do);var n=o/Math.pow(i(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var r=Math.cos(t),i=function(t){return Math.tan(qo/4+t/2)},a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),o=r*Math.pow(i(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,r=K(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Uo]},n):Sn}function Cn(t,e){function n(t,e){var n=a-e;return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),a=r/i+t;return xo(i)<Do?cn:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,a-K(i)*Math.sqrt(t*t+n*n)]},n)}function Sn(t,e){return[t,Math.log(Math.tan(qo/4+e/2))]}function Ln(t){var e,n=sn(t),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=qo*r(),u=i();a([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}function Tn(t,e){return[Math.log(Math.tan(qo/4+e/2)),-t]}function An(t){return t[0]}function In(t){return t[1]}function On(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&tt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function jn(t,e){return t[0]-e[0]||t[1]-e[1]}function Nn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Hn(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,u=t[1],l=n[1],c=e[1]-u,f=r[1]-l,h=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+h*o,u+h*c]}function Pn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Dn(){ir(this),this.edge=this.site=this.circle=null}function Rn(t){var e=lu.pop()||new Dn;return e.site=t,e}function qn(t){$n(t),ou.remove(t),lu.push(t),ir(t)}function zn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];qn(t);for(var u=a;u.circle&&xo(n-u.circle.x)<Do&&xo(r-u.circle.cy)<Do;)a=u.P,s.unshift(u),qn(u),u=a;s.unshift(u),$n(u);for(var l=o;l.circle&&xo(n-l.circle.x)<Do&&xo(r-l.circle.cy)<Do;)o=l.N,s.push(l),qn(l),l=o;s.push(l),$n(l);var c,f=s.length;for(c=1;f>c;++c)l=s[c],u=s[c-1],er(l.edge,u.site,l.site,i);u=s[0],l=s[f-1],l.edge=Kn(u.site,l.site,null,i),Yn(u),Yn(l)}function Gn(t){for(var e,n,r,i,a=t.x,o=t.y,s=ou._;s;)if(r=Un(s,o)-a,r>Do)s=s.L;else{if(i=a-Bn(s,o),!(i>Do)){r>-Do?(e=s.P,n=s):i>-Do?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=Rn(t);if(ou.insert(e,u),e||n){if(e===n)return $n(e),n=Rn(e.site),ou.insert(u,n),u.edge=n.edge=Kn(e.site,u.site),Yn(e),void Yn(n);if(!n)return void(u.edge=Kn(e.site,u.site));$n(e),$n(n);var l=e.site,c=l.x,f=l.y,h=t.x-c,d=t.y-f,p=n.site,g=p.x-c,m=p.y-f,v=2*(h*m-d*g),y=h*h+d*d,w=g*g+m*m,b={x:(m*y-d*w)/v+c,y:(h*w-g*y)/v+f};er(n.edge,l,p,b),u.edge=Kn(l,t,null,b),n.edge=Kn(t,p,null,b),Yn(e),Yn(n)}}function Un(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-(1/0);n=o.site;var s=n.x,u=n.y,l=u-e;if(!l)return s;var c=s-r,f=1/a-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function Bn(t,e){var n=t.N;if(n)return Un(n,e);var r=t.site;return r.y===e?r.x:1/0}function Fn(t){this.site=t,this.edges=[]}function Wn(t){for(var e,n,r,i,a,o,s,u,l,c,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=au,m=g.length;m--;)if(a=g[m],a&&a.prepare())for(s=a.edges,u=s.length,o=0;u>o;)c=s[o].end(),r=c.x,i=c.y,l=s[++o%u].start(),e=l.x,n=l.y,(xo(r-e)>Do||xo(i-n)>Do)&&(s.splice(o,0,new nr(tr(a.site,c,xo(r-f)<Do&&p-i>Do?{x:f,y:xo(e-f)<Do?n:p}:xo(i-p)<Do&&h-r>Do?{x:xo(n-p)<Do?e:h,y:p}:xo(r-h)<Do&&i-d>Do?{x:h,y:xo(e-h)<Do?n:d}:xo(i-d)<Do&&r-f>Do?{x:xo(n-d)<Do?e:f,y:d}:null),a.site,null)),++u)}function Vn(t,e){return e.angle-t.angle}function Xn(){ir(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=a.y-s,h=2*(u*f-l*c);if(!(h>=-Ro)){var d=u*u+l*l,p=c*c+f*f,g=(f*d-l*p)/h,m=(u*p-c*d)/h,f=m+s,v=cu.pop()||new Xn;v.arc=t,v.site=i,v.x=g+o,v.y=f+Math.sqrt(g*g+m*m),v.cy=f,t.circle=v;for(var y=null,w=uu._;w;)if(v.y<w.y||v.y===w.y&&v.x<=w.x){if(!w.L){y=w.P;break}w=w.L}else{if(!w.R){y=w;break}w=w.R}uu.insert(y,v),y||(su=v)}}}}function $n(t){var e=t.circle;e&&(e.P||(su=e.N),uu.remove(e),cu.push(e),ir(e),t.circle=null)}function Zn(t){for(var e,n=iu,r=Be(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!Qn(e,t)||!r(e)||xo(e.a.x-e.b.x)<Do&&xo(e.a.y-e.b.y)<Do)&&(e.a=e.b=null,n.splice(i,1))}function Qn(t,e){var n=t.b;if(n)return!0;var r,i,a=t.a,o=e[0][0],s=e[1][0],u=e[0][1],l=e[1][1],c=t.l,f=t.r,h=c.x,d=c.y,p=f.x,g=f.y,m=(h+p)/2,v=(d+g)/2;if(g===d){if(o>m||m>=s)return;if(h>p){if(a){if(a.y>=l)return}else a={x:m,y:u};n={x:m,y:l}}else{if(a){if(a.y<u)return}else a={x:m,y:l};n={x:m,y:u}}}else if(r=(h-p)/(g-d),i=v-r*m,-1>r||r>1)if(h>p){if(a){if(a.y>=l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(g>d){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return t.a=a,t.b=n,!0}function Jn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Kn(t,e,n,r){var i=new Jn(t,e);return iu.push(i),n&&er(i,t,e,n),r&&er(i,e,t,r),au[t.i].edges.push(new nr(i,t,e)),au[e.i].edges.push(new nr(i,e,t)),i}function tr(t,e,n){var r=new Jn(t,null);return r.a=e,r.b=n,iu.push(r),r}function er(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function nr(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function rr(){this._=null}function ir(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ar(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function sr(t){for(;t.L;)t=t.L;return t}function ur(t,e){var n,r,i,a=t.sort(lr).pop();for(iu=[],au=new Array(t.length),ou=new rr,uu=new rr;;)if(i=su,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))(a.x!==n||a.y!==r)&&(au[a.i]=new Fn(a),Gn(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;zn(i.arc)}e&&(Zn(e),Wn(e));var o={cells:au,edges:iu};return ou=uu=iu=au=null,o}function lr(t,e){return e.y-t.y||e.x-t.x}function cr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function fr(t){return t.x}function hr(t){return t.y}function dr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pr(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),u=e.nodes;u[0]&&pr(t,u[0],n,r,o,s),u[1]&&pr(t,u[1],o,r,i,s),u[2]&&pr(t,u[2],n,s,o,a),u[3]&&pr(t,u[3],o,s,i,a)}}function gr(t,e,n,r,i,a,o){var s,u=1/0;return function l(t,c,f,h,d){if(!(c>a||f>o||r>h||i>d)){if(p=t.point){var p,g=e-t.x,m=n-t.y,v=g*g+m*m;if(u>v){var y=Math.sqrt(u=v);r=e-y,i=n-y,a=e+y,o=n+y,s=p}}for(var w=t.nodes,b=.5*(c+h),x=.5*(f+d),E=e>=b,M=n>=x,_=M<<1|E,k=_+4;k>_;++_)if(t=w[3&_])switch(3&_){case 0:l(t,c,f,b,x);break;case 1:l(t,b,f,h,x);break;case 2:l(t,c,x,b,d);break;case 3:l(t,b,x,h,d)}}}(t,r,i,a,o),s}function mr(t,e){t=uo.rgb(t),e=uo.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,o=e.g-r,s=e.b-i;return function(t){return"#"+xt(Math.round(n+a*t))+xt(Math.round(r+o*t))+xt(Math.round(i+s*t))}}function vr(t,e){var n,r={},i={};for(n in t)n in e?r[n]=br(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function yr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function wr(t,e){var n,r,i,a=hu.lastIndex=du.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=hu.exec(t))&&(r=du.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:yr(n,r)})),a=du.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;e>r;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function br(t,e){for(var n,r=uo.interpolators.length;--r>=0&&!(n=uo.interpolators[r](t,e)););return n}function xr(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(br(t[n],e[n]));for(;a>n;++n)i[n]=t[n];for(;o>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function Er(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Mr(t){return function(e){return 1-t(1-e)}}function _r(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function kr(t){return t*t}function Cr(t){return t*t*t}function Sr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Lr(t){return function(e){return Math.pow(e,t)}}function Tr(t){return 1-Math.cos(t*Uo)}function Ar(t){return Math.pow(2,10*(t-1))}function Ir(t){return 1-Math.sqrt(1-t*t)}function Or(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/zo*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*zo/e)}}function jr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Nr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Hr(t,e){t=uo.hcl(t),e=uo.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,o=e.c-r,s=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.c:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return ft(n+a*t,r+o*t,i+s*t)+""}}function Pr(t,e){t=uo.hsl(t),e=uo.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,o=e.s-r,s=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.s:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return lt(n+a*t,r+o*t,i+s*t)+""}}function Dr(t,e){t=uo.lab(t),e=uo.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,o=e.a-r,s=e.b-i;return function(t){return dt(n+a*t,r+o*t,i+s*t)+""}}function Rr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function qr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Gr(e),i=zr(e,n),a=Gr(Ur(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Fo,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*Fo:0}function zr(t,e){return t[0]*e[0]+t[1]*e[1]}function Gr(t){var e=Math.sqrt(zr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Ur(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Br(t){return t.length?t.pop()+",":""}function Fr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:yr(t[0],e[0])},{i:i-2,x:yr(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function Wr(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Br(n)+"rotate(",null,")")-2,x:yr(t,e)})):e&&n.push(Br(n)+"rotate("+e+")")}function Vr(t,e,n,r){t!==e?r.push({i:n.push(Br(n)+"skewX(",null,")")-2,x:yr(t,e)}):e&&n.push(Br(n)+"skewX("+e+")")}function Xr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(Br(n)+"scale(",null,",",null,")");r.push({i:i-4,x:yr(t[0],e[0])},{i:i-2,x:yr(t[1],e[1])})}else(1!==e[0]||1!==e[1])&&n.push(Br(n)+"scale("+e+")")}function Yr(t,e){var n=[],r=[];return t=uo.transform(t),e=uo.transform(e),Fr(t.translate,e.translate,n,r),Wr(t.rotate,e.rotate,n,r),Vr(t.skew,e.skew,n,r),Xr(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,a=r.length;++i<a;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function $r(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Zr(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Qr(t){for(var e=t.source,n=t.target,r=Kr(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Jr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Kr(t,e){if(t===e)return t;for(var n=Jr(t),r=Jr(e),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function ti(t){t.fixed|=2}function ei(t){t.fixed&=-7}function ni(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ri(t){t.fixed&=-5}function ii(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,u=-1;++u<s;)a=o[u],null!=a&&(ii(a,e,n),t.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,r+=l*t.point.x,i+=l*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function ai(t,e){return uo.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=fi,t}function oi(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function si(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function ui(t){return t.children}function li(t){return t.value}function ci(t,e){return e.value-t.value}function fi(t){return uo.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function hi(t){return t.x}function di(t){return t.y}function pi(t,e,n){t.y0=e,t.y=n}function gi(t){return uo.range(t.length)}function mi(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function vi(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function yi(t){return t.reduce(wi,0)}function wi(t,e){return t+e[1]}function bi(t,e){return xi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function xi(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function Ei(t){return[uo.min(t),uo.max(t)]}function Mi(t,e){return t.value-e.value}function _i(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ki(t,e){t._pack_next=e,e._pack_prev=t}function Ci(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Si(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(l=n.length)){var n,r,i,a,o,s,u,l,c=1/0,f=-(1/0),h=1/0,d=-(1/0);if(n.forEach(Li),r=n[0],r.x=-r.r,r.y=0,e(r),l>1&&(i=n[1],i.x=i.r,i.y=0,e(i),l>2))for(a=n[2],Ii(r,i,a),e(a),_i(r,a),r._pack_prev=a,_i(a,i),i=r._pack_next,o=3;l>o;o++){Ii(r,i,a=n[o]);var p=0,g=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(Ci(s,a)){p=1;break}if(1==p)for(u=r._pack_prev;u!==s._pack_prev&&!Ci(u,a);u=u._pack_prev,m++);p?(m>g||g==m&&i.r<r.r?ki(r,i=s):ki(r=u,i),o--):(_i(r,a),i=a,e(a))}var v=(c+f)/2,y=(h+d)/2,w=0;for(o=0;l>o;o++)a=n[o],a.x-=v,a.y-=y,w=Math.max(w,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=w,n.forEach(Ti)}}function Li(t){t._pack_next=t._pack_prev=t}function Ti(t){delete t._pack_next,delete t._pack_prev}function Ai(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var a=-1,o=i.length;++a<o;)Ai(i[a],e,n,r)}function Ii(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a;o*=o,r*=r;var u=.5+(r-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+u*i+l*a,n.y=t.y+u*a-l*i}else n.x=t.x+r,n.y=t.y}function Oi(t,e){return t.parent==e.parent?1:2}function ji(t){var e=t.children;return e.length?e[0]:t.t}function Ni(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Hi(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Pi(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)e=i[a],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Di(t,e,n){return t.a.parent===e.parent?t.a:n}function Ri(t){return 1+uo.max(t,function(t){return t.y})}function qi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function zi(t){var e=t.children;return e&&e.length?zi(e[0]):t}function Gi(t){var e,n=t.children;return n&&(e=n.length)?Gi(n[e-1]):t}function Ui(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Bi(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>a&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Fi(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Wi(t){return t.rangeExtent?t.rangeExtent():Fi(t.range())}function Vi(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function Xi(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return a>o&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Yi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:_u}function $i(t,e,n,r){var i=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)i.push(n(t[o-1],t[o])),a.push(r(e[o-1],e[o]));return function(e){var n=uo.bisect(t,e,1,s)-1;return a[n](i[n](e))}}function Zi(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?$i:Vi,u=r?Zr:$r;return o=i(t,e,u,n),s=i(e,t,u,br),a}function a(t){return o(t)}var o,s;return a.invert=function(t){return s(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},a.range=function(t){return arguments.length?(e=t,i()):e},a.rangeRound=function(t){return a.range(t).interpolate(Rr)},a.clamp=function(t){return arguments.length?(r=t,i()):r},a.interpolate=function(t){return arguments.length?(n=t,i()):n},a.ticks=function(e){return ta(t,e)},a.tickFormat=function(e,n){return ea(t,e,n)},a.nice=function(e){return Ji(t,e),i()},a.copy=function(){return Zi(t,e,n,r)},i()}function Qi(t,e){return uo.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ji(t,e){return Xi(t,Yi(Ki(t,e)[2]))}function Ki(t,e){null==e&&(e=10);var n=Fi(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return.15>=a?i*=10:.35>=a?i*=5:.75>=a&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ta(t,e){return uo.range.apply(uo,Ki(t,e))}function ea(t,e,n){var r=Ki(t,e);if(n){var i=hs.exec(n);if(i.shift(),"s"===i[8]){var a=uo.formatPrefix(Math.max(xo(r[0]),xo(r[1])));return i[7]||(i[7]="."+na(a.scale(r[2]))),i[8]="f",n=uo.format(i.join("")),function(t){return n(a.scale(t))+a.symbol}}i[7]||(i[7]="."+ra(i[8],r)),n=i.join("")}else n=",."+na(r[2])+"f";return uo.format(n)}function na(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ra(t,e){var n=na(e[2]);return t in ku?Math.abs(n-na(Math.max(xo(e[0]),xo(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ia(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(i(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),o):e},o.nice=function(){var e=Xi(r.map(i),n?Math:Su);return t.domain(e),r=e.map(a),o},o.ticks=function(){var t=Fi(r),o=[],s=t[0],u=t[1],l=Math.floor(i(s)),c=Math.ceil(i(u)),f=e%1?2:e;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var h=1;f>h;h++)o.push(a(l)*h);o.push(a(l))}else for(o.push(a(l));l++<c;)for(var h=f-1;h>0;h--)o.push(a(l)*h);for(l=0;o[l]<s;l++);for(c=o.length;o[c-1]>u;c--);o=o.slice(l,c)}return o},o.tickFormat=function(t,e){if(!arguments.length)return Cu;arguments.length<2?e=Cu:"function"!=typeof e&&(e=uo.format(e));var r,s=Math.max(.1,t/o.ticks().length),u=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/a(u(i(t)+r))<=s?e(t):""}},o.copy=function(){return ia(t.copy(),e,n,r)},Qi(o,t)}function aa(t,e,n){function r(e){return t(i(e))}var i=oa(e),a=oa(1/e);return r.invert=function(e){return a(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return ta(n,t)},r.tickFormat=function(t,e){return ea(n,t,e)},r.nice=function(t){return r.domain(Ji(n,t))},r.exponent=function(o){return arguments.length?(i=oa(e=o),a=oa(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return aa(t.copy(),e,n)},Qi(r,t)}function oa(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function sa(t,e){function n(n){return a[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%a.length]}function r(e,n){return uo.range(t.length).map(function(t){return e+n*t})}var i,a,o;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new c;for(var a,o=-1,s=r.length;++o<s;)i.has(a=r[o])||i.set(a,t.push(a));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(a=t,o=0,e={t:"range",a:arguments},n):a},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=t.length<2?(u=(u+l)/2,0):(l-u)/(t.length-1+s);return a=r(u+c*s/2,c),o=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=t.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(t.length-1+s)|0;return a=r(u+Math.round(c*s/2+(l-u-(t.length-1+s)*c)/2),c),o=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],f=i[1-l],h=(f-c)/(t.length-s+2*u);return a=r(c+h*u,h),l&&a.reverse(),o=h*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],f=i[1-l],h=Math.floor((f-c)/(t.length-s+2*u));return a=r(c+Math.round((f-c-(t.length-s)*h)/2),h),l&&a.reverse(),o=Math.round(h*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Fi(e.a[0])},n.copy=function(){return sa(t,e)},n.domain(t)}function ua(t,e){function n(){var n=0,r=e.length;for(s=[];++n<r;)s[n-1]=uo.quantile(t,n/r);return o}function o(t){return isNaN(t=+t)?void 0:e[uo.bisect(s,t)]}var s;return o.domain=function(e){return arguments.length?(t=e.map(i).filter(a).sort(r),n()):t},o.range=function(t){return arguments.length?(e=t,n()):e},o.quantiles=function(){return s},o.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},o.copy=function(){return ua(t,e)},n()}function la(t,e,n){function r(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function i(){return a=n.length/(e-t),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/a+t,[e,e+1/a]},r.copy=function(){return la(t,e,n)},i()}function ca(t,e){function n(n){return n>=n?e[uo.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ca(t,e)},n}function fa(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return ta(t,e)},e.tickFormat=function(e,n){return ea(t,e,n)},e.copy=function(){return fa(t)},e}function ha(){return 0}function da(t){return t.innerRadius}function pa(t){return t.outerRadius}function ga(t){return t.startAngle}function ma(t){return t.endAngle}function va(t){return t&&t.padAngle}function ya(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function wa(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=t[0]+u,f=t[1]+l,h=e[0]+u,d=e[1]+l,p=(c+h)/2,g=(f+d)/2,m=h-c,v=d-f,y=m*m+v*v,w=n-r,b=c*d-h*f,x=(0>v?-1:1)*Math.sqrt(Math.max(0,w*w*y-b*b)),E=(b*v-m*x)/y,M=(-b*m-v*x)/y,_=(b*v+m*x)/y,k=(-b*m+v*x)/y,C=E-p,S=M-g,L=_-p,T=k-g;return C*C+S*S>L*L+T*T&&(E=_,M=k),[[E-u,M-l],[E*n/w,M*n/w]]}function ba(t){function e(e){function o(){l.push("M",a(t(c),s))}for(var u,l=[],c=[],f=-1,h=e.length,d=St(n),p=St(r);++f<h;)i.call(this,u=e[f],f)?c.push([+d.call(this,u,f),+p.call(this,u,f)]):c.length&&(o(),c=[]);return c.length&&o(),l.length?l.join(""):null}var n=An,r=In,i=Ae,a=xa,o=a.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=ju.get(t)||xa).key,e):o},e.tension=function(t){return arguments.length?(s=t,e):s},e}function xa(t){return t.length>1?t.join("L"):t+"Z"}function Ea(t){return t.join("L")+"Z"}function Ma(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function _a(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function ka(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Ca(t,e){return t.length<4?xa(t):t[1]+Ta(t.slice(1,-1),Aa(t,e))}function Sa(t,e){return t.length<3?Ea(t):t[0]+Ta((t.push(t[0]),t),Aa([t[t.length-2]].concat(t,[t[1]]),e))}function La(t,e){return t.length<3?xa(t):t[0]+Ta(t,Aa(t,e))}function Ta(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return xa(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],u=2),e.length>1){s=e[1],a=t[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<e.length;l++,u++)a=t[u],s=e[l],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=t[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Aa(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,u=t.length;++s<u;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Ia(t){if(t.length<3)return xa(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",Ha(Pu,o),",",Ha(Pu,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Pa(u,o,s);return t.pop(),u.push("L",r),u.join("")}function Oa(t){if(t.length<4)return xa(t);for(var e,n=[],r=-1,i=t.length,a=[0],o=[0];++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);for(n.push(Ha(Pu,a)+","+Ha(Pu,o)),--r;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Pa(n,a,o);return n.join("")}function ja(t){for(var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);for(e=[Ha(Pu,o),",",Ha(Pu,s)],--r;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Pa(e,o,s);return e.join("")}function Na(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,u=t[n][1]-o,l=-1;++l<=n;)r=t[l],
i=l/n,r[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*u);return Ia(t)}function Ha(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Pa(t,e,n){t.push("C",Ha(Nu,e),",",Ha(Nu,n),",",Ha(Hu,e),",",Ha(Hu,n),",",Ha(Pu,e),",",Ha(Pu,n))}function Da(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ra(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=Da(i,a);++e<n;)r[e]=(o+(o=Da(i=a,a=t[e+1])))/2;return r[e]=o,r}function qa(t){for(var e,n,r,i,a=[],o=Ra(t),s=-1,u=t.length-1;++s<u;)e=Da(t[s],t[s+1]),xo(e)<Do?o[s]=o[s+1]=0:(n=o[s]/e,r=o[s+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function za(t){return t.length<3?xa(t):t[0]+Ta(t,qa(t))}function Ga(t){for(var e,n,r,i=-1,a=t.length;++i<a;)e=t[i],n=e[0],r=e[1]-Uo,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Ua(t){function e(e){function u(){g.push("M",s(t(v),f),c,l(t(m.reverse()),f),"Z")}for(var h,d,p,g=[],m=[],v=[],y=-1,w=e.length,b=St(n),x=St(i),E=n===r?function(){return d}:St(r),M=i===a?function(){return p}:St(a);++y<w;)o.call(this,h=e[y],y)?(m.push([d=+b.call(this,h,y),p=+x.call(this,h,y)]),v.push([+E.call(this,h,y),+M.call(this,h,y)])):m.length&&(u(),m=[],v=[]);return m.length&&u(),g.length?g.join(""):null}var n=An,r=An,i=0,a=In,o=Ae,s=xa,u=s.key,l=s,c="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=a=t,e):a},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?s=t:(s=ju.get(t)||xa).key,l=s.reverse||s,c=s.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Ba(t){return t.radius}function Fa(t){return[t.x,t.y]}function Wa(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Uo;return[n*Math.cos(r),n*Math.sin(r)]}}function Va(){return 64}function Xa(){return"circle"}function Ya(t){var e=Math.sqrt(t/qo);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function $a(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Za(t,e,n){return Co(t,Bu),t.namespace=e,t.id=n,t}function Qa(t,e,n,r){var i=t.id,a=t.namespace;return F(t,"function"==typeof n?function(t,o,s){t[a][i].tween.set(e,r(n.call(t,t.__data__,o,s)))}:(n=r(n),function(t){t[a][i].tween.set(e,n)}))}function Ja(t){return null==t&&(t=""),function(){this.textContent=t}}function Ka(t){return null==t?"__transition__":"__transition_"+t+"__"}function to(t,e,n,r,i){function a(t){var e=g.delay;return l.t=e+u,t>=e?o(t-e):void(l.c=o)}function o(n){var i=p.active,a=p[i];a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[i],a.event&&a.event.interrupt.call(t,t.__data__,a.index));for(var o in p)if(r>+o){var c=p[o];c.timer.c=null,c.timer.t=NaN,--p.count,delete p[o]}p.active=r,g.event&&g.event.start.call(t,t.__data__,e),d=[],g.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&d.push(r)}),h=g.ease,f=g.duration,l.c=s,Ot(function(){return l.c&&s(n||1)&&(l.c=null,l.t=NaN),1},0,u)}function s(i){for(var a=i/f,o=h(a),s=d.length;s>0;)d[--s].call(t,o);return a>=1?(g.event&&g.event.end.call(t,t.__data__,e),--p.count?delete p[r]:delete t[n],1):void 0}var u,l,f,h,d,p=t[n]||(t[n]={active:0,count:0}),g=p[r];g||(u=i.time,l=Ot(a,0,u),g=p[r]={tween:new c,time:u,timer:l,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++p.count)}function eo(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function no(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function ro(t){return t.toISOString()}function io(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,a=uo.bisect(Ju,i);return a==Ju.length?[e.year,Ki(t.map(function(t){return t/31536e6}),n)[2]]:a?e[i/Ju[a-1]<Ju[a]/i?a-1:a]:[el,Ki(t,n)[2]]}return r.invert=function(e){return ao(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(ao)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,ao(+n+1),e).length}var a=r.domain(),o=Fi(a),s=null==t?i(o,10):"number"==typeof t&&i(o,t);return s&&(t=s[0],e=s[1]),r.domain(Xi(a,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=ao(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=ao(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Fi(r.domain()),a=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],ao(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return io(t.copy(),e,n)},Qi(r,t)}function ao(t){return new Date(t)}function oo(t){return JSON.parse(t.responseText)}function so(t){var e=fo.createRange();return e.selectNode(fo.body),e.createContextualFragment(t.responseText)}var uo={version:"3.5.8"},lo=[].slice,co=function(t){return lo.call(t)},fo=this.document;if(fo)try{co(fo.documentElement.childNodes)[0].nodeType}catch(ho){co=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),fo)try{fo.createElement("DIV").style.setProperty("opacity",0,"")}catch(po){var go=this.Element.prototype,mo=go.setAttribute,vo=go.setAttributeNS,yo=this.CSSStyleDeclaration.prototype,wo=yo.setProperty;go.setAttribute=function(t,e){mo.call(this,t,e+"")},go.setAttributeNS=function(t,e,n){vo.call(this,t,e,n+"")},yo.setProperty=function(t,e,n){wo.call(this,t,e+"",n)}}uo.ascending=r,uo.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},uo.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},uo.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},uo.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},uo.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)a(n=+t[o])&&(r+=n);else for(;++o<i;)a(n=+e.call(t,t[o],o))&&(r+=n);return r},uo.mean=function(t,e){var n,r=0,o=t.length,s=-1,u=o;if(1===arguments.length)for(;++s<o;)a(n=i(t[s]))?r+=n:--u;else for(;++s<o;)a(n=i(e.call(t,t[s],s)))?r+=n:--u;return u?r/u:void 0},uo.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},uo.median=function(t,e){var n,o=[],s=t.length,u=-1;if(1===arguments.length)for(;++u<s;)a(n=i(t[u]))&&o.push(n);else for(;++u<s;)a(n=i(e.call(t,t[u],u)))&&o.push(n);return o.length?uo.quantile(o.sort(r),.5):void 0},uo.variance=function(t,e){var n,r,o=t.length,s=0,u=0,l=-1,c=0;if(1===arguments.length)for(;++l<o;)a(n=i(t[l]))&&(r=n-s,s+=r/++c,u+=r*(n-s));else for(;++l<o;)a(n=i(e.call(t,t[l],l)))&&(r=n-s,s+=r/++c,u+=r*(n-s));return c>1?u/(c-1):void 0},uo.deviation=function(){var t=uo.variance.apply(this,arguments);return t?Math.sqrt(t):t};var bo=o(r);uo.bisectLeft=bo.left,uo.bisect=uo.bisectRight=bo.right,uo.bisector=function(t){return o(1===t.length?function(e,n){return r(t(e),n)}:t)},uo.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,2>a&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},uo.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},uo.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],a=new Array(0>r?0:r);r>n;)a[n]=[e=i,i=t[++n]];return a},uo.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=uo.min(arguments,s),n=new Array(e);++t<e;)for(var r,i=-1,a=n[t]=new Array(r);++i<r;)a[i]=arguments[i][t];return n},uo.transpose=function(t){return uo.zip.apply(uo,t)},uo.keys=function(t){var e=[];for(var n in t)e.push(n);return e},uo.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},uo.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},uo.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--o]=r[e];return n};var xo=Math.abs;uo.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],a=u(xo(n)),o=-1;if(t*=a,e*=a,n*=a,0>n)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},uo.map=function(t,e){var n=new c;if(t instanceof c)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n};var Eo="__proto__",Mo="\x00";l(c,{has:d,get:function(t){return this._[f(t)]},set:function(t,e){return this._[f(t)]=e},remove:p,keys:g,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:h(e),value:this._[e]});return t},size:m,empty:v,forEach:function(t){for(var e in this._)t.call(this,h(e),this._[e])}}),uo.nest=function(){function t(e,o,s){if(s>=a.length)return r?r.call(i,o):n?o.sort(n):o;for(var u,l,f,h,d=-1,p=o.length,g=a[s++],m=new c;++d<p;)(h=m.get(u=g(l=o[d])))?h.push(l):m.set(u,[l]);return e?(l=e(),f=function(n,r){l.set(n,t(e,r,s))}):(l={},f=function(n,r){l[n]=t(e,r,s)}),m.forEach(f),l}function e(t,n){if(n>=a.length)return t;var r=[],i=o[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},a=[],o=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(uo.map,n,0),0)},i.key=function(t){return a.push(t),i},i.sortKeys=function(t){return o[a.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},uo.set=function(t){var e=new y;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},l(y,{has:d,add:function(t){return this._[f(t+="")]=!0,t},remove:p,values:g,size:m,empty:v,forEach:function(t){for(var e in this._)t.call(this,h(e))}}),uo.behavior={},uo.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=b(t,e,e[n]);return t};var _o=["webkit","ms","moz","Moz","o","O"];uo.dispatch=function(){for(var t=new M,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=_(t);return t},M.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},uo.event=null,uo.requote=function(t){return t.replace(ko,"\\$&")};var ko=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Co={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},So=function(t,e){return e.querySelector(t)},Lo=function(t,e){return e.querySelectorAll(t)},To=function(t,e){var n=t.matches||t[x(t,"matchesSelector")];return(To=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(So=function(t,e){return Sizzle(t,e)[0]||null},Lo=Sizzle,To=Sizzle.matchesSelector),uo.selection=function(){return uo.select(fo.documentElement)};var Ao=uo.selection.prototype=[];Ao.select=function(t){var e,n,r,i,a=[];t=T(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return L(a)},Ao.selectAll=function(t){var e,n,r=[];t=A(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,u=o.length;++s<u;)(n=o[s])&&(r.push(e=co(t.call(n,n.__data__,s,i))),e.parentNode=n);return L(r)};var Io={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};uo.ns={prefix:Io,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Io.hasOwnProperty(n)?{space:Io[n],local:t}:t}},Ao.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=uo.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(I(e,t[e]));return this}return this.each(I(t,e))},Ao.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=N(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!j(t[i]).test(e))return!1;return!0}for(e in t)this.each(H(e,t[e]));return this}return this.each(H(t,e))},Ao.style=function(t,e,r){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(r in t)this.each(D(r,t[r],e));return this}if(2>i){var a=this.node();return n(a).getComputedStyle(a,null).getPropertyValue(t)}r=""}return this.each(D(t,e,r))},Ao.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(R(e,t[e]));return this}return this.each(R(t,e))},Ao.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ao.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ao.append=function(t){return t=q(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ao.insert=function(t,e){return t=q(t),e=T(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Ao.remove=function(){return this.each(z)},Ao.data=function(t,e){function n(t,n){var r,i,a,o=t.length,f=n.length,h=Math.min(o,f),d=new Array(f),p=new Array(f),g=new Array(o);if(e){var m,v=new c,y=new Array(o);for(r=-1;++r<o;)(i=t[r])&&(v.has(m=e.call(i,i.__data__,r))?g[r]=i:v.set(m,i),y[r]=m);for(r=-1;++r<f;)(i=v.get(m=e.call(n,a=n[r],r)))?i!==!0&&(d[r]=i,i.__data__=a):p[r]=G(a),v.set(m,!0);for(r=-1;++r<o;)r in y&&v.get(y[r])!==!0&&(g[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],a=n[r],i?(i.__data__=a,d[r]=i):p[r]=G(a);for(;f>r;++r)p[r]=G(n[r]);for(;o>r;++r)g[r]=t[r]}p.update=d,p.parentNode=d.parentNode=g.parentNode=t.parentNode,s.push(p),u.push(d),l.push(g)}var r,i,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(t[a]=i.__data__);return t}var s=W([]),u=L([]),l=L([]);if("function"==typeof t)for(;++a<o;)n(r=this[a],t.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],t);return u.enter=function(){return s},u.exit=function(){return l},u},Ao.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ao.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=U(t));for(var a=0,o=this.length;o>a;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return L(i)},Ao.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Ao.sort=function(t){t=B.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Ao.each=function(t){return F(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Ao.call=function(t){var e=co(arguments);return t.apply(e[0]=this,e),this},Ao.empty=function(){return!this.node()},Ao.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var a=n[r];if(a)return a}return null},Ao.size=function(){var t=0;return F(this,function(){++t}),t};var Oo=[];uo.selection.enter=W,uo.selection.enter.prototype=Oo,Oo.append=Ao.append,Oo.empty=Ao.empty,Oo.node=Ao.node,Oo.call=Ao.call,Oo.size=Ao.size,Oo.select=function(t){for(var e,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(e.push(r[l]=n=t.call(i.parentNode,a.__data__,l,s)),n.__data__=a.__data__):e.push(null)}return L(o)},Oo.insert=function(t,e){return arguments.length<2&&(e=V(this)),Ao.insert.call(this,t,e)},uo.select=function(e){var n;return"string"==typeof e?(n=[So(e,fo)],n.parentNode=fo.documentElement):(n=[e],n.parentNode=t(e)),L([n])},uo.selectAll=function(t){var e;return"string"==typeof t?(e=co(Lo(t,fo)),e.parentNode=fo.documentElement):(e=co(t),e.parentNode=null),L([e])},Ao.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(X(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(X(t,e,n))};var jo=uo.map({mouseenter:"mouseover",mouseleave:"mouseout"});fo&&jo.forEach(function(t){"on"+t in fo&&jo.remove(t)});var No,Ho=0;uo.mouse=function(t){return Q(t,C())};var Po=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;uo.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=C().changedTouches),e)for(var r,i=0,a=e.length;a>i;++i)if((r=e[i]).identifier===n)return Q(t,r)},uo.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function e(t,e,n,a,o){return function(){function s(){var t,n,r=e(h,g);r&&(t=r[0]-w[0],n=r[1]-w[1],p|=t|n,w=r,d({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:n}))}function u(){e(h,g)&&(v.on(a+m,null).on(o+m,null),y(p&&uo.event.target===f),d({type:"dragend"}))}var l,c=this,f=uo.event.target,h=c.parentNode,d=r.of(c,arguments),p=0,g=t(),m=".drag"+(null==g?"":"-"+g),v=uo.select(n(f)).on(a+m,s).on(o+m,u),y=Z(f),w=e(h,g);i?(l=i.apply(c,arguments),l=[l.x-w[0],l.y-w[1]]):l=[0,0],d({type:"dragstart"})}}var r=S(t,"drag","dragstart","dragend"),i=null,a=e(E,uo.mouse,n,"mousemove","mouseup"),o=e(J,uo.touch,w,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},uo.rebind(t,r,"on")},uo.touches=function(t,e){return arguments.length<2&&(e=C().touches),e?co(e).map(function(e){var n=Q(t,e);return n.identifier=e.identifier,n}):[]};var Do=1e-6,Ro=Do*Do,qo=Math.PI,zo=2*qo,Go=zo-Do,Uo=qo/2,Bo=qo/180,Fo=180/qo,Wo=Math.SQRT2,Vo=2,Xo=4;uo.interpolateZoom=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],u=e[1],l=e[2],c=s-i,f=u-a,h=c*c+f*f;if(Ro>h)r=Math.log(l/o)/Wo,n=function(t){return[i+t*c,a+t*f,o*Math.exp(Wo*t*r)]};else{var d=Math.sqrt(h),p=(l*l-o*o+Xo*h)/(2*o*Vo*d),g=(l*l-o*o-Xo*h)/(2*l*Vo*d),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/Wo,n=function(t){var e=t*r,n=it(m),s=o/(Vo*d)*(n*at(Wo*e+m)-rt(m));return[i+s*c,a+s*f,o*n/it(Wo*e+m)]}}return n.duration=1e3*r,n},uo.behavior.zoom=function(){function t(t){t.on(I,f).on($o+".zoom",d).on("dblclick.zoom",p).on(N,h)}function e(t){return[(t[0]-_.x)/_.k,(t[1]-_.y)/_.k]}function r(t){return[t[0]*_.k+_.x,t[1]*_.k+_.y]}function i(t){_.k=Math.max(L[0],Math.min(L[1],t))}function a(t,e){e=r(e),_.x+=t[0]-e[0],_.y+=t[1]-e[1]}function o(e,n,r,o){e.__chart__={x:_.x,y:_.y,k:_.k},i(Math.pow(2,o)),a(m=n,r),e=uo.select(e),T>0&&(e=e.transition().duration(T)),e.call(t.event)}function s(){x&&x.domain(b.range().map(function(t){return(t-_.x)/_.k}).map(b.invert)),M&&M.domain(E.range().map(function(t){return(t-_.y)/_.k}).map(E.invert))}function u(t){A++||t({type:"zoomstart"})}function l(t){s(),t({type:"zoom",scale:_.k,translate:[_.x,_.y]})}function c(t){--A||(t({type:"zoomend"}),m=null)}function f(){function t(){f=1,a(uo.mouse(i),d),l(s)}function r(){h.on(O,null).on(j,null),p(f&&uo.event.target===o),c(s)}var i=this,o=uo.event.target,s=H.of(i,arguments),f=0,h=uo.select(n(i)).on(O,t).on(j,r),d=e(uo.mouse(i)),p=Z(i);Uu.call(i),u(s)}function h(){function t(){var t=uo.touches(p);return d=_.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function n(){var e=uo.event.target;uo.select(e).on(b,r).on(x,s),E.push(e);for(var n=uo.event.changedTouches,i=0,a=n.length;a>i;++i)m[n[i].identifier]=null;var u=t(),l=Date.now();if(1===u.length){if(500>l-w){var c=u[0];o(p,c,m[c.identifier],Math.floor(Math.log(_.k)/Math.LN2)+1),k()}w=l}else if(u.length>1){var c=u[0],f=u[1],h=c[0]-f[0],d=c[1]-f[1];v=h*h+d*d}}function r(){var t,e,n,r,o=uo.touches(p);Uu.call(p);for(var s=0,u=o.length;u>s;++s,r=null)if(n=o[s],r=m[n.identifier]){if(e)break;t=n,e=r}if(r){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=v&&Math.sqrt(c/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],i(f*d)}w=null,a(t,e),l(g)}function s(){if(uo.event.touches.length){for(var e=uo.event.changedTouches,n=0,r=e.length;r>n;++n)delete m[e[n].identifier];for(var i in m)return void t()}uo.selectAll(E).on(y,null),M.on(I,f).on(N,h),C(),c(g)}var d,p=this,g=H.of(p,arguments),m={},v=0,y=".zoom-"+uo.event.changedTouches[0].identifier,b="touchmove"+y,x="touchend"+y,E=[],M=uo.select(p),C=Z(p);n(),u(g),M.on(I,null).on(N,n)}function d(){var t=H.of(this,arguments);y?clearTimeout(y):(Uu.call(this),g=e(m=v||uo.mouse(this)),u(t)),y=setTimeout(function(){y=null,c(t)},50),k(),i(Math.pow(2,.002*Yo())*_.k),a(m,g),l(t)}function p(){var t=uo.mouse(this),n=Math.log(_.k)/Math.LN2;o(this,t,e(t),uo.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var g,m,v,y,w,b,x,E,M,_={x:0,y:0,k:1},C=[960,500],L=Zo,T=250,A=0,I="mousedown.zoom",O="mousemove.zoom",j="mouseup.zoom",N="touchstart.zoom",H=S(t,"zoomstart","zoom","zoomend");return $o||($o="onwheel"in fo?(Yo=function(){return-uo.event.deltaY*(uo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fo?(Yo=function(){return uo.event.wheelDelta},"mousewheel"):(Yo=function(){return-uo.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=H.of(this,arguments),e=_;zu?uo.select(this).transition().each("start.zoom",function(){_=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var n=C[0],r=C[1],i=m?m[0]:n/2,a=m?m[1]:r/2,o=uo.interpolateZoom([(i-_.x)/_.k,(a-_.y)/_.k,n/_.k],[(i-e.x)/e.k,(a-e.y)/e.k,n/e.k]);return function(e){var r=o(e),s=n/r[2];this.__chart__=_={x:i-r[0]*s,y:a-r[1]*s,k:s},l(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=_,u(t),l(t),c(t))})},t.translate=function(e){return arguments.length?(_={x:+e[0],y:+e[1],k:_.k},s(),t):[_.x,_.y]},t.scale=function(e){return arguments.length?(_={x:_.x,y:_.y,k:null},i(+e),s(),t):_.k},t.scaleExtent=function(e){return arguments.length?(L=null==e?Zo:[+e[0],+e[1]],t):L},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(C=e&&[+e[0],+e[1]],t):C},t.duration=function(e){return arguments.length?(T=+e,t):T},t.x=function(e){return arguments.length?(x=e,b=e.copy(),_={x:0,y:0,k:1},t):x},t.y=function(e){return arguments.length?(M=e,E=e.copy(),_={x:0,y:0,k:1},t):M},uo.rebind(t,H,"on")};var Yo,$o,Zo=[0,1/0];uo.color=st,st.prototype.toString=function(){return this.rgb()+""},uo.hsl=ut;var Qo=ut.prototype=new st;Qo.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ut(this.h,this.s,this.l/t)},Qo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ut(this.h,this.s,t*this.l)},Qo.rgb=function(){return lt(this.h,this.s,this.l)},uo.hcl=ct;var Jo=ct.prototype=new st;Jo.brighter=function(t){return new ct(this.h,this.c,Math.min(100,this.l+Ko*(arguments.length?t:1)))},Jo.darker=function(t){return new ct(this.h,this.c,Math.max(0,this.l-Ko*(arguments.length?t:1)))},Jo.rgb=function(){return ft(this.h,this.c,this.l).rgb()},uo.lab=ht;var Ko=18,ts=.95047,es=1,ns=1.08883,rs=ht.prototype=new st;rs.brighter=function(t){return new ht(Math.min(100,this.l+Ko*(arguments.length?t:1)),this.a,this.b)},rs.darker=function(t){return new ht(Math.max(0,this.l-Ko*(arguments.length?t:1)),this.a,this.b)},rs.rgb=function(){return dt(this.l,this.a,this.b)},uo.rgb=yt;var is=yt.prototype=new st;is.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new yt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new yt(i,i,i)},is.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new yt(t*this.r,t*this.g,t*this.b)},is.hsl=function(){return Mt(this.r,this.g,this.b)},is.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var as=uo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});as.forEach(function(t,e){as.set(t,wt(e))}),uo.functor=St,uo.xhr=Lt(w),uo.dsv=function(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=Tt(t,e,null==n?r:i(n),a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?r:i(t)):n},o}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(c>=l)return o;if(i)return i=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l>c;){var r=t.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return t.slice(e,c-s)}return t.slice(e)}for(var r,i,a={},o={},s=[],l=t.length,c=0,f=0;(r=n())!==o;){for(var h=[];r!==a&&r!==o;)h.push(r),r=n();e&&null==(h=e(h,f++))||s.push(h)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new y,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(o).join(t)].concat(e.map(function(e){return i.map(function(t){return o(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(a).join("\n")},n},uo.csv=uo.dsv(",","text/csv"),uo.tsv=uo.dsv("	","text/tab-separated-values");var os,ss,us,ls,cs=this[x(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};uo.timer=function(){Ot.apply(this,arguments)},uo.timer.flush=function(){Nt(),Ht()},uo.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var fs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Dt);uo.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=uo.round(t,Pt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),fs[8+n/3]};var hs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ds=uo.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=uo.round(t,Pt(t,e))).toFixed(Math.max(0,Math.min(20,Pt(t*(1+1e-15),e))))}}),ps=uo.time={},gs=Date;zt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ms.setUTCDate.apply(this._,arguments)},setDay:function(){ms.setUTCDay.apply(this._,arguments)},setFullYear:function(){ms.setUTCFullYear.apply(this._,arguments)},setHours:function(){ms.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ms.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ms.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ms.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ms.setUTCSeconds.apply(this._,arguments)},setTime:function(){ms.setTime.apply(this._,arguments)}};var ms=Date.prototype;ps.year=Gt(function(t){return t=ps.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ps.years=ps.year.range,ps.years.utc=ps.year.utc.range,ps.day=Gt(function(t){var e=new gs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){
t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ps.days=ps.day.range,ps.days.utc=ps.day.utc.range,ps.dayOfYear=function(t){var e=ps.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ps[t]=Gt(function(t){return(t=ps.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ps.year(t).getDay();return Math.floor((ps.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ps[t+"s"]=n.range,ps[t+"s"].utc=n.utc.range,ps[t+"OfYear"]=function(t){var n=ps.year(t).getDay();return Math.floor((ps.dayOfYear(t)+(n+e)%7)/7)}}),ps.week=ps.sunday,ps.weeks=ps.sunday.range,ps.weeks.utc=ps.sunday.utc.range,ps.weekOfYear=ps.sundayOfYear;var vs={"-":"",_:" ",0:"0"},ys=/^\s*\d+/,ws=/^%/;uo.locale=function(t){return{numberFormat:Rt(t),timeFormat:Bt(t)}};var bs=uo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});uo.format=bs.numberFormat,uo.geo={},ce.prototype={s:0,t:0,add:function(t){fe(t,this.t,xs),fe(xs.s,this.s,this),this.s?this.t+=xs.t:this.s=xs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var xs=new ce;uo.geo.stream=function(t,e){t&&Es.hasOwnProperty(t.type)?Es[t.type](t,e):he(t,e)};var Es={Feature:function(t,e){he(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)he(n[r].geometry,e)}},Ms={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){de(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)de(n[r],e,0)},Polygon:function(t,e){pe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)pe(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)he(n[r],e)}};uo.geo.area=function(t){return _s=0,uo.geo.stream(t,Cs),_s};var _s,ks=new ce,Cs={sphere:function(){_s+=4*qo},point:E,lineStart:E,lineEnd:E,polygonStart:function(){ks.reset(),Cs.lineStart=ge},polygonEnd:function(){var t=2*ks;_s+=0>t?4*qo+t:t,Cs.lineStart=Cs.lineEnd=Cs.point=E}};uo.geo.bounds=function(){function t(t,e){w.push(b=[c=t,h=t]),f>e&&(f=e),e>d&&(d=e)}function e(e,n){var r=me([e*Bo,n*Bo]);if(v){var i=ye(v,r),a=[i[1],-i[0],0],o=ye(a,i);xe(o),o=Ee(o);var u=e-p,l=u>0?1:-1,g=o[0]*Fo*l,m=xo(u)>180;if(m^(g>l*p&&l*e>g)){var y=o[1]*Fo;y>d&&(d=y)}else if(g=(g+360)%360-180,m^(g>l*p&&l*e>g)){var y=-o[1]*Fo;f>y&&(f=y)}else f>n&&(f=n),n>d&&(d=n);m?p>e?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e):h>=c?(c>e&&(c=e),e>h&&(h=e)):e>p?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e)}else t(e,n);v=r,p=e}function n(){x.point=e}function r(){b[0]=c,b[1]=h,x.point=t,v=null}function i(t,n){if(v){var r=t-p;y+=xo(r)>180?r+(r>0?360:-360):r}else g=t,m=n;Cs.point(t,n),e(t,n)}function a(){Cs.lineStart()}function o(){i(g,m),Cs.lineEnd(),xo(y)>Do&&(c=-(h=180)),b[0]=c,b[1]=h,v=null}function s(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,h,d,p,g,m,v,y,w,b,x={point:t,lineStart:n,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=a,x.lineEnd=o,y=0,Cs.polygonStart()},polygonEnd:function(){Cs.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=r,0>ks?(c=-(h=180),f=-(d=90)):y>Do?d=90:-Do>y&&(f=-90),b[0]=c,b[1]=h}};return function(t){d=h=-(c=f=1/0),w=[],uo.geo.stream(t,x);var e=w.length;if(e){w.sort(u);for(var n,r=1,i=w[0],a=[i];e>r;++r)n=w[r],l(n[0],i)||l(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var o,n,p=-(1/0),e=a.length-1,r=0,i=a[e];e>=r;i=n,++r)n=a[r],(o=s(i[1],n[0]))>p&&(p=o,c=n[0],h=i[1])}return w=b=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,d]]}}(),uo.geo.centroid=function(t){Ss=Ls=Ts=As=Is=Os=js=Ns=Hs=Ps=Ds=0,uo.geo.stream(t,Rs);var e=Hs,n=Ps,r=Ds,i=e*e+n*n+r*r;return Ro>i&&(e=Os,n=js,r=Ns,Do>Ls&&(e=Ts,n=As,r=Is),i=e*e+n*n+r*r,Ro>i)?[NaN,NaN]:[Math.atan2(n,e)*Fo,nt(r/Math.sqrt(i))*Fo]};var Ss,Ls,Ts,As,Is,Os,js,Ns,Hs,Ps,Ds,Rs={sphere:E,point:_e,lineStart:Ce,lineEnd:Se,polygonStart:function(){Rs.lineStart=Le},polygonEnd:function(){Rs.lineStart=Ce}},qs=Ne(Ae,Re,ze,[-qo,-qo/2]),zs=1e9;uo.geo.clipExtent=function(){var t,e,n,r,i,a,o={stream:function(t){return i&&(i.valid=!1),i=a(t),i.valid=!0,i},extent:function(s){return arguments.length?(a=Fe(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[t,e],[n,r]]}};return o.extent([[0,0],[960,500]])},(uo.geo.conicEqualArea=function(){return We(Ve)}).raw=Ve,uo.geo.albers=function(){return uo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},uo.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(r(a,o),e)||i(a,o),e}var e,n,r,i,a=uo.geo.albers(),o=uo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=uo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?o:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:a).invert(t)},t.stream=function(t){var e=a.stream(t),n=o.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),s.precision(e),t):a.precision()},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),s.scale(e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var l=a.scale(),c=+e[0],f=+e[1];return n=a.translate(e).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(u).point,r=o.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+Do,f+.12*l+Do],[c-.214*l-Do,f+.234*l-Do]]).stream(u).point,i=s.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+Do,f+.166*l+Do],[c-.115*l-Do,f+.234*l-Do]]).stream(u).point,t},t.scale(1070)};var Gs,Us,Bs,Fs,Ws,Vs,Xs={point:E,lineStart:E,lineEnd:E,polygonStart:function(){Us=0,Xs.lineStart=Xe},polygonEnd:function(){Xs.lineStart=Xs.lineEnd=Xs.point=E,Gs+=xo(Us/2)}},Ys={point:Ye,lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E},$s={point:Qe,lineStart:Je,lineEnd:Ke,polygonStart:function(){$s.lineStart=tn},polygonEnd:function(){$s.point=Qe,$s.lineStart=Je,$s.lineEnd=Ke}};uo.geo.path=function(){function t(t){return t&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=i(a)),uo.geo.stream(t,o)),a.result()}function e(){return o=null,t}var n,r,i,a,o,s=4.5;return t.area=function(t){return Gs=0,uo.geo.stream(t,i(Xs)),Gs},t.centroid=function(t){return Ts=As=Is=Os=js=Ns=Hs=Ps=Ds=0,uo.geo.stream(t,i($s)),Ds?[Hs/Ds,Ps/Ds]:Ns?[Os/Ns,js/Ns]:Is?[Ts/Is,As/Is]:[NaN,NaN]},t.bounds=function(t){return Ws=Vs=-(Bs=Fs=1/0),uo.geo.stream(t,i(Ys)),[[Bs,Fs],[Ws,Vs]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||rn(t):w,e()):n},t.context=function(t){return arguments.length?(a=null==(r=t)?new $e:new en(t),"function"!=typeof s&&a.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(a.pointRadius(+e),+e),t):s},t.projection(uo.geo.albersUsa()).context(null)},uo.geo.transform=function(t){return{stream:function(e){var n=new an(e);for(var r in t)n[r]=t[r];return n}}},an.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},uo.geo.projection=sn,uo.geo.projectionMutator=un,(uo.geo.equirectangular=function(){return sn(cn)}).raw=cn.invert=cn,uo.geo.rotation=function(t){function e(e){return e=t(e[0]*Bo,e[1]*Bo),e[0]*=Fo,e[1]*=Fo,e}return t=hn(t[0]%360*Bo,t[1]*Bo,t.length>2?t[2]*Bo:0),e.invert=function(e){return e=t.invert(e[0]*Bo,e[1]*Bo),e[0]*=Fo,e[1]*=Fo,e},e},fn.invert=cn,uo.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=hn(-t[0]*Bo,-t[1]*Bo,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Fo,t[1]*=Fo}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=mn((e=+r)*Bo,i*Bo),t):e},t.precision=function(r){return arguments.length?(n=mn(e*Bo,(i=+r)*Bo),t):i},t.angle(90)},uo.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Bo,i=t[1]*Bo,a=e[1]*Bo,o=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},uo.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return uo.range(Math.ceil(a/m)*m,i,m).map(h).concat(uo.range(Math.ceil(l/v)*v,u,v).map(d)).concat(uo.range(Math.ceil(r/p)*p,n,p).filter(function(t){return xo(t%m)>Do}).map(c)).concat(uo.range(Math.ceil(s/g)*g,o,g).filter(function(t){return xo(t%v)>Do}).map(f))}var n,r,i,a,o,s,u,l,c,f,h,d,p=10,g=p,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(d(u).slice(1),h(i).reverse().slice(1),d(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],i=+e[1][0],l=+e[0][1],u=+e[1][1],a>i&&(e=a,a=i,i=e),l>u&&(e=l,l=u,u=e),t.precision(y)):[[a,l],[i,u]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(y)):[[r,s],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=yn(s,o,90),f=wn(r,n,y),h=yn(l,u,90),d=wn(a,i,y),t):y},t.majorExtent([[-180,-90+Do],[180,90-Do]]).minorExtent([[-180,-80-Do],[180,80+Do]])},uo.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=bn,i=xn;return t.distance=function(){return uo.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},uo.geo.interpolate=function(t,e){return En(t[0]*Bo,t[1]*Bo,e[0]*Bo,e[1]*Bo)},uo.geo.length=function(t){return Zs=0,uo.geo.stream(t,Qs),Zs};var Zs,Qs={sphere:E,point:E,lineStart:Mn,lineEnd:E,polygonStart:E,polygonEnd:E},Js=_n(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(uo.geo.azimuthalEqualArea=function(){return sn(Js)}).raw=Js;var Ks=_n(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},w);(uo.geo.azimuthalEquidistant=function(){return sn(Ks)}).raw=Ks,(uo.geo.conicConformal=function(){return We(kn)}).raw=kn,(uo.geo.conicEquidistant=function(){return We(Cn)}).raw=Cn;var tu=_n(function(t){return 1/t},Math.atan);(uo.geo.gnomonic=function(){return sn(tu)}).raw=tu,Sn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Uo]},(uo.geo.mercator=function(){return Ln(Sn)}).raw=Sn;var eu=_n(function(){return 1},Math.asin);(uo.geo.orthographic=function(){return sn(eu)}).raw=eu;var nu=_n(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(uo.geo.stereographic=function(){return sn(nu)}).raw=nu,Tn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Uo]},(uo.geo.transverseMercator=function(){var t=Ln(Tn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Tn,uo.geom={},uo.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=St(n),a=St(r),o=t.length,s=[],u=[];for(e=0;o>e;e++)s.push([+i.call(this,t[e],e),+a.call(this,t[e],e),e]);for(s.sort(jn),e=0;o>e;e++)u.push([s[e][0],-s[e][1]]);var l=On(s),c=On(u),f=c[0]===l[0],h=c[c.length-1]===l[l.length-1],d=[];for(e=l.length-1;e>=0;--e)d.push(t[s[l[e]][2]]);for(e=+f;e<c.length-h;++e)d.push(t[s[c[e]][2]]);return d}var n=An,r=In;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},uo.geom.polygon=function(t){return Co(t,ru),t};var ru=uo.geom.polygon.prototype=[];ru.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},ru.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},ru.clip=function(t){for(var e,n,r,i,a,o,s=Pn(t),u=-1,l=this.length-Pn(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,i=this[u],a=e[(r=e.length-s)-1],n=-1;++n<r;)o=e[n],Nn(o,c,i)?(Nn(a,c,i)||t.push(Hn(a,o,c,i)),t.push(o)):Nn(a,c,i)&&t.push(Hn(a,o,c,i)),a=o;s&&t.push(t[0]),c=i}return t};var iu,au,ou,su,uu,lu=[],cu=[];Fn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Vn),e.length},nr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},rr.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=sr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ar(this,n),t=n,n=t.U),n.C=!1,r.C=!0,or(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(or(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ar(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?sr(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,ar(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,or(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ar(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,or(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ar(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,or(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},uo.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],a=s[1][0],o=s[1][1];return ur(n(t),s).cells.forEach(function(n,s){var u=n.edges,l=n.site,c=e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=r&&l.x<=a&&l.y>=i&&l.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/Do)*Do,y:Math.round(o(t,e)/Do)*Do,i:e}})}var r=An,i=In,a=r,o=i,s=fu;return t?e(t):(e.links=function(t){return ur(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return ur(n(t)).cells.forEach(function(n,r){for(var i,a,o=n.site,s=n.edges.sort(Vn),u=-1,l=s.length,c=s[l-1].edge,f=c.l===o?c.r:c.l;++u<l;)i=c,a=f,c=s[u].edge,f=c.l===o?c.r:c.l,r<a.i&&r<f.i&&cr(o,a,f)<0&&e.push([t[r],t[a.i],t[f.i]])}),e},e.x=function(t){return arguments.length?(a=St(r=t),e):r},e.y=function(t){return arguments.length?(o=St(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?fu:t,e):s===fu?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===fu?null:s&&s[1]},e)};var fu=[[-1e6,-1e6],[1e6,1e6]];uo.geom.delaunay=function(t){return uo.geom.voronoi().triangles(t)},uo.geom.quadtree=function(t,e,n,r,i){function a(t){function a(t,e,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(xo(u-n)+xo(c-r)<.01)l(t,e,n,r,i,a,o,s);else{var f=t.point;t.x=t.y=t.point=null,l(t,f,u,c,i,a,o,s),l(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else l(t,e,n,r,i,a,o,s)}function l(t,e,n,r,i,o,s,u){var l=.5*(i+s),c=.5*(o+u),f=n>=l,h=r>=c,d=h<<1|f;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=dr()),f?i=l:s=l,h?o=c:u=c,a(t,e,n,r,i,o,s,u)}var c,f,h,d,p,g,m,v,y,w=St(s),b=St(u);if(null!=e)g=e,m=n,v=r,y=i;else if(v=y=-(g=m=1/0),f=[],h=[],p=t.length,o)for(d=0;p>d;++d)c=t[d],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),f.push(c.x),h.push(c.y);else for(d=0;p>d;++d){var x=+w(c=t[d],d),E=+b(c,d);g>x&&(g=x),m>E&&(m=E),x>v&&(v=x),E>y&&(y=E),f.push(x),h.push(E)}var M=v-g,_=y-m;M>_?y=m+M:v=g+_;var k=dr();if(k.add=function(t){a(k,t,+w(t,++d),+b(t,d),g,m,v,y)},k.visit=function(t){pr(t,k,g,m,v,y)},k.find=function(t){return gr(k,t[0],t[1],g,m,v,y)},d=-1,null==e){for(;++d<p;)a(k,t[d],f[d],h[d],g,m,v,y);--d}else t.forEach(k.add);return f=h=t=c=null,k}var o,s=An,u=In;return(o=arguments.length)?(s=fr,u=hr,3===o&&(i=n,r=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(s=t,a):s},a.y=function(t){return arguments.length?(u=t,a):u},a.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),a):null==e?null:[[e,n],[r,i]]},a.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),a):null==e?null:[r-e,i-n]},a)},uo.interpolateRgb=mr,uo.interpolateObject=vr,uo.interpolateNumber=yr,uo.interpolateString=wr;var hu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,du=new RegExp(hu.source,"g");uo.interpolate=br,uo.interpolators=[function(t,e){var n=typeof e;return("string"===n?as.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?mr:wr:e instanceof st?mr:Array.isArray(e)?xr:"object"===n&&isNaN(e)?vr:yr)(t,e)}],uo.interpolateArray=xr;var pu=function(){return w},gu=uo.map({linear:pu,poly:Lr,quad:function(){return kr},cubic:function(){return Cr},sin:function(){return Tr},exp:function(){return Ar},circle:function(){return Ir},elastic:Or,back:jr,bounce:function(){return Nr}}),mu=uo.map({"in":w,out:Mr,"in-out":_r,"out-in":function(t){return _r(Mr(t))}});uo.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=gu.get(n)||pu,r=mu.get(r)||w,Er(r(n.apply(null,lo.call(arguments,1))))},uo.interpolateHcl=Hr,uo.interpolateHsl=Pr,uo.interpolateLab=Dr,uo.interpolateRound=Rr,uo.transform=function(t){var e=fo.createElementNS(uo.ns.prefix.svg,"g");return(uo.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new qr(n?n.matrix:vu)})(t)},qr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var vu={a:1,b:0,c:0,d:1,e:0,f:0};uo.interpolateTransform=Yr,uo.layout={},uo.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Qr(t[n]));return e}},uo.layout.chord=function(){function t(){var t,l,f,h,d,p={},g=[],m=uo.range(a),v=[];for(n=[],r=[],t=0,h=-1;++h<a;){for(l=0,d=-1;++d<a;)l+=i[h][d];g.push(l),v.push(uo.range(a)),t+=l}for(o&&m.sort(function(t,e){return o(g[t],g[e])}),s&&v.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(zo-c*a)/t,l=0,h=-1;++h<a;){for(f=l,d=-1;++d<a;){var y=m[h],w=v[y][d],b=i[y][w],x=l,E=l+=b*t;p[y+"-"+w]={index:y,subindex:w,startAngle:x,endAngle:E,value:b}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/t},l+=c}for(h=-1;++h<a;)for(d=h-1;++d<a;){var M=p[h+"-"+d],_=p[d+"-"+h];(M.value||_.value)&&n.push(M.value<_.value?{source:_,target:M}:{source:M,target:_})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,a,o,s,u,l={},c=0;return l.matrix=function(t){return arguments.length?(a=(i=t)&&i.length,n=r=null,l):i},l.padding=function(t){return arguments.length?(c=t,n=r=null,l):c},l.sortGroups=function(t){return arguments.length?(o=t,n=r=null,l):o},l.sortSubgroups=function(t){return arguments.length?(s=t,n=null,l):s},l.sortChords=function(t){return arguments.length?(u=t,n&&e(),l):u},l.chords=function(){return n||t(),n},l.groups=function(){return r||t(),r},l},uo.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-n,u=a*a+o*o;if(u>s*s/v){if(g>u){var l=e.charge/u;t.px-=a*l,t.py-=o*l}return!0}if(e.point&&u&&g>u){var l=e.pointCharge/u;t.px-=a*l,t.py-=o*l}}return!e.charge}}function e(t){t.px=uo.event.x,t.py=uo.event.y,u.resume()}var n,r,i,a,o,s,u={},l=uo.dispatch("start","tick","end"),c=[1,1],f=.9,h=yu,d=wu,p=-30,g=bu,m=.1,v=.64,y=[],b=[];return u.tick=function(){if((i*=.99)<.005)return n=null,l.end({type:"end",alpha:i=0}),!0;var e,r,u,h,d,g,v,w,x,E=y.length,M=b.length;for(r=0;M>r;++r)u=b[r],h=u.source,d=u.target,w=d.x-h.x,x=d.y-h.y,(g=w*w+x*x)&&(g=i*o[r]*((g=Math.sqrt(g))-a[r])/g,w*=g,x*=g,d.x-=w*(v=h.weight+d.weight?h.weight/(h.weight+d.weight):.5),d.y-=x*v,h.x+=w*(v=1-v),h.y+=x*v);if((v=i*m)&&(w=c[0]/2,x=c[1]/2,r=-1,v))for(;++r<E;)u=y[r],u.x+=(w-u.x)*v,u.y+=(x-u.y)*v;if(p)for(ii(e=uo.geom.quadtree(y),i,s),r=-1;++r<E;)(u=y[r]).fixed||e.visit(t(u));for(r=-1;++r<E;)u=y[r],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*f,u.y-=(u.py-(u.py=u.y))*f);l.tick({type:"tick",alpha:i})},u.nodes=function(t){return arguments.length?(y=t,u):y},u.links=function(t){return arguments.length?(b=t,u):b},u.size=function(t){return arguments.length?(c=t,u):c},u.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,u):d},u.friction=function(t){return arguments.length?(f=+t,u):f},u.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,u):p},u.chargeDistance=function(t){return arguments.length?(g=t*t,u):Math.sqrt(g)},u.gravity=function(t){return arguments.length?(m=+t,u):m},u.theta=function(t){return arguments.length?(v=t*t,u):Math.sqrt(v)},u.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,l.start({type:"end",alpha:i=0})):t>0&&(l.start({type:"start",alpha:i=t}),n=Ot(u.tick)),u):i},u.start=function(){function t(t,r){if(!n){for(n=new Array(i),u=0;i>u;++u)n[u]=[];for(u=0;l>u;++u){var a=b[u];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,s=n[e],u=-1,c=s.length;++u<c;)if(!isNaN(o=s[u][t]))return o;return Math.random()*r}var e,n,r,i=y.length,l=b.length,f=c[0],g=c[1];for(e=0;i>e;++e)(r=y[e]).index=e,r.weight=0;for(e=0;l>e;++e)r=b[e],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(e=0;i>e;++e)r=y[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof h)for(e=0;l>e;++e)a[e]=+h.call(this,b[e],e);else for(e=0;l>e;++e)a[e]=h;if(o=[],"function"==typeof d)for(e=0;l>e;++e)o[e]=+d.call(this,b[e],e);else for(e=0;l>e;++e)o[e]=d;if(s=[],"function"==typeof p)for(e=0;i>e;++e)s[e]=+p.call(this,y[e],e);else for(e=0;i>e;++e)s[e]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return r||(r=uo.behavior.drag().origin(w).on("dragstart.force",ti).on("drag.force",e).on("dragend.force",ei)),arguments.length?void this.on("mouseover.force",ni).on("mouseout.force",ri).call(r):r},uo.rebind(u,l,"on")};var yu=20,wu=1,bu=1/0;uo.layout.hierarchy=function(){function t(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(l=n.call(t,a,a.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=l}else r&&(a.value=+r.call(t,a,a.depth)||0),delete a.children;return si(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),s}var e=ci,n=ui,r=li;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(oi(e,function(t){t.children&&(t.value=0)}),si(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},uo.layout.partition=function(){function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,u,l=-1;for(r=e.value?r/e.value:0;++l<o;)t(s=a[l],n,u=s.value*r,i),n+=u}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return t(o[0],0,i[0],i[1]/e(o[0])),o}var r=uo.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},ai(n,r)},uo.layout.pie=function(){function t(o){var s,u=o.length,l=o.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(f)/u,+("function"==typeof a?a.apply(this,arguments):a)),d=h*(0>f?-1:1),p=uo.sum(l),g=p?(f-u*d)/p:0,m=uo.range(u),v=[];return null!=n&&m.sort(n===xu?function(t,e){return l[e]-l[t]}:function(t,e){return n(o[t],o[e])}),m.forEach(function(t){v[t]={data:o[t],value:s=l[t],startAngle:c,endAngle:c+=s*g+d,padAngle:h}}),v}var e=Number,n=xu,r=0,i=zo,a=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(a=e,t):a},t};var xu={};uo.layout.stack=function(){function t(s,u){if(!(h=s.length))return s;var l=s.map(function(n,r){return e.call(t,n,r)}),c=l.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),f=n.call(t,c,u);l=uo.permute(l,f),c=uo.permute(c,f);var h,d,p,g,m=r.call(t,c,u),v=l[0].length;for(p=0;v>p;++p)for(i.call(t,l[0][p],g=m[p],c[0][p][1]),d=1;h>d;++d)i.call(t,l[d][p],g+=c[d-1][p][1],c[d][p][1]);return s}var e=w,n=gi,r=mi,i=pi,a=hi,o=di;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Eu.get(e)||gi,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:Mu.get(e)||mi,t):r},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(i=e,t):i},t};var Eu=uo.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(vi),a=t.map(yi),o=uo.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,u=0,l=[],c=[];for(e=0;r>e;++e)n=o[e],u>s?(s+=a[n],l.push(n)):(u+=a[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return uo.range(t.length).reverse()},"default":gi}),Mu=uo.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,u=[];for(n=0;a>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>s&&(s=r),o.push(r)}for(n=0;a>n;++n)u[n]=(s-o[n])/2;return u},wiggle:function(t){var e,n,r,i,a,o,s,u,l,c=t.length,f=t[0],h=f.length,d=[];for(d[0]=u=l=0,n=1;h>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,a=0,s=f[n][0]-f[n-1][0];c>e;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);e>r;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}d[n]=u-=i?a/i*s:0,l>u&&(l=u)}for(n=0;h>n;++n)d[n]-=l;return d},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;a>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:mi});uo.layout.histogram=function(){function t(t,a){for(var o,s,u=[],l=t.map(n,this),c=r.call(this,l,a),f=i.call(this,c,l,a),a=-1,h=l.length,d=f.length-1,p=e?1:1/h;++a<d;)o=u[a]=[],o.dx=f[a+1]-(o.x=f[a]),o.y=0;if(d>0)for(a=-1;++a<h;)s=l[a],s>=c[0]&&s<=c[1]&&(o=u[uo.bisect(f,s,1,d)-1],o.y+=p,o.push(t[a]));return u}var e=!0,n=Number,r=Ei,i=bi;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=St(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return xi(t,e)}:St(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},uo.layout.pack=function(){function t(t,a){var o=n.call(this,t,a),s=o[0],u=i[0],l=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,si(s,function(t){t.r=+c(t.value)}),si(s,Si),r){var f=r*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;si(s,function(t){t.r+=f}),si(s,Si),si(s,function(t){t.r-=f})}return Ai(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),o}var e,n=uo.layout.hierarchy().sort(Mi),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},ai(t,n)},uo.layout.tree=function(){function t(t,i){var c=o.call(this,t,i),f=c[0],h=e(f);if(si(h,n),h.parent.m=-h.z,oi(h,r),l)oi(f,a);else{var d=f,p=f,g=f;oi(f,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var m=s(d,p)/2-d.x,v=u[0]/(p.x+s(p,d)/2+m),y=u[1]/(g.depth||1);oi(f,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,a=e.children,o=0,s=a.length;s>o;++o)r.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Pi(t);var a=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+s(t._,r._),t.m=t.z-a):t.z=a}else r&&(t.z=r.z+s(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,a=t,o=e,u=i.parent.children[0],l=i.m,c=a.m,f=o.m,h=u.m;o=Ni(o),i=ji(i),o&&i;)u=ji(u),a=Ni(a),a.a=t,r=o.z+f-i.z-l+s(o._,i._),r>0&&(Hi(Di(o,t,n),t,r),l+=r,c+=r),f+=o.m,l+=i.m,h+=u.m,c+=a.m;o&&!Ni(a)&&(a.t=o,a.m+=f-c),i&&!ji(u)&&(u.t=i,u.m+=l-h,n=t)}return n}function a(t){t.x*=u[0],t.y=t.depth*u[1]}var o=uo.layout.hierarchy().sort(null).value(null),s=Oi,u=[1,1],l=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(l=null==(u=e)?a:null,t):l?null:u},t.nodeSize=function(e){return arguments.length?(l=null==(u=e)?null:a,t):l?u:null},ai(t,o)},uo.layout.cluster=function(){function t(t,a){var o,s=e.call(this,t,a),u=s[0],l=0;si(u,function(t){var e=t.children;e&&e.length?(t.x=qi(e),t.y=Ri(e)):(t.x=o?l+=n(t,o):0,t.y=0,o=t)});var c=zi(u),f=Gi(u),h=c.x-n(c,f)/2,d=f.x+n(f,c)/2;return si(u,i?function(t){t.x=(t.x-u.x)*r[0],t.y=(u.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(d-h)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),s}var e=uo.layout.hierarchy().sort(null).value(null),n=Oi,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,
t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},ai(t,e)},uo.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var a=n.children;if(a&&a.length){var o,s,u,l=f(n),c=[],h=a.slice(),p=1/0,g="slice"===d?l.dx:"dice"===d?l.dy:"slice-dice"===d?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(h,l.dx*l.dy/n.value),c.area=0;(u=h.length)>0;)c.push(o=h[u-1]),c.area+=o.area,"squarify"!==d||(s=r(c,g))<=p?(h.pop(),p=s):(c.area-=c.pop().area,i(c,g,l,!1),g=Math.min(l.dx,l.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,l,!0),c.length=c.area=0),a.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var a,o=f(e),s=r.slice(),u=[];for(t(s,o.dx*o.dy/e.value),u.area=0;a=s.pop();)u.push(a),u.area+=a.area,null!=a.z&&(i(u,a.z?o.dx:o.dy,o,!s.length),u.length=u.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(a>n&&(a=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*p/r,r/(e*a*p)):1/0}function i(t,e,n,r){var i,a=-1,o=t.length,s=n.x,l=n.y,c=e?u(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)i=t[a],i.x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)i=t[a],i.x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function a(r){var i=o||s(r),a=i[0];return a.x=a.y=0,a.value?(a.dx=l[0],a.dy=l[1]):a.dx=a.dy=0,o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),h&&(o=i),i}var o,s=uo.layout.hierarchy(),u=Math.round,l=[1,1],c=null,f=Ui,h=!1,d="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(l=t,a):l},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?Ui(e):Bi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Bi(e,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Ui:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(u=t?Math.round:Number,a):u!=Number},a.sticky=function(t){return arguments.length?(h=t,o=null,a):h},a.ratio=function(t){return arguments.length?(p=t,a):p},a.mode=function(t){return arguments.length?(d=t+"",a):d},ai(a,s)},uo.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=uo.random.normal.apply(uo,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=uo.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},uo.scale={};var _u={floor:w,ceil:w};uo.scale.linear=function(){return Zi([0,1],[0,1],br,!1)};var ku={s:1,g:1,p:1,r:1,e:1};uo.scale.log=function(){return ia(uo.scale.linear().domain([0,1]),10,!0,[1,10])};var Cu=uo.format(".0e"),Su={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};uo.scale.pow=function(){return aa(uo.scale.linear(),1,[0,1])},uo.scale.sqrt=function(){return uo.scale.pow().exponent(.5)},uo.scale.ordinal=function(){return sa([],{t:"range",a:[[]]})},uo.scale.category10=function(){return uo.scale.ordinal().range(Lu)},uo.scale.category20=function(){return uo.scale.ordinal().range(Tu)},uo.scale.category20b=function(){return uo.scale.ordinal().range(Au)},uo.scale.category20c=function(){return uo.scale.ordinal().range(Iu)};var Lu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(bt),Tu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(bt),Au=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(bt),Iu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(bt);uo.scale.quantile=function(){return ua([],[])},uo.scale.quantize=function(){return la(0,1,[0,1])},uo.scale.threshold=function(){return ca([.5],[0,1])},uo.scale.identity=function(){return fa([0,1])},uo.svg={},uo.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=o.apply(this,arguments)-Uo,f=s.apply(this,arguments)-Uo,h=Math.abs(f-c),d=c>f?0:1;if(t>l&&(p=l,l=t,t=p),h>=Go)return e(l,d)+(t?e(t,1-d):"")+"Z";var p,g,m,v,y,w,b,x,E,M,_,k,C=0,S=0,L=[];if((v=(+u.apply(this,arguments)||0)/2)&&(m=a===Ou?Math.sqrt(t*t+l*l):+a.apply(this,arguments),d||(S*=-1),l&&(S=nt(m/l*Math.sin(v))),t&&(C=nt(m/t*Math.sin(v)))),l){y=l*Math.cos(c+S),w=l*Math.sin(c+S),b=l*Math.cos(f-S),x=l*Math.sin(f-S);var T=Math.abs(f-c-2*S)<=qo?0:1;if(S&&ya(y,w,b,x)===d^T){var A=(c+f)/2;y=l*Math.cos(A),w=l*Math.sin(A),b=x=null}}else y=w=0;if(t){E=t*Math.cos(f-C),M=t*Math.sin(f-C),_=t*Math.cos(c+C),k=t*Math.sin(c+C);var I=Math.abs(c-f+2*C)<=qo?0:1;if(C&&ya(E,M,_,k)===1-d^I){var O=(c+f)/2;E=t*Math.cos(O),M=t*Math.sin(O),_=k=null}}else E=M=0;if(h>Do&&(p=Math.min(Math.abs(l-t)/2,+i.apply(this,arguments)))>.001){g=l>t^d?0:1;var j=p,N=p;if(qo>h){var H=null==_?[E,M]:null==b?[y,w]:Hn([y,w],[_,k],[b,x],[E,M]),P=y-H[0],D=w-H[1],R=b-H[0],q=x-H[1],z=1/Math.sin(Math.acos((P*R+D*q)/(Math.sqrt(P*P+D*D)*Math.sqrt(R*R+q*q)))/2),G=Math.sqrt(H[0]*H[0]+H[1]*H[1]);N=Math.min(p,(t-G)/(z-1)),j=Math.min(p,(l-G)/(z+1))}if(null!=b){var U=wa(null==_?[E,M]:[_,k],[y,w],l,j,d),B=wa([b,x],[E,M],l,j,d);p===j?L.push("M",U[0],"A",j,",",j," 0 0,",g," ",U[1],"A",l,",",l," 0 ",1-d^ya(U[1][0],U[1][1],B[1][0],B[1][1]),",",d," ",B[1],"A",j,",",j," 0 0,",g," ",B[0]):L.push("M",U[0],"A",j,",",j," 0 1,",g," ",B[0])}else L.push("M",y,",",w);if(null!=_){var F=wa([y,w],[_,k],t,-N,d),W=wa([E,M],null==b?[y,w]:[b,x],t,-N,d);p===N?L.push("L",W[0],"A",N,",",N," 0 0,",g," ",W[1],"A",t,",",t," 0 ",d^ya(W[1][0],W[1][1],F[1][0],F[1][1]),",",1-d," ",F[1],"A",N,",",N," 0 0,",g," ",F[0]):L.push("L",W[0],"A",N,",",N," 0 0,",g," ",F[0])}else L.push("L",E,",",M)}else L.push("M",y,",",w),null!=b&&L.push("A",l,",",l," 0 ",T,",",d," ",b,",",x),L.push("L",E,",",M),null!=_&&L.push("A",t,",",t," 0 ",I,",",1-d," ",_,",",k);return L.push("Z"),L.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=da,r=pa,i=ha,a=Ou,o=ga,s=ma,u=va;return t.innerRadius=function(e){return arguments.length?(n=St(e),t):n},t.outerRadius=function(e){return arguments.length?(r=St(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=St(e),t):i},t.padRadius=function(e){return arguments.length?(a=e==Ou?Ou:St(e),t):a},t.startAngle=function(e){return arguments.length?(o=St(e),t):o},t.endAngle=function(e){return arguments.length?(s=St(e),t):s},t.padAngle=function(e){return arguments.length?(u=St(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Uo;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Ou="auto";uo.svg.line=function(){return ba(w)};var ju=uo.map({linear:xa,"linear-closed":Ea,step:Ma,"step-before":_a,"step-after":ka,basis:Ia,"basis-open":Oa,"basis-closed":ja,bundle:Na,cardinal:La,"cardinal-open":Ca,"cardinal-closed":Sa,monotone:za});ju.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Nu=[0,2/3,1/3,0],Hu=[0,1/3,2/3,0],Pu=[0,1/6,2/3,1/6];uo.svg.line.radial=function(){var t=ba(Ga);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},_a.reverse=ka,ka.reverse=_a,uo.svg.area=function(){return Ua(w)},uo.svg.area.radial=function(){var t=Ua(Ga);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},uo.svg.chord=function(){function t(t,s){var u=e(this,a,t,s),l=e(this,o,t,s);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,l)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,u.r,u.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),a=s.call(t,i,r),o=u.call(t,i,r)-Uo,c=l.call(t,i,r)-Uo;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>qo)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var a=bn,o=xn,s=Ba,u=ga,l=ma;return t.radius=function(e){return arguments.length?(s=St(e),t):s},t.source=function(e){return arguments.length?(a=St(e),t):a},t.target=function(e){return arguments.length?(o=St(e),t):o},t.startAngle=function(e){return arguments.length?(u=St(e),t):u},t.endAngle=function(e){return arguments.length?(l=St(e),t):l},t},uo.svg.diagonal=function(){function t(t,i){var a=e.call(this,t,i),o=n.call(this,t,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=bn,n=xn,r=Fa;return t.source=function(n){return arguments.length?(e=St(n),t):e},t.target=function(e){return arguments.length?(n=St(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},uo.svg.diagonal.radial=function(){var t=uo.svg.diagonal(),e=Fa,n=t.projection;return t.projection=function(t){return arguments.length?n(Wa(e=t)):e},t},uo.svg.symbol=function(){function t(t,r){return(Du.get(e.call(this,t,r))||Ya)(n.call(this,t,r))}var e=Xa,n=Va;return t.type=function(n){return arguments.length?(e=St(n),t):e},t.size=function(e){return arguments.length?(n=St(e),t):n},t};var Du=uo.map({circle:Ya,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*qu)),n=e*qu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ru),n=e*Ru/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ru),n=e*Ru/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});uo.svg.symbolTypes=Du.keys();var Ru=Math.sqrt(3),qu=Math.tan(30*Bo);Ao.transition=function(t){for(var e,n,r=zu||++Fu,i=Ka(t),a=[],o=Gu||{time:Date.now(),ease:Sr,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(e=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&to(n,c,i,r,o),e.push(n)}return Za(a,i,r)},Ao.interrupt=function(t){return this.each(null==t?Uu:$a(Ka(t)))};var zu,Gu,Uu=$a(Ka()),Bu=[],Fu=0;Bu.call=Ao.call,Bu.empty=Ao.empty,Bu.node=Ao.node,Bu.size=Ao.size,uo.transition=function(t,e){return t&&t.transition?zu?t.transition(e):t:uo.selection().transition(t)},uo.transition.prototype=Bu,Bu.select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=T(t);for(var s=-1,u=this.length;++s<u;){o.push(e=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),to(n,c,a,i,r[a][i]),e.push(n)):e.push(null)}return Za(o,a,i)},Bu.selectAll=function(t){var e,n,r,i,a,o=this.id,s=this.namespace,u=[];t=A(t);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],h=-1,d=f.length;++h<d;)if(r=f[h]){a=r[s][o],n=t.call(r,r.__data__,h,l),u.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&to(i,p,s,o,a),e.push(i)}return Za(u,s,o)},Bu.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=U(t));for(var a=0,o=this.length;o>a;a++){i.push(e=[]);for(var n=this[a],s=0,u=n.length;u>s;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return Za(i,this.namespace,this.id)},Bu.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):F(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Bu.attr=function(t,e){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=o(n,t),function(t){this.setAttribute(s,e(t))})})}function a(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=o(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o="transform"==t?Yr:br,s=uo.ns.qualify(t);return Qa(this,"attr."+t,e,s.local?a:i)},Bu.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=uo.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Bu.style=function(t,e,r){function i(){this.style.removeProperty(t)}function a(e){return null==e?i:(e+="",function(){var i,a=n(this).getComputedStyle(this,null).getPropertyValue(t);return a!==e&&(i=br(a,e),function(e){this.style.setProperty(t,i(e),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(r in t)this.style(r,t[r],e);return this}r=""}return Qa(this,"style."+t,e,a)},Bu.styleTween=function(t,e,r){function i(i,a){var o=e.call(this,i,a,n(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Bu.text=function(t){return Qa(this,"text",t,Ja)},Bu.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Bu.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=uo.ease.apply(uo,arguments)),F(this,function(r){r[n][e].ease=t}))},Bu.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:F(this,"function"==typeof t?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))},Bu.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:F(this,"function"==typeof t?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Bu.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Gu,a=zu;try{zu=n,F(this,function(e,i,a){Gu=e[r][n],t.call(e,e.__data__,i,a)})}finally{Gu=i,zu=a}}else F(this,function(i){var a=i[r][n];(a.event||(a.event=uo.dispatch("start","end","interrupt"))).on(t,e)});return this},Bu.transition=function(){for(var t,e,n,r,i=this.id,a=++Fu,o=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(t=[]);for(var e=this[u],c=0,f=e.length;f>c;c++)(n=e[c])&&(r=n[o][i],to(n,c,o,a,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return Za(s,o,a)},uo.svg.axis=function(){function t(t){t.each(function(){var t,l=uo.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),h=null==u?f.ticks?f.ticks.apply(f,s):f.domain():u,d=null==e?f.tickFormat?f.tickFormat.apply(f,s):w:e,p=l.selectAll(".tick").data(h,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Do),m=uo.transition(p.exit()).style("opacity",Do).remove(),v=uo.transition(p.order()).style("opacity",1),y=Math.max(i,0)+o,b=Wi(f),x=l.selectAll(".domain").data([0]),E=(x.enter().append("path").attr("class","domain"),uo.transition(x));g.append("line"),g.append("text");var M,_,k,C,S=g.select("line"),L=v.select("line"),T=p.select("text").text(d),A=g.select("text"),I=v.select("text"),O="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=eo,M="x",k="y",_="x2",C="y2",T.attr("dy",0>O?"0em":".71em").style("text-anchor","middle"),E.attr("d","M"+b[0]+","+O*a+"V0H"+b[1]+"V"+O*a)):(t=no,M="y",k="x",_="y2",C="x2",T.attr("dy",".32em").style("text-anchor",0>O?"end":"start"),E.attr("d","M"+O*a+","+b[0]+"H0V"+b[1]+"H"+O*a)),S.attr(C,O*i),A.attr(k,O*y),L.attr(_,0).attr(C,O*i),I.attr(M,0).attr(k,O*y),f.rangeBand){var j=f,N=j.rangeBand()/2;c=f=function(t){return j(t)+N}}else c.rangeBand?c=f:m.call(t,f,c);g.call(t,c,f),v.call(t,f,f)})}var e,n=uo.scale.linear(),r=Wu,i=6,a=6,o=3,s=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Vu?e+"":Wu,t):r},t.ticks=function(){return arguments.length?(s=co(arguments),t):s},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,a=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(a=+e,t):a},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Wu="bottom",Vu={top:1,right:1,bottom:1,left:1};uo.svg.brush=function(){function t(n){n.each(function(){var n=uo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=n.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=n.selectAll(".resize").data(g,w);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Xu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var u,f=uo.transition(n),h=uo.transition(o);l&&(u=Wi(l),h.attr("x",u[0]).attr("width",u[1]-u[0]),r(f)),c&&(u=Wi(c),h.attr("y",u[0]).attr("height",u[1]-u[0]),i(f)),e(f)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function a(){function a(){32==uo.event.keyCode&&(T||(w=null,I[0]-=f[1],I[1]-=h[1],T=2),k())}function g(){32==uo.event.keyCode&&2==T&&(I[0]+=f[1],I[1]+=h[1],T=0,k())}function m(){var t=uo.mouse(x),n=!1;b&&(t[0]+=b[0],t[1]+=b[1]),T||(uo.event.altKey?(w||(w=[(f[0]+f[1])/2,(h[0]+h[1])/2]),I[0]=f[+(t[0]<w[0])],I[1]=h[+(t[1]<w[1])]):w=null),S&&v(t,l,0)&&(r(_),n=!0),L&&v(t,c,1)&&(i(_),n=!0),n&&(e(_),M({type:"brush",mode:T?"move":"resize"}))}function v(t,e,n){var r,i,a=Wi(e),u=a[0],l=a[1],c=I[n],g=n?h:f,m=g[1]-g[0];return T&&(u-=c,l-=m+c),r=(n?p:d)?Math.max(u,Math.min(l,t[n])):t[n],T?i=(r+=c)+m:(w&&(c=Math.max(u,Math.min(l,2*w[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?s=null:o=null,g[0]=r,g[1]=i,!0):void 0}function y(){m(),_.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),uo.select("body").style("cursor",null),O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),M({type:"brushend"})}var w,b,x=this,E=uo.select(uo.event.target),M=u.of(x,arguments),_=uo.select(x),C=E.datum(),S=!/^(n|s)$/.test(C)&&l,L=!/^(e|w)$/.test(C)&&c,T=E.classed("extent"),A=Z(x),I=uo.mouse(x),O=uo.select(n(x)).on("keydown.brush",a).on("keyup.brush",g);if(uo.event.changedTouches?O.on("touchmove.brush",m).on("touchend.brush",y):O.on("mousemove.brush",m).on("mouseup.brush",y),_.interrupt().selectAll("*").interrupt(),T)I[0]=f[0]-I[0],I[1]=h[0]-I[1];else if(C){var j=+/w$/.test(C),N=+/^n/.test(C);b=[f[1-j]-I[0],h[1-N]-I[1]],I[0]=f[j],I[1]=h[N]}else uo.event.altKey&&(w=I.slice());_.style("pointer-events","none").selectAll(".resize").style("display",null),uo.select("body").style("cursor",E.style("cursor")),M({type:"brushstart"}),m()}var o,s,u=S(t,"brushstart","brush","brushend"),l=null,c=null,f=[0,0],h=[0,0],d=!0,p=!0,g=Yu[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:f,y:h,i:o,j:s},n=this.__chart__||e;this.__chart__=e,zu?uo.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,f=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=xr(f,e.x),r=xr(h,e.y);return o=s=null,function(i){f=e.x=n(i),h=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,g=Yu[!l<<1|!c],t):l},t.y=function(e){return arguments.length?(c=e,g=Yu[!l<<1|!c],t):c},t.clamp=function(e){return arguments.length?(l&&c?(d=!!e[0],p=!!e[1]):l?d=!!e:c&&(p=!!e),t):l&&c?[d,p]:l?d:c?p:null},t.extent=function(e){var n,r,i,a,u;return arguments.length?(l&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),o=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(u=n,n=r,r=u),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=e[0],a=e[1],l&&(i=i[1],a=a[1]),s=[i,a],c.invert&&(i=c(i),a=c(a)),i>a&&(u=i,i=a,a=u),(i!=h[0]||a!=h[1])&&(h=[i,a])),t):(l&&(o?(n=o[0],r=o[1]):(n=f[0],r=f[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(u=n,n=r,r=u))),c&&(s?(i=s[0],a=s[1]):(i=h[0],a=h[1],c.invert&&(i=c.invert(i),a=c.invert(a)),i>a&&(u=i,i=a,a=u))),l&&c?[[n,i],[r,a]]:l?[n,r]:c&&[i,a])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],o=s=null),t},t.empty=function(){return!!l&&f[0]==f[1]||!!c&&h[0]==h[1]},uo.rebind(t,u,"on")};var Xu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Yu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$u=ps.format=bs.timeFormat,Zu=$u.utc,Qu=Zu("%Y-%m-%dT%H:%M:%S.%LZ");$u.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ro:Qu,ro.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ro.toString=Qu.toString,ps.second=Gt(function(t){return new gs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ps.seconds=ps.second.range,ps.seconds.utc=ps.second.utc.range,ps.minute=Gt(function(t){return new gs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ps.minutes=ps.minute.range,ps.minutes.utc=ps.minute.utc.range,ps.hour=Gt(function(t){var e=t.getTimezoneOffset()/60;return new gs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ps.hours=ps.hour.range,ps.hours.utc=ps.hour.utc.range,ps.month=Gt(function(t){return t=ps.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ps.months=ps.month.range,ps.months.utc=ps.month.utc.range;var Ju=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ku=[[ps.second,1],[ps.second,5],[ps.second,15],[ps.second,30],[ps.minute,1],[ps.minute,5],[ps.minute,15],[ps.minute,30],[ps.hour,1],[ps.hour,3],[ps.hour,6],[ps.hour,12],[ps.day,1],[ps.day,2],[ps.week,1],[ps.month,1],[ps.month,3],[ps.year,1]],tl=$u.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Ae]]),el={range:function(t,e,n){return uo.range(Math.ceil(t/n)*n,+e,n).map(ao)},floor:w,ceil:w};Ku.year=ps.year,ps.scale=function(){return io(uo.scale.linear(),Ku,tl)};var nl=Ku.map(function(t){return[t[0].utc,t[1]]}),rl=Zu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Ae]]);nl.year=ps.year.utc,ps.scale.utc=function(){return io(uo.scale.linear(),nl,rl)},uo.text=Lt(function(t){return t.responseText}),uo.json=function(t,e){return Tt(t,"application/json",oo,e)},uo.html=function(t,e){return Tt(t,"text/html",so,e)},uo.xml=Lt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(this.d3=uo):"object"==typeof e&&e.exports?e.exports=uo:this.d3=uo}()},{}],3:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function a(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!a(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),u=1;r>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(o(n)){for(r=arguments.length,a=new Array(r-1),u=1;r>u;u++)a[u-1]=arguments[u];for(l=n.slice(),r=l.length,u=0;r>u;u++)l[u].apply(this,a)}return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-->0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],4:[function(t,e,n){(function(t){(function(){function r(t,e){if(t!==e){var n=null===t,r=t===k,i=t===t,a=null===e,o=e===k,s=e===e;if(t>e&&!a||!i||n&&!o&&s||r&&s)return 1;if(e>t&&!n||!s||a&&!r&&i||o&&i)return-1}return 0}function i(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function a(t,e,n){if(e!==e)return m(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function o(t){return"function"==typeof t||!1}function s(t){return null==t?"":t+""}function u(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function l(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function c(t,e){return r(t.criteria,e.criteria)||t.index-e.index}function f(t,e,n){for(var i=-1,a=t.criteria,o=e.criteria,s=a.length,u=n.length;++i<s;){var l=r(a[i],o[i]);if(l){if(i>=u)return l;var c=n[i];return l*("asc"===c||c===!0?1:-1)}}return t.index-e.index}function h(t){return Ft[t]}function d(t){return Wt[t]}function p(t,e,n){return e?t=Yt[t]:n&&(t=$t[t]),"\\"+t}function g(t){return"\\"+$t[t]}function m(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var a=t[i];if(a!==a)return i}return-1}function v(t){return!!t&&"object"==typeof t}function y(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function w(t,e){for(var n=-1,r=t.length,i=-1,a=[];++n<r;)t[n]===e&&(t[n]=F,a[++i]=n);return a}function b(t,e){for(var n,r=-1,i=t.length,a=-1,o=[];++r<i;){var s=t[r],u=e?e(s,r,t):s;r&&n===u||(n=u,o[++a]=s)}return o}function x(t){for(var e=-1,n=t.length;++e<n&&y(t.charCodeAt(e)););return e}function E(t){for(var e=t.length;e--&&y(t.charCodeAt(e)););return e}function M(t){return Vt[t]}function _(t){function e(t){if(v(t)&&!Ts(t)&&!(t instanceof Q)){if(t instanceof y)return t;if(to.call(t,"__chain__")&&to.call(t,"__wrapped__"))return dr(t)}return new y(t)}function n(){}function y(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function Q(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Lo,this.__views__=[]}function et(){var t=new Q(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function rt(){if(this.__filtered__){var t=new Q(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ft(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ts(t),r=0>e,i=n?t.length:0,a=Vn(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,f=c.length,h=0,d=Mo(u,this.__takeCount__);if(!n||z>i||i==u&&d==u)return nn(r&&n?t.reverse():t,this.__actions__);var p=[];t:for(;u--&&d>h;){l+=e;for(var g=-1,m=t[l];++g<f;){var v=c[g],y=v.iteratee,w=v.type,b=y(m);if(w==U)m=b;else if(!b){if(w==G)continue t;break t}}p[h++]=m}return p}function Wt(){this.__data__={}}function Vt(t){return this.has(t)&&delete this.__data__[t]}function Xt(t){return"__proto__"==t?k:this.__data__[t]}function Yt(t){return"__proto__"!=t&&to.call(this.__data__,t)}function $t(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Zt(t){var e=t?t.length:0;for(this.data={hash:vo(null),set:new co};e--;)this.push(t[e])}function Qt(t,e){var n=t.data,r="string"==typeof e||Ni(e)?n.set.has(e):n.hash[e];return r?0:-1}function Jt(t){var e=this.data;"string"==typeof t||Ni(t)?e.set.add(t):e.hash[t]=!0}function Kt(t,e){for(var n=-1,r=t.length,i=-1,a=e.length,o=za(r+a);++n<r;)o[n]=t[n];for(;++i<a;)o[n++]=e[i];return o}function te(t,e){var n=-1,r=t.length;for(e||(e=za(r));++n<r;)e[n]=t[n];return e}function ee(t,e){
for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ie(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function ae(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function oe(t,e,n,r){for(var i=-1,a=t.length,o=r,s=o;++i<a;){var u=t[i],l=+e(u);n(l,o)&&(o=l,s=u)}return s}function se(t,e){for(var n=-1,r=t.length,i=-1,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[++i]=o)}return a}function ue(t,e){for(var n=-1,r=t.length,i=za(r);++n<r;)i[n]=e(t[n],n,t);return i}function le(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ce(t,e,n,r){var i=-1,a=t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function fe(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function he(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function de(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function pe(t,e){return t===k?e:t}function ge(t,e,n,r){return t!==k&&to.call(r,n)?t:e}function me(t,e,n){for(var r=-1,i=zs(e),a=i.length;++r<a;){var o=i[r],s=t[o],u=n(s,e[o],o,t,e);(u===u?u===s:s!==s)&&(s!==k||o in t)||(t[o]=u)}return t}function ve(t,e){return null==e?t:we(e,zs(e),t)}function ye(t,e){for(var n=-1,r=null==t,i=!r&&Qn(t),a=i?t.length:0,o=e.length,s=za(o);++n<o;){var u=e[n];i?s[n]=Jn(u,a)?t[u]:k:s[n]=r?k:t[u]}return s}function we(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var a=e[r];n[a]=t[a]}return n}function be(t,e,n){var r=typeof t;return"function"==r?e===k?t:on(t,e,n):null==t?Sa:"object"==r?qe(t):e===k?ja(t):ze(t,e)}function xe(t,e,n,r,i,a,o){var s;if(n&&(s=i?n(t,r,i):n(t)),s!==k)return s;if(!Ni(t))return t;var u=Ts(t);if(u){if(s=Xn(t),!e)return te(t,s)}else{var l=no.call(t),c=l==Z;if(l!=K&&l!=W&&(!c||i))return Bt[l]?$n(t,l,e):i?t:{};if(s=Yn(c?{}:t),!e)return ve(s,t)}a||(a=[]),o||(o=[]);for(var f=a.length;f--;)if(a[f]==t)return o[f];return a.push(t),o.push(s),(u?ee:Ie)(t,function(r,i){s[i]=xe(r,e,n,i,t,a,o)}),s}function Ee(t,e,n){if("function"!=typeof t)throw new $a(B);return fo(function(){t.apply(k,n)},e)}function Me(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Bn(),s=o==a,u=s&&e.length>=z?gn(e):null,l=e.length;u&&(o=Qt,s=!1,e=u);t:for(;++i<n;){var c=t[i];if(s&&c===c){for(var f=l;f--;)if(e[f]===c)continue t;r.push(c)}else o(e,c,0)<0&&r.push(c)}return r}function _e(t,e){var n=!0;return Po(t,function(t,r,i){return n=!!e(t,r,i)}),n}function ke(t,e,n,r){var i=r,a=i;return Po(t,function(t,o,s){var u=+e(t,o,s);(n(u,i)||u===r&&u===a)&&(i=u,a=t)}),a}function Ce(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===k||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t}function Se(t,e){var n=[];return Po(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Le(t,e,n,r){var i;return n(t,function(t,n,a){return e(t,n,a)?(i=r?n:t,!1):void 0}),i}function Te(t,e,n,r){r||(r=[]);for(var i=-1,a=t.length;++i<a;){var o=t[i];v(o)&&Qn(o)&&(n||Ts(o)||ki(o))?e?Te(o,e,n,r):le(r,o):n||(r[r.length]=o)}return r}function Ae(t,e){return Ro(t,e,ta)}function Ie(t,e){return Ro(t,e,zs)}function Oe(t,e){return qo(t,e,zs)}function je(t,e){for(var n=-1,r=e.length,i=-1,a=[];++n<r;){var o=e[n];ji(t[o])&&(a[++i]=o)}return a}function Ne(t,e,n){if(null!=t){n!==k&&n in fr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&i>r;)t=t[e[r++]];return r&&r==i?t:k}}function He(t,e,n,r,i,a){return t===e?!0:null==t||null==e||!Ni(t)&&!v(e)?t!==t&&e!==e:Pe(t,e,He,n,r,i,a)}function Pe(t,e,n,r,i,a,o){var s=Ts(t),u=Ts(e),l=V,c=V;s||(l=no.call(t),l==W?l=K:l!=K&&(s=Bi(t))),u||(c=no.call(e),c==W?c=K:c!=K&&(u=Bi(e)));var f=l==K,h=c==K,d=l==c;if(d&&!s&&!f)return qn(t,e,l);if(!i){var p=f&&to.call(t,"__wrapped__"),g=h&&to.call(e,"__wrapped__");if(p||g)return n(p?t.value():t,g?e.value():e,r,i,a,o)}if(!d)return!1;a||(a=[]),o||(o=[]);for(var m=a.length;m--;)if(a[m]==t)return o[m]==e;a.push(t),o.push(e);var v=(s?Rn:zn)(t,e,n,r,i,a,o);return a.pop(),o.pop(),v}function De(t,e,n){var r=e.length,i=r,a=!n;if(null==t)return!i;for(t=fr(t);r--;){var o=e[r];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++r<i;){o=e[r];var s=o[0],u=t[s],l=o[1];if(a&&o[2]){if(u===k&&!(s in t))return!1}else{var c=n?n(u,l,s):k;if(!(c===k?He(l,u,n,!0):c))return!1}}return!0}function Re(t,e){var n=-1,r=Qn(t)?za(t.length):[];return Po(t,function(t,i,a){r[++n]=e(t,i,a)}),r}function qe(t){var e=Fn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==k||n in fr(t))}}return function(t){return De(t,e)}}function ze(t,e){var n=Ts(t),r=tr(t)&&rr(e),i=t+"";return t=hr(t),function(a){if(null==a)return!1;var o=i;if(a=fr(a),(n||!r)&&!(o in a)){if(a=1==t.length?a:Ne(a,Ye(t,0,-1)),null==a)return!1;o=Cr(t),a=fr(a)}return a[o]===e?e!==k||o in a:He(e,a[o],k,!0)}}function Ge(t,e,n,r,i){if(!Ni(t))return t;var a=Qn(e)&&(Ts(e)||Bi(e)),o=a?k:zs(e);return ee(o||e,function(s,u){if(o&&(u=s,s=e[u]),v(s))r||(r=[]),i||(i=[]),Ue(t,e,u,Ge,n,r,i);else{var l=t[u],c=n?n(l,s,u,t,e):k,f=c===k;f&&(c=s),c===k&&(!a||u in t)||!f&&(c===c?c===l:l!==l)||(t[u]=c)}}),t}function Ue(t,e,n,r,i,a,o){for(var s=a.length,u=e[n];s--;)if(a[s]==u)return void(t[n]=o[s]);var l=t[n],c=i?i(l,u,n,t,e):k,f=c===k;f&&(c=u,Qn(u)&&(Ts(u)||Bi(u))?c=Ts(l)?l:Qn(l)?te(l):[]:zi(u)||ki(u)?c=ki(l)?Yi(l):zi(l)?l:{}:f=!1),a.push(u),o.push(c),f?t[n]=r(c,u,i,a,o):(c===c?c!==l:l===l)&&(t[n]=c)}function Be(t){return function(e){return null==e?k:e[t]}}function Fe(t){var e=t+"";return t=hr(t),function(n){return Ne(n,t,e)}}function We(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Jn(r)){var i=r;ho.call(t,r,1)}}return t}function Ve(t,e){return t+yo(Co()*(e-t+1))}function Xe(t,e,n,r,i){return i(t,function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)}),n}function Ye(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n=n===k||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=za(i);++r<i;)a[r]=t[r+e];return a}function $e(t,e){var n;return Po(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Ze(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Qe(t,e,n){var r=Gn(),i=-1;e=ue(e,function(t){return r(t)});var a=Re(t,function(t){var n=ue(e,function(e){return e(t)});return{criteria:n,index:++i,value:t}});return Ze(a,function(t,e){return f(t,e,n)})}function Je(t,e){var n=0;return Po(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Ke(t,e){var n=-1,r=Bn(),i=t.length,o=r==a,s=o&&i>=z,u=s?gn():null,l=[];u?(r=Qt,o=!1):(s=!1,u=e?[]:l);t:for(;++n<i;){var c=t[n],f=e?e(c,n,t):c;if(o&&c===c){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),l.push(c)}else r(u,f,0)<0&&((e||s)&&u.push(f),l.push(c))}return l}function tn(t,e){for(var n=-1,r=e.length,i=za(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?Ye(t,r?0:a,r?a+1:i):Ye(t,r?a+1:0,r?i:a)}function nn(t,e){var n=t;n instanceof Q&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var a=e[r];n=a.func.apply(a.thisArg,le([n],a.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&Io>=i){for(;i>r;){var a=r+i>>>1,o=t[a];(n?e>=o:e>o)&&null!==o?r=a+1:i=a}return i}return an(t,e,Sa,n)}function an(t,e,n,r){e=n(e);for(var i=0,a=t?t.length:0,o=e!==e,s=null===e,u=e===k;a>i;){var l=yo((i+a)/2),c=n(t[l]),f=c!==k,h=c===c;if(o)var d=h||r;else d=s?h&&f&&(r||null!=c):u?h&&(r||f):null==c?!1:r?e>=c:e>c;d?i=l+1:a=l}return Mo(a,Ao)}function on(t,e,n){if("function"!=typeof t)return Sa;if(e===k)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)};case 5:return function(n,r,i,a,o){return t.call(e,n,r,i,a,o)}}return function(){return t.apply(e,arguments)}}function sn(t){var e=new ao(t.byteLength),n=new po(e);return n.set(new po(t)),e}function un(t,e,n){for(var r=n.length,i=-1,a=Eo(t.length-r,0),o=-1,s=e.length,u=za(s+a);++o<s;)u[o]=e[o];for(;++i<r;)u[n[i]]=t[i];for(;a--;)u[o++]=t[i++];return u}function ln(t,e,n){for(var r=-1,i=n.length,a=-1,o=Eo(t.length-i,0),s=-1,u=e.length,l=za(o+u);++a<o;)l[a]=t[a];for(var c=a;++s<u;)l[c+s]=e[s];for(;++r<i;)l[c+n[r]]=t[a++];return l}function cn(t,e){return function(n,r,i){var a=e?e():{};if(r=Gn(r,i,3),Ts(n))for(var o=-1,s=n.length;++o<s;){var u=n[o];t(a,u,r(u,o,n),n)}else Po(n,function(e,n,i){t(a,e,r(e,n,i),i)});return a}}function fn(t){return vi(function(e,n){var r=-1,i=null==e?0:n.length,a=i>2?n[i-2]:k,o=i>2?n[2]:k,s=i>1?n[i-1]:k;for("function"==typeof a?(a=on(a,s,5),i-=2):(a="function"==typeof s?s:k,i-=a?1:0),o&&Kn(n[0],n[1],o)&&(a=3>i?k:a,i=1);++r<i;){var u=n[r];u&&t(e,u,a)}return e})}function hn(t,e){return function(n,r){var i=n?Uo(n):0;if(!nr(i))return t(n,r);for(var a=e?i:-1,o=fr(n);(e?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}function dn(t){return function(e,n,r){for(var i=fr(e),a=r(e),o=a.length,s=t?o:-1;t?s--:++s<o;){var u=a[s];if(n(i[u],u,i)===!1)break}return e}}function pn(t,e){function n(){var i=this&&this!==ne&&this instanceof n?r:t;return i.apply(e,arguments)}var r=vn(t);return n}function gn(t){return vo&&co?new Zt(t):null}function mn(t){return function(e){for(var n=-1,r=_a(ca(e)),i=r.length,a="";++n<i;)a=t(a,r[n],n);return a}}function vn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ho(t.prototype),r=t.apply(n,e);return Ni(r)?r:n}}function yn(t){function e(n,r,i){i&&Kn(n,r,i)&&(r=k);var a=Dn(n,t,k,k,k,k,k,r);return a.placeholder=e.placeholder,a}return e}function wn(t,e){return vi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(k,n))})}function bn(t,e){return function(n,r,i){if(i&&Kn(n,r,i)&&(r=k),r=Gn(r,i,3),1==r.length){n=Ts(n)?n:cr(n);var a=oe(n,r,t,e);if(!n.length||a!==e)return a}return ke(n,r,t,e)}}function xn(t,e){return function(n,r,a){if(r=Gn(r,a,3),Ts(n)){var o=i(n,r,e);return o>-1?n[o]:k}return Le(n,r,t)}}function En(t){return function(e,n,r){return e&&e.length?(n=Gn(n,r,3),i(e,n,t)):-1}}function Mn(t){return function(e,n,r){return n=Gn(n,r,3),Le(e,n,t,!0)}}function _n(t){return function(){for(var e,n=arguments.length,r=t?n:-1,i=0,a=za(n);t?r--:++r<n;){var o=a[i++]=arguments[r];if("function"!=typeof o)throw new $a(B);!e&&y.prototype.thru&&"wrapper"==Un(o)&&(e=new y([],!0))}for(r=e?-1:n;++r<n;){o=a[r];var s=Un(o),u="wrapper"==s?Go(o):k;e=u&&er(u[0])&&u[1]==(N|A|O|H)&&!u[4].length&&1==u[9]?e[Un(u[0])].apply(e,u[3]):1==o.length&&er(o)?e[s]():e.thru(o)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Ts(r)&&r.length>=z)return e.plant(r).value();for(var i=0,o=n?a[i].apply(this,t):r;++i<n;)o=a[i].call(this,o);return o}}}function kn(t,e){return function(n,r,i){return"function"==typeof r&&i===k&&Ts(n)?t(n,r):e(n,on(r,i,3))}}function Cn(t){return function(e,n,r){return("function"!=typeof n||r!==k)&&(n=on(n,r,3)),t(e,n,ta)}}function Sn(t){return function(e,n,r){return("function"!=typeof n||r!==k)&&(n=on(n,r,3)),t(e,n)}}function Ln(t){return function(e,n,r){var i={};return n=Gn(n,r,3),Ie(e,function(e,r,a){var o=n(e,r,a);r=t?o:r,e=t?e:o,i[r]=e}),i}}function Tn(t){return function(e,n,r){return e=s(e),(t?e:"")+jn(e,n,r)+(t?"":e)}}function An(t){var e=vi(function(n,r){var i=w(r,e.placeholder);return Dn(n,t,k,r,i)});return e}function In(t,e){return function(n,r,i,a){var o=arguments.length<3;return"function"==typeof r&&a===k&&Ts(n)?t(n,r,i,o):Xe(n,Gn(r,a,4),i,o,e)}}function On(t,e,n,r,i,a,o,s,u,l){function c(){for(var y=arguments.length,b=y,x=za(y);b--;)x[b]=arguments[b];if(r&&(x=un(x,r,i)),a&&(x=ln(x,a,o)),p||m){var E=c.placeholder,M=w(x,E);if(y-=M.length,l>y){var _=s?te(s):k,C=Eo(l-y,0),T=p?M:k,A=p?k:M,I=p?x:k,N=p?k:x;e|=p?O:j,e&=~(p?j:O),g||(e&=~(S|L));var H=[t,e,n,I,T,N,A,_,u,C],P=On.apply(k,H);return er(t)&&Bo(P,H),P.placeholder=E,P}}var D=h?n:this,R=d?D[t]:t;return s&&(x=ur(x,s)),f&&u<x.length&&(x.length=u),this&&this!==ne&&this instanceof c&&(R=v||vn(t)),R.apply(D,x)}var f=e&N,h=e&S,d=e&L,p=e&A,g=e&T,m=e&I,v=d?k:vn(t);return c}function jn(t,e,n){var r=t.length;if(e=+e,r>=e||!bo(e))return"";var i=e-r;return n=null==n?" ":n+"",ma(n,mo(i/n.length)).slice(0,i)}function Nn(t,e,n,r){function i(){for(var e=-1,s=arguments.length,u=-1,l=r.length,c=za(l+s);++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++e];var f=this&&this!==ne&&this instanceof i?o:t;return f.apply(a?n:this,c)}var a=e&S,o=vn(t);return i}function Hn(t){var e=Fa[t];return function(t,n){return n=n===k?0:+n||0,n?(n=uo(10,n),e(t*n)/n):e(t)}}function Pn(t){return function(e,n,r,i){var a=Gn(r);return null==r&&a===be?rn(e,n,t):an(e,n,a(r,i,1),t)}}function Dn(t,e,n,r,i,a,o,s){var u=e&L;if(!u&&"function"!=typeof t)throw new $a(B);var l=r?r.length:0;if(l||(e&=~(O|j),r=i=k),l-=i?i.length:0,e&j){var c=r,f=i;r=i=k}var h=u?k:Go(t),d=[t,e,n,r,i,c,f,a,o,s];if(h&&(ir(d,h),e=d[1],s=d[9]),d[9]=null==s?u?0:t.length:Eo(s-l,0)||0,e==S)var p=pn(d[0],d[2]);else p=e!=O&&e!=(S|O)||d[4].length?On.apply(k,d):Nn.apply(k,d);var g=h?zo:Bo;return g(p,d)}function Rn(t,e,n,r,i,a,o){var s=-1,u=t.length,l=e.length;if(u!=l&&!(i&&l>u))return!1;for(;++s<u;){var c=t[s],f=e[s],h=r?r(i?f:c,i?c:f,s):k;if(h!==k){if(h)continue;return!1}if(i){if(!he(e,function(t){return c===t||n(c,t,r,i,a,o)}))return!1}else if(c!==f&&!n(c,f,r,i,a,o))return!1}return!0}function qn(t,e,n){switch(n){case X:case Y:return+t==+e;case $:return t.name==e.name&&t.message==e.message;case J:return t!=+t?e!=+e:t==+e;case tt:case nt:return t==e+""}return!1}function zn(t,e,n,r,i,a,o){var s=zs(t),u=s.length,l=zs(e),c=l.length;if(u!=c&&!i)return!1;for(var f=u;f--;){var h=s[f];if(!(i?h in e:to.call(e,h)))return!1}for(var d=i;++f<u;){h=s[f];var p=t[h],g=e[h],m=r?r(i?g:p,i?p:g,h):k;if(!(m===k?n(p,g,r,i,a,o):m))return!1;d||(d="constructor"==h)}if(!d){var v=t.constructor,y=e.constructor;if(v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0}function Gn(t,n,r){var i=e.callback||ka;return i=i===ka?be:i,r?i(t,n,r):i}function Un(t){for(var e=t.name,n=No[e],r=n?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function Bn(t,n,r){var i=e.indexOf||_r;return i=i===_r?a:i,t?i(t,n,r):i}function Fn(t){for(var e=ea(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function Wn(t,e){var n=null==t?k:t[e];return Di(n)?n:k}function Vn(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Mo(e,t+o);break;case"takeRight":t=Eo(t,e-o)}}return{start:t,end:e}}function Xn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&to.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Yn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Va),new e}function $n(t,e,n){var r=t.constructor;switch(e){case it:return sn(t);case X:case Y:return new r(+t);case at:case ot:case st:case ut:case lt:case ct:case ft:case ht:case dt:var i=t.buffer;return new r(n?sn(i):i,t.byteOffset,t.length);case J:case nt:return new r(t);case tt:var a=new r(t.source,Ot.exec(t));a.lastIndex=t.lastIndex}return a}function Zn(t,e,n){null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Ne(t,Ye(e,0,-1)),e=Cr(e));var r=null==t?t:t[e];return null==r?k:r.apply(t,n)}function Qn(t){return null!=t&&nr(Uo(t))}function Jn(t,e){return t="number"==typeof t||Ht.test(t)?+t:-1,e=null==e?Oo:e,t>-1&&t%1==0&&e>t}function Kn(t,e,n){if(!Ni(n))return!1;var r=typeof e;if("number"==r?Qn(n)&&Jn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;if("string"==n&&kt.test(t)||"number"==n)return!0;if(Ts(t))return!1;var r=!_t.test(t);return r||null!=e&&t in fr(e)}function er(t){var n=Un(t);if(!(n in Q.prototype))return!1;var r=e[n];if(t===r)return!0;var i=Go(r);return!!i&&t===i[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&Oo>=t}function rr(t){return t===t&&!Ni(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,a=N>i,o=r==N&&n==A||r==N&&n==H&&t[7].length<=e[8]||r==(N|H)&&n==A;if(!a&&!o)return t;r&S&&(t[2]=e[2],i|=n&S?0:T);var s=e[3];if(s){var u=t[3];t[3]=u?un(u,s,e[4]):te(s),t[4]=u?w(t[3],F):te(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?ln(u,s,e[6]):te(s),t[6]=u?w(t[5],F):te(e[6])),s=e[7],s&&(t[7]=te(s)),r&N&&(t[8]=null==t[8]?e[8]:Mo(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function ar(t,e){return t===k?e:As(t,e,ar)}function or(t,e){t=fr(t);for(var n=-1,r=e.length,i={};++n<r;){var a=e[n];a in t&&(i[a]=t[a])}return i}function sr(t,e){var n={};return Ae(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function ur(t,e){for(var n=t.length,r=Mo(e.length,n),i=te(t);r--;){var a=e[r];t[r]=Jn(a,n)?i[a]:k}return t}function lr(t){for(var e=ta(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(Ts(t)||ki(t)),a=-1,o=[];++a<n;){var s=e[a];(i&&Jn(s,r)||to.call(t,s))&&o.push(s)}return o}function cr(t){return null==t?[]:Qn(t)?Ni(t)?t:Va(t):aa(t)}function fr(t){return Ni(t)?t:Va(t)}function hr(t){if(Ts(t))return t;var e=[];return s(t).replace(Ct,function(t,n,r,i){e.push(r?i.replace(At,"$1"):n||t)}),e}function dr(t){return t instanceof Q?t.clone():new y(t.__wrapped__,t.__chain__,te(t.__actions__))}function pr(t,e,n){e=(n?Kn(t,e,n):null==e)?1:Eo(yo(e)||1,1);for(var r=0,i=t?t.length:0,a=-1,o=za(mo(i/e));i>r;)o[++a]=Ye(t,r,r+=e);return o}function gr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var a=t[e];a&&(i[++r]=a)}return i}function mr(t,e,n){var r=t?t.length:0;return r?((n?Kn(t,e,n):null==e)&&(e=1),Ye(t,0>e?0:e)):[]}function vr(t,e,n){var r=t?t.length:0;return r?((n?Kn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Ye(t,0,0>e?0:e)):[]}function yr(t,e,n){return t&&t.length?en(t,Gn(e,n,3),!0,!0):[]}function wr(t,e,n){return t&&t.length?en(t,Gn(e,n,3),!0):[]}function br(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Kn(t,e,n)&&(n=0,r=i),Ce(t,e,n,r)):[]}function xr(t){return t?t[0]:k}function Er(t,e,n){var r=t?t.length:0;return n&&Kn(t,e,n)&&(e=!1),r?Te(t,e):[]}function Mr(t){var e=t?t.length:0;return e?Te(t,!0):[]}function _r(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?Eo(r+n,0):n;else if(n){var i=rn(t,e);return r>i&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return a(t,e,n||0)}function kr(t){return vr(t,1)}function Cr(t){var e=t?t.length:0;return e?t[e-1]:k}function Sr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?Eo(r+n,0):Mo(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var a=t[i];return(e===e?e===a:a!==a)?i:-1}if(e!==e)return m(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Lr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Bn(),i=t.length;++n<i;)for(var a=0,o=t[n];(a=r(e,o,a))>-1;)ho.call(e,a,1);return e}function Tr(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,a=[],o=t.length;for(e=Gn(e,n,3);++i<o;){var s=t[i];e(s,i,t)&&(r.push(s),a.push(i))}return We(t,a),r}function Ar(t){return mr(t,1)}function Ir(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Kn(t,e,n)&&(e=0,n=r),Ye(t,e,n)):[]}function Or(t,e,n){var r=t?t.length:0;return r?((n?Kn(t,e,n):null==e)&&(e=1),Ye(t,0,0>e?0:e)):[]}function jr(t,e,n){var r=t?t.length:0;return r?((n?Kn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Ye(t,0>e?0:e)):[]}function Nr(t,e,n){return t&&t.length?en(t,Gn(e,n,3),!1,!0):[]}function Hr(t,e,n){return t&&t.length?en(t,Gn(e,n,3)):[]}function Pr(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Kn(t,e,r)?k:e,e=!1);var o=Gn();return(null!=n||o!==be)&&(n=o(n,r,3)),e&&Bn()==a?b(t,n):Ke(t,n)}function Dr(t){if(!t||!t.length)return[];var e=-1,n=0;t=se(t,function(t){return Qn(t)?(n=Eo(t.length,n),!0):void 0});for(var r=za(n);++e<n;)r[e]=ue(t,Be(e));return r}function Rr(t,e,n){var r=t?t.length:0;if(!r)return[];var i=Dr(t);return null==e?i:(e=on(e,n,4),ue(i,function(t){return ce(t,e,k,!0)}))}function qr(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Qn(n))var r=r?le(Me(r,n),Me(n,r)):n}return r?Ke(r):[]}function zr(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Ts(t[0])||(e=[]);++n<r;){var a=t[n];e?i[a]=e[n]:a&&(i[a[0]]=a[1])}return i}function Gr(t){var n=e(t);return n.__chain__=!0,n}function Ur(t,e,n){return e.call(n,t),t}function Br(t,e,n){return e.call(n,t)}function Fr(){return Gr(this)}function Wr(){return new y(this.value(),this.__chain__)}function Vr(t){for(var e,r=this;r instanceof n;){var i=dr(r);e?a.__wrapped__=i:e=i;var a=i;r=r.__wrapped__}return a.__wrapped__=t,e}function Xr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof Q){var n=t;return this.__actions__.length&&(n=new Q(this)),n=n.reverse(),n.__actions__.push({func:Br,args:[e],thisArg:k}),new y(n,this.__chain__)}return this.thru(e)}function Yr(){return this.value()+""}function $r(){return nn(this.__wrapped__,this.__actions__)}function Zr(t,e,n){var r=Ts(t)?ae:_e;return n&&Kn(t,e,n)&&(e=k),("function"!=typeof e||n!==k)&&(e=Gn(e,n,3)),r(t,e)}function Qr(t,e,n){var r=Ts(t)?se:Se;return e=Gn(e,n,3),r(t,e)}function Jr(t,e){return is(t,qe(e))}function Kr(t,e,n,r){var i=t?Uo(t):0;return nr(i)||(t=aa(t),i=t.length),n="number"!=typeof n||r&&Kn(e,n,r)?0:0>n?Eo(i+n,0):n||0,"string"==typeof t||!Ts(t)&&Ui(t)?i>=n&&t.indexOf(e,n)>-1:!!i&&Bn(t,e,n)>-1}function ti(t,e,n){var r=Ts(t)?ue:Re;return e=Gn(e,n,3),r(t,e)}function ei(t,e){return ti(t,ja(e))}function ni(t,e,n){var r=Ts(t)?se:Se;return e=Gn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?Kn(t,e,n):null==e){t=cr(t);var r=t.length;return r>0?t[Ve(0,r-1)]:k}var i=-1,a=Xi(t),r=a.length,o=r-1;for(e=Mo(0>e?0:+e||0,r);++i<e;){var s=Ve(i,o),u=a[s];a[s]=a[i],a[i]=u}return a.length=e,a}function ii(t){return ri(t,Lo)}function ai(t){var e=t?Uo(t):0;return nr(e)?e:zs(t).length}function oi(t,e,n){var r=Ts(t)?he:$e;return n&&Kn(t,e,n)&&(e=k),("function"!=typeof e||n!==k)&&(e=Gn(e,n,3)),r(t,e)}function si(t,e,n){if(null==t)return[];n&&Kn(t,e,n)&&(e=k);var r=-1;e=Gn(e,n,3);var i=Re(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}});return Ze(i,c)}function ui(t,e,n,r){return null==t?[]:(r&&Kn(e,n,r)&&(n=k),Ts(e)||(e=null==e?[]:[e]),Ts(n)||(n=null==n?[]:[n]),Qe(t,e,n))}function li(t,e){return Qr(t,qe(e))}function ci(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new $a(B);var n=t;t=e,e=n}return t=bo(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function fi(t,e,n){return n&&Kn(t,e,n)&&(e=k),e=t&&null==e?t.length:Eo(+e||0,0),Dn(t,N,k,k,k,k,e)}function hi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new $a(B);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=k),n}}function di(t,e,n){function r(){d&&oo(d),l&&oo(l),g=0,l=d=p=k}function i(e,n){n&&oo(n),l=d=p=k,e&&(g=gs(),c=t.apply(h,u),d||l||(u=h=k))}function a(){var t=e-(gs()-f);0>=t||t>e?i(p,l):d=fo(a,t)}function o(){i(v,d)}function s(){if(u=arguments,f=gs(),h=this,p=v&&(d||!y),m===!1)var n=y&&!d;else{l||y||(g=f);var r=m-(f-g),i=0>=r||r>m;i?(l&&(l=oo(l)),g=f,c=t.apply(h,u)):l||(l=fo(o,r))}return i&&d?d=oo(d):d||e===m||(d=fo(a,e)),n&&(i=!0,c=t.apply(h,u)),!i||d||l||(u=h=k),c}var u,l,c,f,h,d,p,g=0,m=!1,v=!0;if("function"!=typeof t)throw new $a(B);if(e=0>e?0:+e||0,n===!0){var y=!0;v=!1}else Ni(n)&&(y=!!n.leading,m="maxWait"in n&&Eo(+n.maxWait||0,e),v="trailing"in n?!!n.trailing:v);return s.cancel=r,s}function pi(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new $a(B);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o),o};return n.cache=new pi.Cache,n}function gi(t){if("function"!=typeof t)throw new $a(B);return function(){return!t.apply(this,arguments)}}function mi(t){return hi(2,t)}function vi(t,e){if("function"!=typeof t)throw new $a(B);return e=Eo(e===k?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=Eo(n.length-e,0),a=za(i);++r<i;)a[r]=n[e+r];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var o=za(e+1);for(r=-1;++r<e;)o[r]=n[r];return o[e]=a,t.apply(this,o)}}function yi(t){if("function"!=typeof t)throw new $a(B);return function(e){return t.apply(this,e)}}function wi(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new $a(B);return n===!1?r=!1:Ni(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),di(t,e,{leading:r,maxWait:+e,trailing:i})}function bi(t,e){return e=null==e?Sa:e,Dn(e,O,k,[t],[])}function xi(t,e,n,r){return e&&"boolean"!=typeof e&&Kn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?xe(t,e,on(n,r,1)):xe(t,e)}function Ei(t,e,n){return"function"==typeof e?xe(t,!0,on(e,n,1)):xe(t,!0)}function Mi(t,e){return t>e}function _i(t,e){return t>=e}function ki(t){return v(t)&&Qn(t)&&to.call(t,"callee")&&!lo.call(t,"callee")}function Ci(t){return t===!0||t===!1||v(t)&&no.call(t)==X}function Si(t){return v(t)&&no.call(t)==Y}function Li(t){return!!t&&1===t.nodeType&&v(t)&&!zi(t)}function Ti(t){return null==t?!0:Qn(t)&&(Ts(t)||Ui(t)||ki(t)||v(t)&&ji(t.splice))?!t.length:!zs(t).length}function Ai(t,e,n,r){n="function"==typeof n?on(n,r,3):k;var i=n?n(t,e):k;return i===k?He(t,e,n):!!i}function Ii(t){return v(t)&&"string"==typeof t.message&&no.call(t)==$}function Oi(t){return"number"==typeof t&&bo(t)}function ji(t){return Ni(t)&&no.call(t)==Z}function Ni(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Hi(t,e,n,r){return n="function"==typeof n?on(n,r,3):k,De(t,Fn(e),n)}function Pi(t){return qi(t)&&t!=+t}function Di(t){return null==t?!1:ji(t)?io.test(Ka.call(t)):v(t)&&Nt.test(t)}function Ri(t){return null===t}function qi(t){return"number"==typeof t||v(t)&&no.call(t)==J}function zi(t){var e;if(!v(t)||no.call(t)!=K||ki(t)||!to.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return Ae(t,function(t,e){n=e}),n===k||to.call(t,n)}function Gi(t){return Ni(t)&&no.call(t)==tt}function Ui(t){return"string"==typeof t||v(t)&&no.call(t)==nt}function Bi(t){return v(t)&&nr(t.length)&&!!Ut[no.call(t)]}function Fi(t){return t===k}function Wi(t,e){return e>t}function Vi(t,e){return e>=t}function Xi(t){var e=t?Uo(t):0;return nr(e)?e?te(t):[]:aa(t)}function Yi(t){return we(t,ta(t))}function $i(t,e,n){var r=Ho(t);return n&&Kn(t,e,n)&&(e=k),e?ve(r,e):r}function Zi(t){return je(t,ta(t))}function Qi(t,e,n){var r=null==t?k:Ne(t,hr(e),e+"");return r===k?n:r}function Ji(t,e){if(null==t)return!1;var n=to.call(t,e);if(!n&&!tr(e)){if(e=hr(e),t=1==e.length?t:Ne(t,Ye(e,0,-1)),null==t)return!1;e=Cr(e),n=to.call(t,e)}return n||nr(t.length)&&Jn(e,t.length)&&(Ts(t)||ki(t))}function Ki(t,e,n){n&&Kn(t,e,n)&&(e=k);for(var r=-1,i=zs(t),a=i.length,o={};++r<a;){var s=i[r],u=t[s];e?to.call(o,u)?o[u].push(s):o[u]=[s]:o[u]=s}return o}function ta(t){if(null==t)return[];Ni(t)||(t=Va(t));var e=t.length;e=e&&nr(e)&&(Ts(t)||ki(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,a=za(e),o=e>0;++r<e;)a[r]=r+"";for(var s in t)o&&Jn(s,e)||"constructor"==s&&(i||!to.call(t,s))||a.push(s);return a}function ea(t){t=fr(t);for(var e=-1,n=zs(t),r=n.length,i=za(r);++e<r;){var a=n[e];i[e]=[a,t[a]]}return i}function na(t,e,n){var r=null==t?k:t[e];return r===k&&(null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Ne(t,Ye(e,0,-1)),r=null==t?k:t[Cr(e)]),r=r===k?n:r),ji(r)?r.call(t):r}function ra(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:hr(e);for(var i=-1,a=e.length,o=a-1,s=t;null!=s&&++i<a;){var u=e[i];Ni(s)&&(i==o?s[u]=n:null==s[u]&&(s[u]=Jn(e[i+1])?[]:{})),s=s[u]}return t}function ia(t,e,n,r){var i=Ts(t)||Bi(t);if(e=Gn(e,r,4),null==n)if(i||Ni(t)){var a=t.constructor;n=i?Ts(t)?new a:[]:Ho(ji(a)?a.prototype:k)}else n={};return(i?ee:Ie)(t,function(t,r,i){return e(n,t,r,i)}),n}function aa(t){return tn(t,zs(t))}function oa(t){return tn(t,ta(t))}function sa(t,e,n){return e=+e||0,n===k?(n=e,e=0):n=+n||0,t>=Mo(e,n)&&t<Eo(e,n)}function ua(t,e,n){n&&Kn(t,e,n)&&(e=n=k);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=Co();return Mo(t+a*(e-t+so("1e-"+((a+"").length-1))),e)}return Ve(t,e)}function la(t){return t=s(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function ca(t){return t=s(t),t&&t.replace(Pt,h).replace(Tt,"")}function fa(t,e,n){t=s(t),e+="";var r=t.length;return n=n===k?r:Mo(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function ha(t){return t=s(t),t&&bt.test(t)?t.replace(yt,d):t}function da(t){return t=s(t),t&&Lt.test(t)?t.replace(St,p):t||"(?:)"}function pa(t,e,n){t=s(t),e=+e;var r=t.length;if(r>=e||!bo(e))return t;var i=(e-r)/2,a=yo(i),o=mo(i);return n=jn("",o,n),n.slice(0,a)+t+n}function ga(t,e,n){return(n?Kn(t,e,n):null==e)?e=0:e&&(e=+e),t=wa(t),ko(t,e||(jt.test(t)?16:10))}function ma(t,e){var n="";if(t=s(t),e=+e,1>e||!t||!bo(e))return n;do e%2&&(n+=t),e=yo(e/2),t+=t;while(e);return n}function va(t,e,n){return t=s(t),n=null==n?0:Mo(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function ya(t,n,r){var i=e.templateSettings;r&&Kn(t,n,r)&&(n=r=k),t=s(t),n=me(ve({},r||n),i,ge);var a,o,u=me(ve({},n.imports),i.imports,ge),l=zs(u),c=tn(u,l),f=0,h=n.interpolate||Dt,d="__p += '",p=Xa((n.escape||Dt).source+"|"+h.source+"|"+(h===Mt?It:Dt).source+"|"+(n.evaluate||Dt).source+"|$","g"),m="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Gt+"]")+"\n";t.replace(p,function(e,n,r,i,s,u){return r||(r=i),d+=t.slice(f,u).replace(Rt,g),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),d+="';\n";var v=n.variable;v||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(pt,""):d).replace(gt,"$1").replace(mt,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Qs(function(){return Ba(l,m+"return "+d).apply(k,c)});if(y.source=d,Ii(y))throw y;return y}function wa(t,e,n){var r=t;return(t=s(t))?(n?Kn(r,e,n):null==e)?t.slice(x(t),E(t)+1):(e+="",t.slice(u(t,e),l(t,e)+1)):t}function ba(t,e,n){var r=t;return t=s(t),t?(n?Kn(r,e,n):null==e)?t.slice(x(t)):t.slice(u(t,e+"")):t}function xa(t,e,n){var r=t;return t=s(t),t?(n?Kn(r,e,n):null==e)?t.slice(0,E(t)+1):t.slice(0,l(t,e+"")+1):t}function Ea(t,e,n){n&&Kn(t,e,n)&&(e=k);var r=P,i=D;if(null!=e)if(Ni(e)){var a="separator"in e?e.separator:a;r="length"in e?+e.length||0:r,i="omission"in e?s(e.omission):i}else r=+e||0;if(t=s(t),r>=t.length)return t;var o=r-i.length;if(1>o)return i;var u=t.slice(0,o);if(null==a)return u+i;if(Gi(a)){if(t.slice(o).search(a)){var l,c,f=t.slice(0,o);for(a.global||(a=Xa(a.source,(Ot.exec(a)||"")+"g")),a.lastIndex=0;l=a.exec(f);)c=l.index;u=u.slice(0,null==c?o:c)}}else if(t.indexOf(a,o)!=o){var h=u.lastIndexOf(a);h>-1&&(u=u.slice(0,h))}return u+i}function Ma(t){return t=s(t),t&&wt.test(t)?t.replace(vt,M):t}function _a(t,e,n){return n&&Kn(t,e,n)&&(e=k),t=s(t),t.match(e||qt)||[]}function ka(t,e,n){return n&&Kn(t,e,n)&&(e=k),v(t)?La(t):be(t,e)}function Ca(t){return function(){return t}}function Sa(t){return t}function La(t){return qe(xe(t,!0))}function Ta(t,e){return ze(t,xe(e,!0))}function Aa(t,e,n){if(null==n){var r=Ni(e),i=r?zs(e):k,a=i&&i.length?je(e,i):k;(a?a.length:r)||(a=!1,n=e,e=t,t=this)}a||(a=je(e,zs(e)));var o=!0,s=-1,u=ji(t),l=a.length;n===!1?o=!1:Ni(n)&&"chain"in n&&(o=n.chain);for(;++s<l;){var c=a[s],f=e[c];t[c]=f,u&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(o||n){var r=t(this.__wrapped__),i=r.__actions__=te(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,le([this.value()],arguments))}}(f))}return t}function Ia(){return ne._=ro,this}function Oa(){}function ja(t){return tr(t)?Be(t):Fe(t)}function Na(t){return function(e){return Ne(t,hr(e),e+"")}}function Ha(t,e,n){n&&Kn(t,e,n)&&(e=n=k),t=+t||0,
n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=Eo(mo((e-t)/(n||1)),0),a=za(i);++r<i;)a[r]=t,t+=n;return a}function Pa(t,e,n){if(t=yo(t),1>t||!bo(t))return[];var r=-1,i=za(Mo(t,To));for(e=on(e,n,1);++r<t;)To>r?i[r]=e(r):e(r);return i}function Da(t){var e=++eo;return s(t)+e}function Ra(t,e){return(+t||0)+(+e||0)}function qa(t,e,n){return n&&Kn(t,e,n)&&(e=k),e=Gn(e,n,3),1==e.length?de(Ts(t)?t:cr(t),e):Je(t,e)}t=t?re.defaults(ne.Object(),t,re.pick(ne,zt)):ne;var za=t.Array,Ga=t.Date,Ua=t.Error,Ba=t.Function,Fa=t.Math,Wa=t.Number,Va=t.Object,Xa=t.RegExp,Ya=t.String,$a=t.TypeError,Za=za.prototype,Qa=Va.prototype,Ja=Ya.prototype,Ka=Ba.prototype.toString,to=Qa.hasOwnProperty,eo=0,no=Qa.toString,ro=ne._,io=Xa("^"+Ka.call(to).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ao=t.ArrayBuffer,oo=t.clearTimeout,so=t.parseFloat,uo=Fa.pow,lo=Qa.propertyIsEnumerable,co=Wn(t,"Set"),fo=t.setTimeout,ho=Za.splice,po=t.Uint8Array,go=Wn(t,"WeakMap"),mo=Fa.ceil,vo=Wn(Va,"create"),yo=Fa.floor,wo=Wn(za,"isArray"),bo=t.isFinite,xo=Wn(Va,"keys"),Eo=Fa.max,Mo=Fa.min,_o=Wn(Ga,"now"),ko=t.parseInt,Co=Fa.random,So=Wa.NEGATIVE_INFINITY,Lo=Wa.POSITIVE_INFINITY,To=4294967295,Ao=To-1,Io=To>>>1,Oo=9007199254740991,jo=go&&new go,No={};e.support={};e.templateSettings={escape:xt,evaluate:Et,interpolate:Mt,variable:"",imports:{_:e}};var Ho=function(){function t(){}return function(e){if(Ni(e)){t.prototype=e;var n=new t;t.prototype=k}return n||{}}}(),Po=hn(Ie),Do=hn(Oe,!0),Ro=dn(),qo=dn(!0),zo=jo?function(t,e){return jo.set(t,e),t}:Sa,Go=jo?function(t){return jo.get(t)}:Oa,Uo=Be("length"),Bo=function(){var t=0,e=0;return function(n,r){var i=gs(),a=q-(i-e);if(e=i,a>0){if(++t>=R)return n}else t=0;return zo(n,r)}}(),Fo=vi(function(t,e){return v(t)&&Qn(t)?Me(t,Te(e,!1,!0)):[]}),Wo=En(),Vo=En(!0),Xo=vi(function(t){for(var e=t.length,n=e,r=za(f),i=Bn(),o=i==a,s=[];n--;){var u=t[n]=Qn(u=t[n])?u:[];r[n]=o&&u.length>=120?gn(n&&u):null}var l=t[0],c=-1,f=l?l.length:0,h=r[0];t:for(;++c<f;)if(u=l[c],(h?Qt(h,u):i(s,u,0))<0){for(var n=e;--n;){var d=r[n];if((d?Qt(d,u):i(t[n],u,0))<0)continue t}h&&h.push(u),s.push(u)}return s}),Yo=vi(function(t,e){e=Te(e);var n=ye(t,e);return We(t,e.sort(r)),n}),$o=Pn(),Zo=Pn(!0),Qo=vi(function(t){return Ke(Te(t,!1,!0))}),Jo=vi(function(t,e){return Qn(t)?Me(t,e):[]}),Ko=vi(Dr),ts=vi(function(t){var e=t.length,n=e>2?t[e-2]:k,r=e>1?t[e-1]:k;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):k,r=k),t.length=e,Rr(t,n,r)}),es=vi(function(t){return t=Te(t),this.thru(function(e){return Kt(Ts(e)?e:[fr(e)],t)})}),ns=vi(function(t,e){return ye(t,Te(e))}),rs=cn(function(t,e,n){to.call(t,n)?++t[n]:t[n]=1}),is=xn(Po),as=xn(Do,!0),os=kn(ee,Po),ss=kn(ie,Do),us=cn(function(t,e,n){to.call(t,n)?t[n].push(e):t[n]=[e]}),ls=cn(function(t,e,n){t[n]=e}),cs=vi(function(t,e,n){var r=-1,i="function"==typeof e,a=tr(e),o=Qn(t)?za(t.length):[];return Po(t,function(t){var s=i?e:a&&null!=t?t[e]:k;o[++r]=s?s.apply(t,n):Zn(t,e,n)}),o}),fs=cn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),hs=In(ce,Po),ds=In(fe,Do),ps=vi(function(t,e){if(null==t)return[];var n=e[2];return n&&Kn(e[0],e[1],n)&&(e.length=1),Qe(t,Te(e),[])}),gs=_o||function(){return(new Ga).getTime()},ms=vi(function(t,e,n){var r=S;if(n.length){var i=w(n,ms.placeholder);r|=O}return Dn(t,r,e,n,i)}),vs=vi(function(t,e){e=e.length?Te(e):Zi(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Dn(t[i],S,t)}return t}),ys=vi(function(t,e,n){var r=S|L;if(n.length){var i=w(n,ys.placeholder);r|=O}return Dn(e,r,t,n,i)}),ws=yn(A),bs=yn(I),xs=vi(function(t,e){return Ee(t,1,e)}),Es=vi(function(t,e,n){return Ee(t,e,n)}),Ms=_n(),_s=_n(!0),ks=vi(function(t,e){if(e=Te(e),"function"!=typeof t||!ae(e,o))throw new $a(B);var n=e.length;return vi(function(r){for(var i=Mo(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Cs=An(O),Ss=An(j),Ls=vi(function(t,e){return Dn(t,H,k,k,k,Te(e))}),Ts=wo||function(t){return v(t)&&nr(t.length)&&no.call(t)==V},As=fn(Ge),Is=fn(function(t,e,n){return n?me(t,e,n):ve(t,e)}),Os=wn(Is,pe),js=wn(As,ar),Ns=Mn(Ie),Hs=Mn(Oe),Ps=Cn(Ro),Ds=Cn(qo),Rs=Sn(Ie),qs=Sn(Oe),zs=xo?function(t){var e=null==t?k:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Qn(t)?lr(t):Ni(t)?xo(t):[]}:lr,Gs=Ln(!0),Us=Ln(),Bs=vi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Te(e),Ya);return or(t,Me(ta(t),e))}var n=on(e[0],e[1],3);return sr(t,function(t,e,r){return!n(t,e,r)})}),Fs=vi(function(t,e){return null==t?{}:"function"==typeof e[0]?sr(t,on(e[0],e[1],3)):or(t,Te(e))}),Ws=mn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Vs=mn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Xs=Tn(),Ys=Tn(!0),$s=mn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Zs=mn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Qs=vi(function(t,e){try{return t.apply(k,e)}catch(n){return Ii(n)?n:new Ua(n)}}),Js=vi(function(t,e){return function(n){return Zn(n,t,e)}}),Ks=vi(function(t,e){return function(n){return Zn(t,n,e)}}),tu=Hn("ceil"),eu=Hn("floor"),nu=bn(Mi,So),ru=bn(Wi,Lo),iu=Hn("round");return e.prototype=n.prototype,y.prototype=Ho(n.prototype),y.prototype.constructor=y,Q.prototype=Ho(n.prototype),Q.prototype.constructor=Q,Wt.prototype["delete"]=Vt,Wt.prototype.get=Xt,Wt.prototype.has=Yt,Wt.prototype.set=$t,Zt.prototype.push=Jt,pi.Cache=Wt,e.after=ci,e.ary=fi,e.assign=Is,e.at=ns,e.before=hi,e.bind=ms,e.bindAll=vs,e.bindKey=ys,e.callback=ka,e.chain=Gr,e.chunk=pr,e.compact=gr,e.constant=Ca,e.countBy=rs,e.create=$i,e.curry=ws,e.curryRight=bs,e.debounce=di,e.defaults=Os,e.defaultsDeep=js,e.defer=xs,e.delay=Es,e.difference=Fo,e.drop=mr,e.dropRight=vr,e.dropRightWhile=yr,e.dropWhile=wr,e.fill=br,e.filter=Qr,e.flatten=Er,e.flattenDeep=Mr,e.flow=Ms,e.flowRight=_s,e.forEach=os,e.forEachRight=ss,e.forIn=Ps,e.forInRight=Ds,e.forOwn=Rs,e.forOwnRight=qs,e.functions=Zi,e.groupBy=us,e.indexBy=ls,e.initial=kr,e.intersection=Xo,e.invert=Ki,e.invoke=cs,e.keys=zs,e.keysIn=ta,e.map=ti,e.mapKeys=Gs,e.mapValues=Us,e.matches=La,e.matchesProperty=Ta,e.memoize=pi,e.merge=As,e.method=Js,e.methodOf=Ks,e.mixin=Aa,e.modArgs=ks,e.negate=gi,e.omit=Bs,e.once=mi,e.pairs=ea,e.partial=Cs,e.partialRight=Ss,e.partition=fs,e.pick=Fs,e.pluck=ei,e.property=ja,e.propertyOf=Na,e.pull=Lr,e.pullAt=Yo,e.range=Ha,e.rearg=Ls,e.reject=ni,e.remove=Tr,e.rest=Ar,e.restParam=vi,e.set=ra,e.shuffle=ii,e.slice=Ir,e.sortBy=si,e.sortByAll=ps,e.sortByOrder=ui,e.spread=yi,e.take=Or,e.takeRight=jr,e.takeRightWhile=Nr,e.takeWhile=Hr,e.tap=Ur,e.throttle=wi,e.thru=Br,e.times=Pa,e.toArray=Xi,e.toPlainObject=Yi,e.transform=ia,e.union=Qo,e.uniq=Pr,e.unzip=Dr,e.unzipWith=Rr,e.values=aa,e.valuesIn=oa,e.where=li,e.without=Jo,e.wrap=bi,e.xor=qr,e.zip=Ko,e.zipObject=zr,e.zipWith=ts,e.backflow=_s,e.collect=ti,e.compose=_s,e.each=os,e.eachRight=ss,e.extend=Is,e.iteratee=ka,e.methods=Zi,e.object=zr,e.select=Qr,e.tail=Ar,e.unique=Pr,Aa(e,e),e.add=Ra,e.attempt=Qs,e.camelCase=Ws,e.capitalize=la,e.ceil=tu,e.clone=xi,e.cloneDeep=Ei,e.deburr=ca,e.endsWith=fa,e.escape=ha,e.escapeRegExp=da,e.every=Zr,e.find=is,e.findIndex=Wo,e.findKey=Ns,e.findLast=as,e.findLastIndex=Vo,e.findLastKey=Hs,e.findWhere=Jr,e.first=xr,e.floor=eu,e.get=Qi,e.gt=Mi,e.gte=_i,e.has=Ji,e.identity=Sa,e.includes=Kr,e.indexOf=_r,e.inRange=sa,e.isArguments=ki,e.isArray=Ts,e.isBoolean=Ci,e.isDate=Si,e.isElement=Li,e.isEmpty=Ti,e.isEqual=Ai,e.isError=Ii,e.isFinite=Oi,e.isFunction=ji,e.isMatch=Hi,e.isNaN=Pi,e.isNative=Di,e.isNull=Ri,e.isNumber=qi,e.isObject=Ni,e.isPlainObject=zi,e.isRegExp=Gi,e.isString=Ui,e.isTypedArray=Bi,e.isUndefined=Fi,e.kebabCase=Vs,e.last=Cr,e.lastIndexOf=Sr,e.lt=Wi,e.lte=Vi,e.max=nu,e.min=ru,e.noConflict=Ia,e.noop=Oa,e.now=gs,e.pad=pa,e.padLeft=Xs,e.padRight=Ys,e.parseInt=ga,e.random=ua,e.reduce=hs,e.reduceRight=ds,e.repeat=ma,e.result=na,e.round=iu,e.runInContext=_,e.size=ai,e.snakeCase=$s,e.some=oi,e.sortedIndex=$o,e.sortedLastIndex=Zo,e.startCase=Zs,e.startsWith=va,e.sum=qa,e.template=ya,e.trim=wa,e.trimLeft=ba,e.trimRight=xa,e.trunc=Ea,e.unescape=Ma,e.uniqueId=Da,e.words=_a,e.all=Zr,e.any=oi,e.contains=Kr,e.eq=Ai,e.detect=is,e.foldl=hs,e.foldr=ds,e.head=xr,e.include=Kr,e.inject=hs,Aa(e,function(){var t={};return Ie(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=C,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){Q.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new Q(this);n=null==n?1:Eo(yo(n)||0,0);var i=this.clone();return r?i.__takeCount__=Mo(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__<0?"Right":"")}),i},Q.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=U;Q.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Gn(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");Q.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Q.prototype[t]=function(){return this.__filtered__?new Q(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?qe:ja;Q.prototype[t]=function(t){return this[n](r(t))}}),Q.prototype.compact=function(){return this.filter(Sa)},Q.prototype.reject=function(t,e){return t=Gn(t,e,1),this.filter(function(e){return!t(e)})},Q.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||0>e)?new Q(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==k&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n)},Q.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Q.prototype.toArray=function(){return this.take(Lo)},Ie(Q.prototype,function(t,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),a=e[i?"take"+("last"==n?"Right":""):n];a&&(e.prototype[n]=function(){var e=i?[1]:arguments,n=this.__chain__,o=this.__wrapped__,s=!!this.__actions__.length,u=o instanceof Q,l=e[0],c=u||Ts(o);c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=function(t){return i&&n?a(t,1)[0]:a.apply(k,le([t],e))},h={func:Br,args:[f],thisArg:k},d=u&&!s;if(i&&!n)return d?(o=o.clone(),o.__actions__.push(h),t.call(o)):a.call(k,this.value())[0];if(!i&&c){o=d?o:new Q(this);var p=t.apply(o,e);return p.__actions__.push(h),new y(p,n)}return this.thru(f)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Ja:Za)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Ie(Q.prototype,function(t,n){var r=e[n];if(r){var i=r.name,a=No[i]||(No[i]=[]);a.push({name:n,func:r})}}),No[On(k,L).name]=[{name:"wrapper",func:k}],Q.prototype.clone=et,Q.prototype.reverse=rt,Q.prototype.value=Ft,e.prototype.chain=Fr,e.prototype.commit=Wr,e.prototype.concat=es,e.prototype.plant=Vr,e.prototype.reverse=Xr,e.prototype.toString=Yr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=$r,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var k,C="3.10.1",S=1,L=2,T=4,A=8,I=16,O=32,j=64,N=128,H=256,P=30,D="...",R=150,q=16,z=200,G=1,U=2,B="Expected a function",F="__lodash_placeholder__",W="[object Arguments]",V="[object Array]",X="[object Boolean]",Y="[object Date]",$="[object Error]",Z="[object Function]",Q="[object Map]",J="[object Number]",K="[object Object]",tt="[object RegExp]",et="[object Set]",nt="[object String]",rt="[object WeakMap]",it="[object ArrayBuffer]",at="[object Float32Array]",ot="[object Float64Array]",st="[object Int8Array]",ut="[object Int16Array]",lt="[object Int32Array]",ct="[object Uint8Array]",ft="[object Uint8ClampedArray]",ht="[object Uint16Array]",dt="[object Uint32Array]",pt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vt=/&(?:amp|lt|gt|quot|#39|#96);/g,yt=/[&<>"'`]/g,wt=RegExp(vt.source),bt=RegExp(yt.source),xt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,kt=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,St=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Lt=RegExp(St.source),Tt=/[\u0300-\u036f\ufe20-\ufe23]/g,At=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ot=/\w*$/,jt=/^0[xX]/,Nt=/^\[object .+?Constructor\]$/,Ht=/^\d+$/,Pt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Dt=/($^)/,Rt=/['\n\r\u2028\u2029\\]/g,qt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),zt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Gt=-1,Ut={};Ut[at]=Ut[ot]=Ut[st]=Ut[ut]=Ut[lt]=Ut[ct]=Ut[ft]=Ut[ht]=Ut[dt]=!0,Ut[W]=Ut[V]=Ut[it]=Ut[X]=Ut[Y]=Ut[$]=Ut[Z]=Ut[Q]=Ut[J]=Ut[K]=Ut[tt]=Ut[et]=Ut[nt]=Ut[rt]=!1;var Bt={};Bt[W]=Bt[V]=Bt[it]=Bt[X]=Bt[Y]=Bt[at]=Bt[ot]=Bt[st]=Bt[ut]=Bt[lt]=Bt[J]=Bt[K]=Bt[tt]=Bt[nt]=Bt[ct]=Bt[ft]=Bt[ht]=Bt[dt]=!0,Bt[$]=Bt[Z]=Bt[Q]=Bt[et]=Bt[rt]=!1;var Ft={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Vt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Xt={"function":!0,object:!0},Yt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},$t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zt=Xt[typeof n]&&n&&!n.nodeType&&n,Qt=Xt[typeof e]&&e&&!e.nodeType&&e,Jt=Zt&&Qt&&"object"==typeof t&&t&&t.Object&&t,Kt=Xt[typeof self]&&self&&self.Object&&self,te=Xt[typeof window]&&window&&window.Object&&window,ee=Qt&&Qt.exports===Zt&&Zt,ne=Jt||te!==(this&&this.window)&&te||Kt||this,re=_();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ne._=re,define(function(){return re})):Zt&&Qt?ee?(Qt.exports=re)._=re:Zt._=re:ne._=re}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,n){!function(t,r){"use strict";"function"==typeof define&&define.amd?define(r):"object"==typeof n&&"object"==typeof e?e.exports=r():t.smoothScroll=r()}(this,function(){"use strict";if("object"==typeof window&&void 0!==document.querySelectorAll&&void 0!==window.pageYOffset&&void 0!==history.pushState){var t=function(t,e){return e===window?"HTML"===t.nodeName?-window.pageYOffset:t.getBoundingClientRect().top+window.pageYOffset:t.getBoundingClientRect().top-e.getBoundingClientRect().top+e.scrollTop},e=function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},n=function(t,n,r,i){return r>i?n:t+(n-t)*e(r/i)},r=function(e,r,i,a){r=r||500,a=a||window;var o=a===window?window.pageYOffset:a.scrollTop;if("number"==typeof e)var s=e;else var s=t(e,a);var u=a===window?document.body:a;s=Math.min(s,u.scrollHeight-u.offsetHeight);var l=Date.now(),c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,15)},f=function(){var t=Date.now()-l;a!==window?a.scrollTop=n(o,s,t,r):window.scroll(0,n(o,s,t,r)),t>r?"function"==typeof i&&i(e):c(f)};f()};return r.attachToAllLinks=function(){var t=function(t){t.preventDefault(),location.hash!==this.hash&&window.history.pushState(null,null,this.hash),r(document.getElementById(this.hash.substring(1)),500,function(t){location.replace("#"+t.id)})};document.addEventListener("DOMContentLoaded",function(){for(var e,n=document.querySelectorAll('a[href^="#"]:not([href="#"])'),r=n.length;e=n[--r];)e.addEventListener("click",t,!1)})},r}})},{}],6:[function(t,e,n){e.exports=t("./textures.js")},{"./textures.js":7}],7:[function(t,e,n){(function(){var t,r,i=[].slice;t=function(){return(Math.random().toString(36)+"00000000000000000").replace(/[^a-z]+/g,"").slice(0,5)},(r=function(t){return"object"==typeof n?e.exports=t():"function"==typeof define&&define.amd?define([],t):this.textures=t()})(function(){return{circles:function(){var e,n,r,i,a,o,s,u,l;return s=20,e="",o=2,r=!1,i="#343434",u="#343434",l=0,a=t(),n=function(){var t,n,c,f,h,d;if(n=this.append("defs").append("pattern").attr({id:a,patternUnits:"userSpaceOnUse",width:s,height:s}),e&&n.append("rect").attr({width:s,height:s,fill:e}),n.append("circle").attr({cx:s/2,cy:s/2,r:o,fill:i,stroke:u,"stroke-width":l}),r){for(h=[[0,0],[0,s],[s,0],[s,s]],d=[],c=0,f=h.length;f>c;c++)t=h[c],d.push(n.append("circle").attr({cx:t[0],cy:t[1],r:o,fill:i,stroke:u,"stroke-width":l}));return d}},n.heavier=function(t){return o=arguments.length&&t?2*o*t:2*o,n},n.lighter=function(t){return arguments.length?o=t?o/(2*t):o/2:o/=2,n},n.thinner=function(t){return s=arguments.length&&t?2*s*t:2*s,n},n.thicker=function(t){return arguments.length?s=t?s/(2*t):s/2:s/=2,n},n.background=function(t){return e=t,n},n.size=function(t){return s=t,n},n.complement=function(){return r=!0,n},n.radius=function(t){return o=t,n},n.fill=function(t){return i=t,n},n.stroke=function(t){return u=t,n},n.strokeWidth=function(t){return l=t,n},n.id=function(t){return arguments.length?(a=t,n):a},n.url=function(){return"url(#"+a+")"},n},lines:function(){var e,n,r,a,o,s,u,l,c;return u=20,c=2,l="#343434",n=t(),e="",a=["diagonal"],s="auto",o=function(t){switch(t){case"0/8":return function(t){return"M "+t/2+", 0 l 0, "+t}(u);case"vertical":return function(t){return"M "+t/2+", 0 l 0, "+t}(u);case"1/8":return function(t){return"M "+t/4+",0 l "+t/2+","+t+" M "+-t/4+",0 l "+t/2+","+t+"\nM "+3*t/4+",0 l "+t/2+","+t}(u);case"2/8":return function(t){return"M 0,"+t+" l "+t+","+-t+" M "+-t/4+","+t/4+" l "+t/2+","+-t/2+"\nM "+.75*t+","+5/4*t+" l "+t/2+","+-t/2}(u);case"diagonal":return function(t){return"M 0,"+t+" l "+t+","+-t+" M "+-t/4+","+t/4+" l "+t/2+","+-t/2+"\nM "+.75*t+","+5/4*t+" l "+t/2+","+-t/2}(u);case"3/8":return function(t){return"M 0,"+.75*t+" l "+t+","+-t/2+" M 0,"+t/4+" l "+t+","+-t/2+"\nM 0,"+5*t/4+" l "+t+","+-t/2}(u);case"4/8":return function(t){return"M 0,"+t/2+" l "+t+",0"}(u);case"horizontal":return function(t){return"M 0,"+t/2+" l "+t+",0"}(u);case"5/8":return function(t){return"M 0,"+-t/4+" l "+t+","+t/2+"M 0,"+t/4+" l "+t+","+t/2+"\nM 0,"+3*t/4+" l "+t+","+t/2}(u);case"6/8":return function(t){return"M 0,0 l "+t+","+t+" M "+-t/4+","+.75*t+" l "+t/2+","+t/2+"\nM "+3*t/4+","+-t/4+" l "+t/2+","+t/2}(u);case"7/8":return function(t){return"M "+-t/4+",0 l "+t/2+","+t+" M "+t/4+",0 l "+t/2+","+t+"\nM "+3*t/4+",0 l "+t/2+","+t}(u);default:return function(t){return"M "+t/2+", 0 l 0, "+t}(u)}},r=function(){var t,r,i,f,h;for(t=this.append("defs").append("pattern").attr({id:n,patternUnits:"userSpaceOnUse",width:u,height:u}),e&&t.append("rect").attr({width:u,height:u,fill:e}),h=[],r=0,i=a.length;i>r;r++)f=a[r],h.push(t.append("path").attr({d:o(f),"stroke-width":c,"shape-rendering":s,stroke:l,"stroke-linecap":"square"}));return h},r.background=function(t){return e=t,r},r.shapeRendering=function(t){return s=t,r},r.heavier=function(t){return c=arguments.length&&t?2*c*t:2*c,r},r.lighter=function(t){return arguments.length?c=t?c/(2*t):c/2:c/=2,r},r.thinner=function(t){return u=arguments.length&&t?2*u*t:2*u,r},r.thicker=function(t){return arguments.length?u=t?u/(2*t):u/2:u/=2,r},r.orientation=function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],a=t,r},r.size=function(t){return u=t,r},r.stroke=function(t){return l=t,r},r.strokeWidth=function(t){return c=t,r},r.id=function(t){return arguments.length?(n=t,r):n},r.url=function(){return"url(#"+n+")"},r},paths:function(){var e,n,r,i,a,o,s,u,l,c,f,h;return u=20,i=1,h=1,c=2,l="#343434",e="",n="",s="auto",r="transparent",a=void 0,f=function(t){switch(t){case"squares":return function(t){return"M "+t/4+" "+t/4+" l "+t/2+" 0 l 0 "+t/2+" l "+-t/2+" 0 Z"}(u);case"nylon":return function(t){return"M 0 "+t/4+" l "+t/4+" 0 l 0 "+-t/4+" M "+3*t/4+" "+t+" l 0 "+-t/4+"\nl "+t/4+" 0 M "+t/4+" "+t/2+" l 0 "+t/4+" l "+t/4+" 0 M "+t/2+" "+t/4+"\nl "+t/4+" 0 l 0 "+t/4}(u);case"waves":return function(t){return"M 0 "+t/2+" c "+t/8+" "+-t/4+" , "+3*t/8+" "+-t/4+" , "+t/2+" 0\nc "+t/8+" "+t/4+" , "+3*t/8+" "+t/4+" , "+t/2+" 0 M "+-t/2+" "+t/2+"\nc "+t/8+" "+t/4+" , "+3*t/8+" "+t/4+" , "+t/2+" 0 M "+t+" "+t/2+"\nc "+t/8+" "+-t/4+" , "+3*t/8+" "+-t/4+" , "+t/2+" 0"}(u);case"woven":return function(t){return"M "+t/4+","+t/4+"l"+t/2+","+t/2+"M"+3*t/4+","+t/4+"l"+t/2+","+-t/2+"\nM"+t/4+","+3*t/4+"l"+-t/2+","+t/2+"M"+3*t/4+","+5*t/4+"l"+t/2+","+-t/2+"\nM"+-t/4+","+t/4+"l"+t/2+","+-t/2}(u);case"crosses":return function(t){return"M "+t/4+","+t/4+"l"+t/2+","+t/2+"M"+t/4+","+3*t/4+"l"+t/2+","+-t/2}(u);case"caps":return function(t){return"M "+t/4+","+3*t/4+"l"+t/4+","+-t/2+"l"+t/4+","+t/2}(u);case"hexagons":return function(t){return h=3,i=Math.sqrt(3),"M "+t+",0 l "+t+",0 l "+t/2+","+t*Math.sqrt(3)/2+"\nl "+-t/2+","+t*Math.sqrt(3)/2+" l "+-t+",0\nl "+-t/2+","+-t*Math.sqrt(3)/2+" Z M 0,"+t*Math.sqrt(3)/2+"\nl "+t/2+",0 M "+3*t+","+t*Math.sqrt(3)/2+" l "+-t/2+",0"}(u);default:return t(u)}},o=function(){var o,d;return d=f(n),a=t(),o=this.append("defs").append("pattern").attr({id:a,patternUnits:"userSpaceOnUse",width:u*h,height:u*i}),e&&o.append("rect").attr({width:u*h,height:u*i,fill:e}),o.append("path").attr({d:d,fill:r,"stroke-width":c,"shape-rendering":s,stroke:l,"stroke-linecap":"square"})},o.background=function(t){return e=t,o},o.shapeRendering=function(t){return s=t,o},o.heavier=function(t){return c=arguments.length&&t?2*c*t:2*c,o},o.lighter=function(t){return arguments.length?c=t?c/(2*t):c/2:c/=2,o},o.thinner=function(t){return u=arguments.length&&t?2*u*t:2*u,o},o.thicker=function(t){return arguments.length?u=t?u/(2*t):u/2:u/=2,o},o.d=function(t){return n=t,o},o.size=function(t){return u=t,o},o.stroke=function(t){return l=t,o},o.strokeWidth=function(t){return c=t,o},o.id=function(t){return arguments.length?(a=t,o):a},o.url=function(){return"url(#"+a+")"},o}}})}).call(this)},{}],8:[function(t,e,n){!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var t=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-t}}}();var r=r||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e){if(0===t.length)return!1;var n=0;for(e=void 0!==e?e:window.performance.now();n<t.length;)t[n].update(e)?n++:t.splice(n,1);return!0}}}();r.Tween=function(t){var e=t,n={},i={},a={},o=1e3,s=0,u=!1,l=!1,c=!1,f=0,h=null,d=r.Easing.Linear.None,p=r.Interpolation.Linear,g=[],m=null,v=!1,y=null,w=null,b=null;for(var x in t)n[x]=parseFloat(t[x],10);this.to=function(t,e){return void 0!==e&&(o=e),i=t,this},this.start=function(t){r.add(this),l=!0,v=!1,h=void 0!==t?t:window.performance.now(),h+=f;for(var o in i){if(i[o]instanceof Array){if(0===i[o].length)continue;i[o]=[e[o]].concat(i[o])}n[o]=e[o],n[o]instanceof Array==!1&&(n[o]*=1),a[o]=n[o]||0}return this},this.stop=function(){return l?(r.remove(this),l=!1,null!==b&&b.call(e),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,e=g.length;e>t;t++)g[t].stop()},this.delay=function(t){return f=t,this},this.repeat=function(t){return s=t,this},this.yoyo=function(t){return u=t,this},this.easing=function(t){return d=t,this},this.interpolation=function(t){return p=t,this},this.chain=function(){return g=arguments,this},this.onStart=function(t){return m=t,this},this.onUpdate=function(t){return y=t,this},this.onComplete=function(t){return w=t,this},this.onStop=function(t){return b=t,this},this.update=function(t){var r,l,b;if(h>t)return!0;v===!1&&(null!==m&&m.call(e),v=!0),l=(t-h)/o,l=l>1?1:l,b=d(l);for(r in i){var x=n[r]||0,E=i[r];E instanceof Array?e[r]=p(E,b):("string"==typeof E&&(E=x+parseFloat(E,10)),"number"==typeof E&&(e[r]=x+(E-x)*b))}if(null!==y&&y.call(e,b),1===l){if(s>0){isFinite(s)&&s--;for(r in a){if("string"==typeof i[r]&&(a[r]=a[r]+parseFloat(i[r],10)),u){var M=a[r];a[r]=i[r],i[r]=M}n[r]=a[r]}return u&&(c=!c),h=t+f,!0}null!==w&&w.call(e);for(var _=0,k=g.length;k>_;_++)g[_].start(h+o);return!1}return!0}},r.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)))},Out:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},InOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*r.Easing.Bounce.In(2*t):.5*r.Easing.Bounce.Out(2*t-1)+.5}}},r.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,a=Math.floor(i),o=r.Interpolation.Utils.Linear;return 0>e?o(t[0],t[1],i):e>1?o(t[n],t[n-1],n-i):o(t[a],t[a+1>n?n:a+1],i-a)},Bezier:function(t,e){for(var n=0,i=t.length-1,a=Math.pow,o=r.Interpolation.Utils.Bernstein,s=0;i>=s;s++)n+=a(1-e,i-s)*a(e,s)*t[s]*o(i,s);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,a=Math.floor(i),o=r.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(0>e&&(a=Math.floor(i=n*(1+e))),o(t[(a-1+n)%n],t[a],t[(a+1)%n],t[(a+2)%n],i-a)):0>e?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[a?a-1:0],t[a],t[a+1>n?n:a+1],t[a+2>n?n:a+2],i-a)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=r.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var a=.5*(n-t),o=.5*(r-e),s=i*i,u=i*s;return(2*e-2*n+a+o)*u+(-3*e+3*n-2*a-o)*s+a*i+e}}},function(t){"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n?e.exports=r:t.TWEEN=r}(this)},{}],9:[function(t,e,n){e.exports={continents:{panX:{duration:{"in":.75,out:.75}},panY:{duration:{"in":1.5,out:.75}},spread:{delay:{"in":.5,out:.25},duration:{"in":1.5,out:.75}},introSpread:{duration:{"in":1.5,out:2.5},delay:{"in":0,out:1}}},states:{backgrounded:{actions:{scale:.6,top:"-17%"},scale:.4,top:"-10%",duration:{"in":1.5,out:1.5}},containers:{bottom:"10%"},highlighted:{"in":0,out:.2}},actions:{backgrounded:{scale:.7},margins:{bottom:10},add:{time:1e3,delay:250},update:{time:750,delay:0},remove:{time:600,delay:0}},triggers:{bottom:"20%"},emotions:{panX:{duration:.75,delay:.25},scale:{"in":{delay:.65}}},ui:{scrollbar:{introOpenDelay:1.5,closeDelay:.2},overlays:{duration:{"in":1,out:.5}},intro:{delay:1}}}},{}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(n,"__esModule",{value:!0});var a=t("lodash"),o=r(a),s=t("./dispatcher.js"),u=r(s),l=t("./continents.js"),c=r(l),f=t("./states.js"),h=r(f),d=t("./actions.js"),p=r(d),g=t("./triggers.js"),m=r(g),v=t("./moods.js"),y=r(v),w=t("./calm.js"),b=r(w),x=t("./moreInfo.js"),E=r(x),M=t("../static/emotionsData.json"),_=r(M),k=t("../scss/variables.json"),C=r(k);n["default"]=function(){function t(t){e(),n(),r(),s(),a(),l(),f(),u["default"].addListener(u["default"].EVENTS.NAVIGATE,V),u["default"].addListener(u["default"].EVENTS.CHANGE_EMOTION_STATE,W),u["default"].addListener(u["default"].EVENTS.CHANGE_CALLOUT,F),window.addEventListener("hashchange",Z);var i=55;t.style.height=window.innerHeight-i+"px",Z()}function e(){var t=document.querySelector("#main"),e=void 0;t.innerHTML="",o["default"].values(u["default"].SECTIONS).forEach(function(n){e=document.createElement("div"),e.id=n,t.appendChild(e),rt[n]=e}),t.insertBefore(rt[u["default"].SECTIONS.TRIGGERS],rt[u["default"].SECTIONS.ACTIONS])}function n(){it.continents=c["default"],it.states=h["default"],it.actions=p["default"],it.triggers=m["default"],it.moods=y["default"],it.calm=b["default"],it.more=E["default"]}function r(){var t=document.querySelector("#header .dropdown"),e=t.querySelector("ul");Object.keys(u["default"].EMOTIONS).forEach(function(t){var n=u["default"].EMOTIONS[t].toLowerCase(),r=document.createElement("li");r.setAttribute("role","menuitem"),r.setAttribute("data-emotion",n),r.innerHTML=n.toUpperCase(),e.appendChild(r)}),t.querySelector(".dropdown-toggle").addEventListener("click",N)}function a(){var t=document.querySelector("#more-info .dropup"),e=t.querySelector(".dup-title"),n=t.querySelector("ul");e.innerHTML="<h4>"+u["default"].MORE_INFO.title+"</h4>",u["default"].MORE_INFO.items.forEach(function(t){var e=document.createElement("li");e.setAttribute("role","menuitem"),e.setAttribute("data-page",t.page),e.innerHTML="<h4>"+t.label+"</h4>",n.appendChild(e)}),t.querySelector(".dropdown-toggle").addEventListener("click",O)}function s(){var t=document.querySelector("#scrollbar"),e=document.createElement("div");
e.classList.add("segment-container"),t.appendChild(e),o["default"].values(u["default"].SECTIONS).forEach(function(t){if(t!==u["default"].SECTIONS.MORE){var n=document.createElement("div");n.setAttribute("data-section",t);var r=document.createElement("h4");r.innerHTML=t.toUpperCase(),n.appendChild(r),e.appendChild(n),ct[t]=n}}),P=o["default"].throttle(P,50),e.addEventListener("mouseover",R),e.addEventListener("mouseout",q),e.addEventListener("click",z),ht=t.getBoundingClientRect(),ht={top:ht.top,left:ht.left,width:ht.width-(ht.right-e.getBoundingClientRect().left)},dt=parseInt(window.getComputedStyle(e).left.replace("px","")),gt=[];var n=void 0,r=function i(){n?T(n.deltaX,n.deltaY):gt.length&&gt.shift(),n=null,window.requestAnimationFrame(i)};window.addEventListener("wheel",function(t){n=t}),window.requestAnimationFrame(r),document.addEventListener("keydown",L)}function l(){var t=document.querySelector("#main");at=document.createElement("div"),at.id="callout";var e=document.createElement("h3");e.classList.add("headline"),at.appendChild(e);var n=document.createElement("p");n.classList.add("body"),at.appendChild(n),t.appendChild(at)}function f(){var t=document.querySelector("#modal"),e=document.createElement("h3");e.classList.add("headline"),e.textContent=_["default"].metadata.intro.header;var n=document.createElement("p");n.classList.add("body"),n.innerHTML=_["default"].metadata.intro.body;var r=document.createElement("p");r.classList.add("home-link"),r.innerHTML='<a href="#">Start at the beginning</a>';var i=document.createElement("div");i.classList.add("close-button"),t.appendChild(e),t.appendChild(n),t.appendChild(r),t.appendChild(i),i.addEventListener("click",function(t){t.stopImmediatePropagation(),B(!1)})}function d(t,e,n){t.setEmotion(st,e,ut,n).then(function(){yt=!1}),t.setPreviousSection&&t.setPreviousSection(lt)}function g(t,e,n){var r=it[t],i=ot,a=void 0;for(var o in it)if(it[o]===i){a=rt[o];break}r.isInited||(r.backgroundSections&&r.backgroundSections.forEach(function(t){t.isInited||x(t)}),x(r));var s=r.backgroundSections||[];if(i)i===r?(s.forEach(function(t){t.setEmotion(st,e)}),d(r,e,n)):!function(){var o=!1,u=s.map(function(n){for(var r in it)~s.indexOf(it[r])&&rt[r].removeAttribute("style");if(i===n)return o=!0,n.setBackgrounded(!0,{sectionName:t});var a=n.open({sectionName:t,inBackground:!0,firstSection:!1});return n.setEmotion(st,e),a}),l=i.backgroundSections||[];o||(l=l.filter(function(t){return t!==r&&!~s.indexOf(t)}),l.length&&l.forEach(function(t){t.setBackgrounded(!1),t.close()}),u.push(i.close())),Promise.all(u).then(function(i){if(o||a&&(a.style.display="none"),l.length)for(var s in it)!~l.indexOf(it[s])||r.backgroundSections&&~r.backgroundSections.indexOf(it[s])||(rt[s].style.display="none");rt[t].removeAttribute("style"),r.open({sectionName:t,inBackground:!1,firstSection:!1}),d(r,e,n)})}();else{for(var o in rt)o===t||~s.indexOf(it[o])||(rt[o].style.display="none");s.forEach(function(n){n.open({sectionName:t,inBackground:!0,firstSection:!1}),n.setEmotion(st,e)}),r.open({sectionName:t,inBackground:!1,firstSection:!0}),d(r,e,n)}ut||M({section:t}),G(t),ot=r}function v(t){M({more:t}),ut=t}function w(t){M({emotion:t}),st=t}function x(t){var e=void 0;for(var n in it)if(it[n]===t){e=n;break}var r=rt[e].style.display;rt[e].removeAttribute("style"),t.init(rt[e]),r&&(rt[e].style.display=r)}function M(t){if(t.section||t.more){var e=t.section||u["default"].getMorePageName(t.more);document.querySelector("#header h1").innerHTML=e.toUpperCase()}var n=document.querySelector("#header .dd-title");t.emotion?n.innerHTML=t.emotion.toUpperCase():null===t.emotion&&(n.innerHTML="CHOOSE AN EMOTION")}function k(t,e){if(!yt&&ot){var n=o["default"].values(u["default"].SECTIONS),r=void 0,i=void 0;n.some(function(t,e){return it[t]===ot?(r=e,!0):void 0}),i=0>t?Math.max(0,r-1):Math.min(r+1,n.length-1),r!==i&&("more"==n[i]?u["default"].navigate("more",null,"annex"):u["default"].navigate(n[i]),e&&(vt=!0))}}function S(t){if(!yt&&!ut){var e=o["default"].values(u["default"].EMOTIONS),n=e.indexOf(st),r=void 0;-1===n&&(n=0),r=0>t?Math.max(0,n-1):Math.min(n+1,e.length-1),n!==r&&u["default"].navigate(null,e[r])}}function L(t){switch(t.keyCode){case 37:S(-1);break;case 38:k(-1);break;case 39:S(1);break;case 40:k(1)}}function T(t,e){if(!ut&&e){var n=Date.now();if(n-mt>nt&&(vt=!1),mt=n,vt)gt=[];else if(gt.push(e),gt.length>=tt){var r=gt.reduce(function(t,e){return t+e},0);Math.abs(r)>=et&&(gt=[],k(0>r?-1:1,!0))}}}function A(t){document.querySelector("body").removeEventListener("click",A);var e=document.querySelectorAll(".emotion-menu");[].concat(i(e)).forEach(function(e){e!==t&&e.classList.remove("open")})}function I(){document.querySelector("body").addEventListener("click",A)}function O(t){var e=document.querySelector("#more-info .dropup"),n=e.classList;A(e),n.toggle("open"),n.contains("open")?e.addEventListener("click",j):e.removeEventListener("click",j),I(),t.stopPropagation()}function j(t){if(t.stopImmediatePropagation(),t.target&&"li"===t.target.nodeName.toLowerCase()){document.querySelector("#more-info .dropup").classList.remove("open");var e=t.target.dataset.page;e&&u["default"].navigate(u["default"].SECTIONS.MORE,null,e)}}function N(t){var e=document.querySelector("#header .dropdown"),n=e.classList;n.toggle("open"),n.contains("open")?e.addEventListener("click",H):e.removeEventListener("click",H),t.stopPropagation()}function H(t){t.target&&"li"===t.target.nodeName.toLowerCase()&&(t.stopImmediatePropagation(),document.querySelector("#header .dropdown").classList.remove("open"),u["default"].navigate(null,t.target.dataset.emotion))}function P(t){var e=Math.pow(Math.max(0,Math.min(1,(t.pageX-ht.left-.25*ht.width)/(.25*ht.width))),.5);D(e)}function D(t){pt&&window.cancelAnimationFrame(pt);var e=document.querySelector("#scrollbar .segment-container"),n=Math.round((1-t)*dt),r=parseFloat(window.getComputedStyle(e).left.replace("px","")),i=function a(){var t=.25*(n-r);Math.abs(t)<1?(e.style.left=n+"px",pt=null):(r+=t,e.style.left=r+"px",pt=window.requestAnimationFrame(a))};window.requestAnimationFrame(i)}function R(t){var e=t.target.dataset.section;e&&U(e)}function q(t){U(null)}function z(t){var e=t.target.dataset.section;e&&u["default"].navigate(e)}function G(t){ft=t,U(null)}function U(t){t=t||ft,Object.keys(ct).forEach(function(e){var n=e===t||e===ft;ct[e].classList[n?"add":"remove"]("highlighted")})}function B(t){var e=document.querySelector("#modal"),n=document.querySelector("#modal-overlay");if(ot===it[u["default"].SECTIONS.CONTINENTS])if(t){var r=e.querySelector(".home-link");r&&r.remove()}else ot.setContinentIntroPositions(!1);if(t){if("block"===e.style.display)return;document.body.classList.add("intro-open"),document.body.classList.remove("intro-closing","intro-opening"),e.style.display="block",n.style.display="block",yt=!0,setTimeout(function(){e.classList.add("visible"),n.classList.add("visible");var t=function r(t){t.stopImmediatePropagation(),n.removeEventListener("click",r),B(!1)};n.addEventListener("click",t)},100),window.removeEventListener("mousemove",P)}else{var i=function(){if(!n.classList.contains("visible"))return{v:void 0};document.body.classList.add("intro-closing"),document.body.classList.remove("intro-open","intro-opening"),yt=!1;var t=function r(t){e.removeEventListener("transitionend",r),e.style.display="none",n.style.display="none",document.body.classList.remove("intro-closing","intro-open","intro-opening")};e.addEventListener("transitionend",t),e.classList.remove("visible"),n.classList.remove("visible"),D(0),window.addEventListener("mousemove",P)}();if("object"==typeof i)return i.v}}function F(t,e,n){return e?(at.removeAttribute("class"),at.classList.add("visible"),t&&at.classList.add(t),at.querySelector(".headline").innerHTML=e,void(at.querySelector(".body").innerHTML=n)):void at.classList.remove("visible")}function W(t,e){e?(it.actions.setState(t),it.states.setBackgroundedState(t)):it.actions.setHighlightedState(t)}function V(t,e){if(t===u["default"].HOME)return void(document.location.hash="");var n=[];if(!t)for(var r in it)if(it[r]===ot){t=r;break}e||(e=st,e||t!==u["default"].SECTIONS.STATES&&t!==u["default"].SECTIONS.ACTIONS&&t!==u["default"].SECTIONS.TRIGGERS&&t!==u["default"].SECTIONS.MOODS||(e=u["default"].DEFAULT_EMOTION)),t&&n.push(t),e&&n.push(e),document.location.hash=n.join(":")}function X(t){var e=arguments.length<=1||void 0===arguments[1]?K:arguments[1];return u["default"].validateEmotion(t.emotion)?t.emotion:e&&e.emotion?e.emotion:null}function Y(t){return u["default"].validateMorePage(t.emotion)?t.emotion:null}function $(t){var e=arguments.length<=1||void 0===arguments[1]?K:arguments[1];return u["default"].validateSection(t.section)?t.section:e&&e.section?e.section:null}function Z(t){var e=arguments.length<=1||void 0===arguments[1]?K:arguments[1];ot?B(!1):(document.body.classList.remove("intro-closing","intro-open"),document.body.classList.add("intro-opening"),setTimeout(function(){B(!0)},1e3*C["default"].ui.intro.delay),setTimeout(function(){D(1)},1e3*C["default"].ui.scrollbar.introOpenDelay));var n=document.location.hash.replace(/^#/,"");wt=n,n=J(n);var r=$(n),i=Y(n),a=i?null:X(n);yt=!0;var o=st,s=ut;ut=null,i?v(i):w(a),Q(r,e),g(r,o,s)}function Q(t,e){t&&"more"!==t?lt=t:e&&e.section&&(lt=e.section)}function J(t){t||(t="");var e=t.split(":");return{section:e[0],emotion:e[1]}}var K={section:u["default"].SECTIONS.CONTINENTS,emotion:null},tt=3,et=20,nt=100,rt={},it={},at=void 0,ot=null,st=null,ut=null,lt=null,ct={},ft=null,ht=void 0,dt=void 0,pt=void 0,gt=[],mt=0,vt=!1,yt=!1,wt=void 0;t.apply(void 0,arguments)},e.exports=n["default"]},{"../scss/variables.json":9,"../static/emotionsData.json":36,"./actions.js":13,"./calm.js":14,"./continents.js":15,"./dispatcher.js":16,"./moods.js":18,"./moreInfo.js":32,"./states.js":34,"./triggers.js":35,lodash:4}],11:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("d3"),s=(r(o),.4),u=1.2,l=.05,c=function(){function t(e,n,r){i(this,t),this.size=r*t.SIZE_MOD,this.radius=0,this.rSpeed=.2*Math.random(),this.initSpeed=this.rSpeed,this.weight=Math.round(.4*r+1.2*Math.random()*r),this.alpha=t.BASE_ALPHA,this.color=n[Math.floor(Math.random()*n.length)].join(","),this.d3Wrapper=e.append("circle").attr("cx",0).attr("cy",0).attr("r",this.radius).attr("stroke","rgb("+this.color+")").attr("stroke-opacity",this.alpha)}return a(t,null,[{key:"spawn",value:function(e,n,r){return r||n-e.spawnConfig.lastSpawn>e.spawnConfig.minDelay?r||Math.random()<e.spawnConfig.freq?(r||(e.spawnConfig.lastSpawn=n),new t(e.circleWrapper,e.colorPalette,e.size)):null:void 0}},{key:"getStrokeProps",value:function(e,n){var r=e[Math.floor(Math.random()*e.length)].join(","),i=t.BASE_ALPHA,a=Math.round(.4*n*t.SIZE_MOD+1.2*Math.random()*n*t.SIZE_MOD);return{stroke:"rgba("+r+","+i+")",sw:a}}},{key:"BASE_ALPHA",value:.5,enumerable:!0},{key:"SIZE_MOD",value:1/(1+.5*(s+u)),enumerable:!0}]),a(t,[{key:"update",value:function(t,e){this.draw(t),this.grow(e)}},{key:"draw",value:function(t){var e=this.calcStrokeWidth();this.d3Wrapper.attr("r",this.radius).attr("stroke-width",e).attr("stroke","rgb("+this.color+")").attr("stroke-opacity",this.alpha*t)}},{key:"grow",value:function(e){var n=this.size+.5*this.weight;this.rSpeed=l+Math.pow(1-this.radius/n,.5)*this.initSpeed,this.rSpeed*=e,this.radius+=this.rSpeed,this.radius>this.size&&(this.alpha=Math.max(0,t.BASE_ALPHA*(n-this.radius)/(.5*this.weight)))}},{key:"calcStrokeWidth",value:function(){return Math.min(this.weight,this.size+.5*this.weight-this.radius)}},{key:"isAlive",value:function(){return this.alpha>.01}}]),t}();n["default"]=c,e.exports=n["default"]},{d3:2}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("lodash"),s=r(o),u=t("d3"),l=r(u),c=t("d3-transform"),f=r(c),h=t("tween.js"),d=r(h),p=t("./Circle.js"),g=r(p),m=t("../static/emotionsData.json"),v=r(m),y=t("../scss/variables.json"),w=r(y),b=60,x=8,E=1.2,M=function(){function t(e,n,r){var a=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];i(this,t),t.transforms||t.initTransforms(r.w,r.h),this.initInstanceProperties(e,n,r,a),this.prepopulate()}return a(t,null,[{key:"initTransforms",value:function(e,n){t.transforms=s["default"].shuffle([{x:.03*e,y:-.2*n,label:{x:.19*e,y:-.13*n},size:.24*n,introSpreadMaxRad:.13},{x:-.22*e,y:-.14*n,label:{x:-.25*e,y:-.01*n},size:.23*n,introSpreadMaxRad:.2},{x:-.06*e,y:.07*n,label:{x:-.22*e,y:.07*n},size:.18*n,introSpreadMaxRad:.35,isCenterContinent:!0},{x:-.03*e,y:.22*n,label:{x:-.17*e,y:.17*n},size:.22*n,introSpreadMaxRad:.15},{x:.19*e,y:.1*n,label:{x:.01*e,y:.25*n},size:.24*n,introSpreadMaxRad:.15}])}},{key:"HIGHLIGHT_LEVELS",value:{NONE:0,UNSELECTED:1,UNHIGHLIGHTED:2,HIGHLIGHTED:3,SELECTED:4},enumerable:!0},{key:"HIGHLIGHT_ALPHA_MODS",value:[1,.25,.5,1.5,2],enumerable:!0},{key:"HIGHLIGHT_SPEED_MODS",value:[1,.25,.5,1.5,2],enumerable:!0},{key:"configsByEmotion",value:{anger:{colorPalette:[[204,28,23],[208,46,53],[212,65,63],[216,83,73],[220,102,83],[224,120,92],[228,135,102]]},disgust:{colorPalette:[[0,104,55],[0,110,57],[0,116,59],[0,122,61],[0,128,63],[0,130,65],[0,136,67],[0,142,69]]},enjoyment:{colorPalette:[[248,136,29],[243,143,30],[243,136,33],[244,149,36],[244,153,40],[245,156,43],[245,159,46],[246,162,49],[247,169,56],[246,166,53],[247,172,59]]},fear:{colorPalette:[[143,39,139],[156,41,153],[196,49,194],[209,51,207],[223,53,221],[235,56,234],[248,58,248]]},sadness:{colorPalette:[[65,74,161],[54,104,178],[49,124,189],[44,139,200],[51,158,211],[85,172,217],[146,198,229],[174,209,234],[195,218,238]]}},enumerable:!0}]),a(t,[{key:"initInstanceProperties",value:function(e,n,r,i){var a=Object.keys(t.configsByEmotion).indexOf(e);if(-1===a)throw new Error('Invalid emotion "'+e+'" for continent.');this.id=e,this.name=e.toUpperCase(),this.colorPalette=t.configsByEmotion[e].colorPalette.concat(),this.spawnConfig={lastSpawn:0,minDelay:3*b,freq:.01},this.drift={x:0,y:0,sinCtr:2*Math.random()*Math.PI,cosCtr:2*Math.random()*Math.PI},this.centerX=r.centerX,this.centerY=r.centerY,Object.assign(this,t.transforms[a],i[a]),this.introSpreadRad=0,this.introSpreadAng=Math.atan2(this.y,this.x),this.isCenterContinent&&(this.introSpreadAng+=.4),this.scaleX=1,this.scaleY=1,this.circles=[],this.highlightLevel=t.HIGHLIGHT_LEVELS.NONE,this.isFocused=!1,this.d3Selection=n.append("g").classed("continent "+this.id,!0).style("opacity",0).datum(this),this.d3Selection.transition().duration(1e3*w["default"].ui.overlays.duration["in"]).style("opacity",1),this.circleWrapper=this.d3Selection.append("g").classed("circle-wrapper",!0)}},{key:"prepopulate",value:function(){for(var e=2+Math.floor(2*Math.random()),n=0;e>n;n++){var r=g["default"].spawn(this,1,!0);r.radius=.75+.25*Math.random()*r.size,r.update(t.HIGHLIGHT_ALPHA_MODS[this.highlightLevel],t.HIGHLIGHT_SPEED_MODS[this.highlightLevel]),this.circles.push(r)}}},{key:"update",value:function(e,n){this.tweens&&s["default"].values(this.tweens).forEach(function(t){t.update(e.time)});var r=void 0,i=void 0,a=void 0,o=void 0;this.isFocused||(this.circles.length<x&&(r=g["default"].spawn(this,n),r&&this.circles.push(r)),a=t.HIGHLIGHT_ALPHA_MODS[this.highlightLevel],o=t.HIGHLIGHT_SPEED_MODS[this.highlightLevel],this.wander(this.drift,3));var u=this.centerX+this.x+this.drift.x,l=this.centerY+this.y+this.drift.y;if(this.introSpreadRad&&(u+=this.introSpreadRad*Math.cos(this.introSpreadAng),l+=this.introSpreadRad*Math.sin(this.introSpreadAng)),isNaN(this.scaleX)||this.d3Selection.attr("transform",(0,f["default"])().translate(u,l).scale(this.scaleX,this.scaleY)),!this.isFocused)for(var c=this.circles.length-1;c>=0;c--)i=this.circles[c],i.isAlive()?i.update(a,o):(this.circles.splice(c,1),i.d3Wrapper.remove())}},{key:"addTween",value:function(t,e,n){var r=this,i=arguments.length<=3||void 0===arguments[3]?d["default"].Easing.Linear.None:arguments[3];if(e||n){this.tweens||(this.tweens={});var a=Object.keys(t).sort().join(",");this.tweens[a]&&this.tweens[a].stop(),this.tweens[a]=new d["default"].Tween(this).to(t,e).delay(n).onComplete(function(){delete r.tweens[a]}).easing(i).start()}else for(var o in t)this[o]=t[o]}},{key:"spreadCircles",value:function(e,n){this.isFocused=!0;var r=this,i={top:20,right:20,bottom:50,left:20},a=.7,o=e.getBoundingClientRect(),s=a*(o.width-i.left-i.right)/n*E,u=((o.height-i.top-i.bottom)/n*E,l["default"].scale.linear().domain([0,10]).range([-.5*s,.5*s])),c=l["default"].scale.linear().domain([0,10]).range([0,.5*s]),h=1e3*w["default"].continents.spread.duration["in"],d=.5*h,p=this.transformRanges(v["default"].emotions[this.id].states),m=this.circleWrapper.selectAll("circle").data(p),y=function(e,n){var i=t.configsByEmotion[r.id].colorPalette,a=i[Math.floor(Math.random()*i.length)].join(",");return"rgb("+a+")"};m.transition().duration(h).attr("cx",function(t){return u(t.cx)}).attr("r",function(t){return c(t.r)}).attr("stroke",y).attr("stroke-opacity",g["default"].BASE_ALPHA).attr("stroke-width",function(t){return c(t.strokeWidth)}),m.enter().append("circle").attr("cx",0).attr("cy",0).attr("r",0).attr("stroke",y).attr("stroke-opacity",g["default"].BASE_ALPHA).attr("stroke-width",function(t){return c(t.strokeWidth)}).transition().duration(h).attr("cx",function(t){return u(t.cx)}).attr("r",function(t){return c(t.r)}),m.exit().transition().duration(d).ease("quad-out").attr("opacity",0).attr("transform",(0,f["default"])().scale(0,0)),this.circleWrapper.classed("flat",!0)}},{key:"gatherCircles",value:function(t){var e=this,n=t?0:1e3*w["default"].continents.spread.duration.out,r=t?0:.5*n,i=!1,a=this.circleWrapper.selectAll("circle").data(this.circles);a.transition().duration(n).attr("cx",0).attr("cy",0).attr("r",function(t){return t.radius}).attr("stroke",function(t){return"rgb("+t.color+")"}).attr("stroke-opacity",function(t){return t.alpha}).attr("stroke-width",function(t){return t.calcStrokeWidth()}).each("end",function(){i||(e.isFocused=!1,i=!0)}),a.exit().transition().duration(r).ease("quad-out").attr("opacity",0).attr("transform",(0,f["default"])().scale(0,0)),this.circleWrapper.classed("flat",!1)}},{key:"transformRanges",value:function(t,e){arguments.length<=2||void 0===arguments[2]?1:arguments[2];t=t.filter(function(t){return!(!t.range.min||!t.range.max)}),t=t.sort(function(t,e){return t.range.min<e.range.min?-1:t.range.min>e.range.min?1:t.range.max<e.range.max?-1:t.range.max>e.range.max?1:0});t.length;return t.map(function(t,e){var n=t.range.max,r=t.range.min-1,i=.5*(n-r),a=(.4+.5*Math.random())*i;return{cx:r+i,strokeWidth:1.2*a,r:i-.5*a}})}},{key:"wander",value:function(t,e){t.sinCtr+=.01+.03*Math.random(),t.cosCtr+=.01+.03*Math.random(),t.x=Math.cos(t.cosCtr)*e,t.y=Math.sin(t.sinCtr)*e}},{key:"meander",value:function(t,e){var n=.02*e,r=.004*Math.PI,i=Math.cos(t.ang)*t.dist,a=Math.sin(t.ang)*t.dist,o=Math.atan2(a,i);for(t.dist+=(-.5+Math.random())*n,t.ang+=(-.5+Math.random())*r;0>o;)o+=2*Math.PI;for(;t.ang<0;)t.ang+=2*Math.PI;t.ang%=2*Math.PI,t.dist>.5*e&&(t.ang+=.1*(o-t.ang))}}]),t}();n["default"]=M,e.exports=n["default"]},{"../scss/variables.json":9,"../static/emotionsData.json":36,"./Circle.js":11,d3:2,"d3-transform":1,lodash:4,"tween.js":8}],13:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("d3"),a=r(i),o=t("textures"),s=r(o),u=t("lodash"),l=r(u),c=t("./dispatcher.js"),f=r(c),h=t("../static/emotionsData.json"),d=r(h),p=t("../scss/variables.json"),g=r(p),m=t("./states.js"),v=r(m),y={CONSTRUCTIVE:1,BOTH:2,DESTRUCTIVE:3,NONE:4},w=[{x:0,y:0},{x:.75,y:-.01},{x:1,y:0},{x:.75,y:.01},{x:0,y:0}];n["default"]={isInited:!1,currentEmotion:null,actionsData:null,backgroundSections:[v["default"]],labelContainers:null,graphContainers:null,valenceTextures:null,mouseOutTimeout:null,init:function(t){this.sectionContainer=t,this.actionsData=this.parseActions(),this.initContainers(t),this.initLabels(t),this.setUpGraphs(t),this.scaledLineGenerator=this.scaledLineGenerator.bind(this),this.arcTween=this.arcTween.bind(this),this.onActionMouseOver=this.onActionMouseOver.bind(this),this.onActionMouseOut=this.onActionMouseOut.bind(this),this.onActionMouseClick=this.onActionMouseClick.bind(this),this.isInited=!0},initContainers:function(t){l["default"].values(f["default"].EMOTIONS).forEach(function(e){var n=document.createElement("div");n.classList.add("actions-container"),n.classList.add(e);var r=document.createElement("div");r.classList.add("graph-container"),n.appendChild(r),t.appendChild(n)})},initLabels:function(t){var e=this;this.labelContainers={},l["default"].values(f["default"].EMOTIONS).forEach(function(t){var n=a["default"].select("."+t+".actions-container"),r=n.append("div").classed("label-container",!0);e.labelContainers[t]=r})},setUpGraphs:function(t){var e=this,n={top:25,right:100,bottom:g["default"].actions.margins.bottom,left:100},r=t.querySelector(".graph-container"),i=r.offsetWidth-n.left-n.right,o=Math.max(r.offsetHeight,.5*r.offsetWidth),u=o-n.top-n.bottom,c=Math.sqrt(3)/2*u,h=Math.min(.5*i,.75*c);this.lineGenerator=a["default"].svg.line.radial().radius(function(t){return t.x*h}).angle(function(t){return 2*Math.PI*(1-t.y)}).interpolate("cardinal"),this.pieLayout=a["default"].layout.pie().sort(null).value(function(t){return t.size}).startAngle(.5*Math.PI).endAngle(1.5*Math.PI),this.arcGenerator=a["default"].svg.arc().innerRadius(0).outerRadius(h),this.valenceTextures={},this.graphContainers={},l["default"].values(f["default"].EMOTIONS).forEach(function(t,r){var u=document.querySelector("#actions ."+t+" .graph-container"),c=a["default"].select(u).append("svg").attr("width",u.offsetWidth).attr("height",o),f=c.append("g").attr("transform","translate("+(n.left+.5*i)+","+n.top+")"),h={};h[y.CONSTRUCTIVE]=s["default"].lines().thinner(.85).orientation("6/8").stroke("black"),h[y.BOTH]=s["default"].lines().orientation("4/8").stroke("black"),h[y.DESTRUCTIVE]=s["default"].lines().thicker(.85).orientation("2/8").stroke("black"),l["default"].values(h).forEach(function(t){c.call(t)}),e.valenceTextures[t]=h,e.graphContainers[t]=f});var d=a["default"].select(t).append("svg").classed("actions-defs",!0);this.setUpDefs(d.append("defs"),h)},scaledLineGenerator:function(t,e){var n=this;return t.attr("d",function(t){return n.lineGenerator(t.paths.map(function(t){return{x:t.x*e,y:t.y*e}}))})},arcTween:function(t){var e=this.arcGenerator;t.attrTween("d",function(t){var n=a["default"].interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}})},parseActions:function(){var t=function(t){return t.toLowerCase()},e=Object.keys(f["default"].EMOTIONS).reduce(function(e,n){var r=f["default"].EMOTIONS[n],i=d["default"].emotions[r].states,a=d["default"].emotions[r].actions.map(function(t){return Object.assign({},t,{name:t.name.toLowerCase()})}).sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),o={},s=a.length;a.forEach(function(t,e){t.paths=w.map(function(t){return{x:t.x,y:t.y}}),t.rotation=90+180*(s-e-1)/(s-1),t.states=[],o[t.name]=t});var u=i.reduce(function(e,n){var r=n.name.toLowerCase(),i=n.actions.both.map(t).filter(function(t){return!!o[t]}).sort(),a=n.actions.con.map(t).filter(function(t){return!!o[t]&&!~n.actions.both.indexOf(t)}).sort(),s=n.actions.des.map(t).filter(function(t){return!!o[t]&&!~n.actions.both.indexOf(t)}).sort(),u=a.length,l=i.length,c=s.length,f=a.concat(i).concat(s),h=f.length,d=void 0,p=void 0;f=f.map(function(t,e){return d=o[t],p={name:d.name,desc:d.desc},p.paths=w.map(function(t){return{x:t.x,y:t.y}}),p.rotation=90+180*(h-e-1)/(h-1),u>e?p.valence=y.CONSTRUCTIVE:u+l>e?p.valence=y.BOTH:u+l+c>e&&(p.valence=y.DESTRUCTIVE),~d.states.indexOf(r)||d.states.push(r),p});var g=Object.keys(y).map(function(t){return{name:t,size:"CONSTRUCTIVE"===t?u:"BOTH"===t?l:"DESTRUCTIVE"===t?c:0}}).reverse(),m=void 0,v=void 0;return g.forEach(function(t){t.size&&(m?v=t:m=t)}),m&&(m.size-=.5),v&&(v.size-=.5),e[n.name.toLowerCase()]={actions:f,valenceWeights:g},e},{});return e[r]={allActions:a,actions:u},e},{});return e},setUpDefs:function(t,e){t.append("linearGradient").attr("id","actions-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",-e),t.append("linearGradient").attr("id","actions-anger-gradient").attr("xlink:href","#actions-gradient").selectAll("stop").data([{offset:"20%",color:"rgba(228, 135, 102, 0.2)"},{offset:"100%",color:"rgba(204, 28, 43, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","actions-disgust-gradient").attr("xlink:href","#actions-gradient").selectAll("stop").data([{offset:"20%",color:"rgba(0, 142, 69, 0.3)"},{offset:"66%",color:"rgba(0, 122, 61, 0.8)"},{offset:"100%",color:"rgba(0, 104, 55, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","actions-enjoyment-gradient").attr("xlink:href","#actions-gradient").selectAll("stop").data([{offset:"20%",color:"rgba(241, 196, 83, 0.8)"},{offset:"100%",color:"rgba(248, 136, 29, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","actions-fear-gradient").attr("xlink:href","#actions-gradient").selectAll("stop").data([{offset:"20%",color:"rgba(248, 58, 248, 0.1)"},{offset:"100%",color:"rgba(143, 39, 139, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","actions-sadness-gradient").attr("xlink:href","#actions-gradient").selectAll("stop").data([{offset:"20%",color:"rgba(200, 220, 240, 1.0)"},{offset:"66%",color:"rgba(30, 152, 211, 1.0)"},{offset:"100%",color:"rgba(64, 70, 164, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color})},setEmotion:function(t){var e=this;return new Promise(function(n,r){~l["default"].values(f["default"].EMOTIONS).indexOf(t)||(t="anger");var i=e.currentEmotion;e.currentEmotion=t;var o=0;i&&!function(){var e=a["default"].select(".actions-container."+i);e.classed("active",!1),e.on("transitionend",function(t){e.on("transitionend",null),e.style("transform",null),e.classed("transitioning",!1)});var n=document.querySelector("#actions .graph-container").offsetWidth,r=l["default"].values(f["default"].EMOTIONS);o=1.25*n,r.indexOf(t)<r.indexOf(i)&&(o*=-1),setTimeout(function(){e.style("transform","translateX("+-o+"px)")},1e3*g["default"].emotions.panX.delay)}();var s=a["default"].select(".actions-container."+t);s.classed("transitioning")?s.on("transitionend",null):(s.classed("transitioning",!1),s.style("transform","translateX("+o+"px)")),setTimeout(function(){s.classed("transitioning active",!0),s.style("transform","translateX(0)")},1e3*g["default"].emotions.panX.delay),e.isBackgrounded?e.renderLabels(null,!0):v["default"].setActive(!0);var u=1500;e.setStateTimeout=setTimeout(function(){f["default"].setEmotionState(null,!0)},e.isBackgrounded?0:u);var c=void 0;c=i?1e3*(g["default"].emotions.panX.delay+g["default"].emotions.panX.duration):g["default"].states.backgrounded.duration["in"],setTimeout(function(){n()},c)})},setState:function(t){if(this.isBackgrounded||this.setHighlightedAction(null),!t||t!==this.currentState){this.currentState=t;var e=void 0,n=void 0;if(t){if(e=this.actionsData[this.currentEmotion].actions[this.currentState],!e)return void console.warn('No actions found for state "'+this.currentState+'" in emotion "'+this.currentEmotion+'".');n=e.actions}else n=this.actionsData[this.currentEmotion].allActions;var r="actions-"+this.currentEmotion+"-gradient",i=(this.valenceTextures[this.currentEmotion],this.graphContainers[this.currentEmotion]),a=i.selectAll("g.action-arrow").data(n,function(t){return t.name});a.classed({constructive:function(t){return t.valence===y.CONSTRUCTIVE},both:function(t){return t.valence===y.BOTH},destructive:function(t){return t.valence===y.DESTRUCTIVE}}),a.transition().duration(g["default"].actions.update.time).attr("transform",function(t){return"rotate("+t.rotation+")"});var o=a.enter().append("g").attr("class","action-arrow").classed({constructive:function(t){return t.valence===y.CONSTRUCTIVE},both:function(t){return t.valence===y.BOTH},destructive:function(t){return t.valence===y.DESTRUCTIVE}}).attr("transform",function(t){return"rotate("+t.rotation+")"});this.isBackgrounded||o.on("mouseover",this.onActionMouseOver).on("mouseout",this.onActionMouseOut).on("click",this.onActionMouseClick),o.append("path").classed("gradient-fill",!0).attr("fill",function(t,e){return"url(#"+r+")"}).call(this.scaledLineGenerator,0),window.navigator.userAgent&&~window.navigator.userAgent.toLowerCase().indexOf("gecko")&&~window.navigator.userAgent.toLowerCase().indexOf("firefox")&&o.selectAll("path").style("mix-blend-mode","normal"),o.transition().duration(this.isBackgrounded?0:g["default"].actions.add.time).delay(this.isBackgrounded?0:function(t,e){return 50*e}).selectAll("path").call(this.scaledLineGenerator,1),a.exit().transition().duration(g["default"].actions.remove.time).remove().selectAll("path").call(this.scaledLineGenerator,0),this.isBackgrounded||(this.renderLabels(n),t||this.resetCallout())}},clearStates:function(t){this.currentEmotion&&this.graphContainers[this.currentEmotion].selectAll("g.action-arrow").on("mouseover",null).on("mouseout",null).data([]).exit().transition().duration(t).remove().selectAll("path").call(this.scaledLineGenerator,0),this.renderLabels(null),this.isBackgrounded||this.resetCallout()},setHighlightedState:function(t){var e=this;t?!function(){var n=e.actionsData[e.currentEmotion].actions[t].actions.map(function(t){return t.name}),r=e.graphContainers[e.currentEmotion],i=e.labelContainers[e.currentEmotion];r.selectAll("g.action-arrow").classed("muted",function(t,e){return!~n.indexOf(t.name)}),i.selectAll("div.label").classed("muted",function(t,e){return!~n.indexOf(t.name)})}():this.displayHighlightedAction(null)},renderLabels:function(t,e){var n=this;if(this.currentEmotion){var r=function(t){return'<span class="label-name">'+t.name.toUpperCase()+"</span>"},i=this.labelContainers[this.currentEmotion];t?!function(){var e=Math.sqrt(3),o=n.lineGenerator.radius()({x:1})+50,s=i.selectAll("div.label").data(t,function(t){return t.name});s.transition().duration(g["default"].actions.update.time).styleTween("transform",function(){return function(t,n,r){var i=a["default"].transform(r).translate,s=Math.atan2(i[1],i[0]),u=Math.PI*(t.rotation-90)/180,l=void 0;return function(t){return l=s+t*(u-s),"translate("+Math.round(o*Math.cos(l))+"px,"+Math.round(o/e*Math.sin(l))+"px)"}}}()),s.select("h4").html(r);var u=s.enter().append("div").classed("label "+n.currentEmotion,!0).style("transform",function(t){return"translate("+Math.round(o*Math.cos(Math.PI*(t.rotation-90)/180))+"px,"+Math.round(o*Math.sin(Math.PI*(t.rotation-90)/180)/e)+"px"}).style("opacity",0);u.append("div").append("h4").html(r).on("mouseover",n.onActionMouseOver).on("mouseout",n.onActionMouseOut).on("click",n.onActionMouseClick),u.transition().duration(g["default"].actions.add.time).delay(g["default"].actions.add.delay).style("opacity",1).each("end",function(){
a["default"].select(this).style("opacity",null)}),s.exit().transition().duration(g["default"].actions.remove.time).style("opacity",0).remove()}():i.selectAll("div.label").on("mouseover",null).on("mouseout",null).transition().duration(e?0:1e3).style("opacity",0).remove()}},open:function(t){var e=this;this.setBackgrounded(t&&t.inBackground,t);var n=1500;this.openTimeout=setTimeout(function(){t&&t.inBackground||e.resetCallout()},n)},close:function(){var t=this;return new Promise(function(e,n){clearTimeout(t.openTimeout),clearTimeout(t.setStateTimeout),t.clearStates(g["default"].actions.remove.time),setTimeout(function(){e()},g["default"].actions.remove.time)})},setBackgrounded:function(t,e){var n=this;return new Promise(function(r,i){n.isBackgrounded=t,n.sectionContainer.classList[t?"add":"remove"]("backgrounded"),n.sectionContainer.classList[e&&e.sectionName===f["default"].SECTIONS.TRIGGERS?"add":"remove"]("triggers"),n.sectionContainer.classList[e&&e.sectionName===f["default"].SECTIONS.MOODS?"add":"remove"]("moods"),n.renderLabels(null),r()})},applyEventListenersToEmotion:function(t,e){var n=this.graphContainers[t];Object.keys(e).forEach(function(t){n.on(t,e[t])})},setHighlightedAction:function(t,e){this.highlightedAction=t,t?(f["default"].changeCallout(this.currentEmotion,t.name,t.desc),v["default"].displayHighlightedStates(t.states)):(this.resetCallout(),v["default"].displayHighlightedStates(null)),this.displayHighlightedAction(t)},displayHighlightedAction:function(t,e){var n=t||this.highlightedAction||null,r=this.graphContainers[this.currentEmotion].selectAll("g.action-arrow"),i=this.labelContainers[this.currentEmotion].selectAll("div.label");n?(e?r.classed("muted",function(t){return e?t.valence!==e:!1}):r.classed("muted",function(t,e){return t.name!==n.name}),i.classed("muted",function(t,e){return t.name!==n.name})):(r.classed("muted",!1),i.classed("muted",!1))},onActionMouseOver:function(t,e){this.mouseOutTimeout&&clearTimeout(this.mouseOutTimeout),this.displayHighlightedAction(t,t.valence)},onActionMouseOut:function(t,e){var n=this;this.mouseOutTimeout=setTimeout(function(){n.displayHighlightedAction(null)},350)},onActionMouseClick:function(t,e){a["default"].event&&a["default"].event.stopImmediatePropagation(),this.mouseOutTimeout&&clearTimeout(this.mouseOutTimeout),this.setHighlightedAction(t)},resetCallout:function(){f["default"].changeCallout(this.currentEmotion,d["default"].metadata.actions.header,d["default"].metadata.actions.body)}},e.exports=n["default"]},{"../scss/variables.json":9,"../static/emotionsData.json":36,"./dispatcher.js":16,"./states.js":34,d3:2,lodash:4,textures:6}],14:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("d3"),a=r(i),o=t("lodash"),s=r(o),u=t("./Continent.js"),l=r(u),c=t("./dispatcher.js"),f=r(c),h=t("../static/emotionsData.json"),d=r(h),p=t("../scss/variables.json"),g=(r(p),void 0),m=void 0,v=void 0,y=void 0,w=void 0,b=0,x=[],E=["M-4.5,411c-8.6,91,46.9,170.4,135.7,192.8c98.7,24.9,179.3-26,240.4-99.1C440,422.8,501,348.5,619.2,363.8     c108,14,176.6,104.5,185.4,209.3c9,107.2-48.7,222.6-4.5,326.5c46.5,109.4,189.6,137.3,291.4,95.2     c102.7-42.5,118.7-157.7,108.1-257.3C1186.6,617,1099.8,513.4,1130,388c31.5-130.9,166.5-216.5,297.9-177.6     c126.4,37.5,192.3,171.6,213.7,292.6","M-19,377.5C-33.7,468,22,560.2,104.4,597.2c91.2,41,180.1,2.3,236.7-74c54.3-73.3,97.5-141.5,198-146.7     c120.3-6.3,180,75,276.5,124.3c90.5,46.3,196.5,17,261-59.2c53.1-62.6,76.2-152.9,146.6-199.9c130.5-86.9,323.8,14,349.8,161.8","M-49,914C5.1,789.7,110.8,597.5,276.9,647.9c85.3,25.9,137,110.7,225.5,130.3     c98.2,21.8,181.9-30.1,242.4-102.8c59.1-71,110.5-138.8,210.6-146c105.9-7.7,168,58.4,247.3,114.4c70.3,49.7,158.4,66,240.3,33.1     c67.1-27,102.9-86.2,139.1-145","M-63,798c129.5-140.2,322.7-175.4,479-60c69.6,51.4,139.3,80.6,224.2,41c88.9-41.5,138.8-126.2,133.5-222.2     c-5.3-95.3-70.6-177.1-69.7-271.2c0.8-81.2,63.4-155.3,141.5-174.4c82.1-20.2,179.3,4.3,219.9,82.1     c48.4,92.5,11.9,195.6,22.7,294.7c10.7,99,52.3,195.6,135,253.7c99.6,70.1,238.3,64.2,332-15.7","M293,1197c93.4-32.5,174.6-114.5,193.5-213.3c21.1-110.9-47.6-180.1-115.8-255.7     c-74.5-82.6-100.1-202.3-23.9-294.6c66.1-80,181.8-103.1,274.1-57.9c97.8,47.8,160.9,145.6,282.3,133.1     c131.4-13.5,162.7-105.5,225.4-200.2c57.3-86.8,171-132.7,270-87.4c81.1,37.1,120.7,138.5,191.4,185","M339.5,1196c127.7-74.3,261.1-225.6,151.6-372.5c-52.8-70.8-123.8-122.3-149.2-210.7     c-18.1-63-13.1-133.3,30.1-185.2c145.6-174.8,417-57.1,411.2,159.7c-2.7,100.8-54.9,221.4,11.5,312.2     c61.9,84.6,189.9,110.9,281.6,62.9c83.9-43.9,98.6-151.6,175-207.5c88.6-64.7,207-53.2,308.1-30.9","M225,1180C32.9,1145.6-51.7,928.8,63.1,767c69.4-97.7,202.9-122.3,305.1-62.8     c99,57.6,199.6,137.9,313.7,51.6C774.2,685.9,814,540.4,762,437c-59.3-118-104-269.3,55.6-330.3c80-30.6,189.7-24,248.4,45.3     c76.4,90.1,14.8,219.4,28.6,324.6c19.6,149.7,160.7,288,318.1,272.1c92.6-9.3,176.9-72.6,231.3-145.7","M-22,543c42.4,40.5,98,71.3,155.9,81.4c47.8,8.4,95.8-3.8,143.5,7.5c38.1,9,70.8,28.5,102.5,50.8     c54.1,38.1,101,74.5,168.8,84.7c114.1,17.3,177.3-49.9,254.4-121.7c58.5-54.5,130.4-103.9,213.2-77     c79.8,25.9,136.9,80.7,223.9,94.1c123,19,298.5-25,336.8-161.8","M199,1188c-15,0-48.5-47.8-56.8-57.7c-34.6-41.2-65.6-88.3-81.7-140.1c-41.1-132.1,53.5-260.7,182.9-294.7     c168-44.2,279.6,197.2,442.8,88.5c127-84.6,120.1-238.8,67.8-363.4c-42.4-101-46.6-241,59.7-307.2     c59.7-37.2,173.6-35.1,232.7,8.5c78.3,57.7,73.2,188,71,273.1c-2.9,111.5-43.9,254,42.2,346c101.2,108.1,298.3,72.7,423.4,32","M295,1185c58.3-15.4,117.4-44.2,160.1-87.3c96.7-97.6,47.6-227.9-20.7-327.4c-74.2-108.2-138-235-36-353.1     C503.9,295,696,335.9,751.1,485.7c49.3,134.1-83,290.3,4.4,417.9c71.9,105,255,148.1,349.4,52.6c44.4-45,69.5-109.8,73.9-172.3     c4.9-70-27.3-116.3-47.6-178.7c-29.7-91-14.8-210.7,41.6-288.7C1304.5,134.4,1591.6,296,1580,496"],M=1540,_=1157,k=3,C=180,S=.0018,L=14e3,T=6e3,A=.25,I=.5,O=20,j=20,N=30,H=120,P=!0,D=P?.5:.3,R=.3,q=.5,z=5;n["default"]={isInited:!1,isActive:!1,init:function(t){this.sectionContainer=t,this.update=this.update.bind(this),m=a["default"].select(t).append("svg").attr("width","100%").attr("height","100%").attr("xmlns:atlas","http://www.atlasofemotion.org");var e=t.offsetWidth,n=t.offsetHeight,r=void 0;y=.55*e,w=.5*n,r={w:e,h:n,centerX:y,centerY:w};var i=[{x:-.37*e,y:.27*n,size:.12*n},{x:-.19*e,y:-.02*n,size:.12*n},{x:.04*e,y:-.26*n,size:.12*n},{x:.08*e,y:.15*n,size:.12*n},{x:.32*e,y:-.11*n,size:.12*n}];g=s["default"].values(f["default"].EMOTIONS).map(function(t){return new l["default"](t,m,r,i)}),x=E.map(function(t,e){return{lastSpawnTime:-C,spawnFreq:S,pathStr:E[e],maxCount:k,elements:[]}}),v=m.append("g").classed("calm-paths",!0).attr("transform","scale("+e/M+","+n/_+")");var o=a["default"].select(this.sectionContainer).append("div").classed("visit-annex",!0);o.append("h3").text(d["default"].metadata.calm.secondary.header.toUpperCase()),o.append("p").text(d["default"].metadata.calm.secondary.body),o.on("click",function(t){var e=document.querySelector("#more-info .dropup");e&&e.classList.add("open")}),this.onContinentMouseEnter=this.onContinentMouseEnter.bind(this),this.onContinentMouseLeave=this.onContinentMouseLeave.bind(this),this.onContinentMouseUp=this.onContinentMouseUp.bind(this),this.isInited=!0},setEmotion:function(t){var e=this;return new Promise(function(t,n){e.openCallout(500),setTimeout(function(){t()},500)})},open:function(){this.setActive(!0),this.openCallout(1500),this.update()},close:function(){var t=this;return new Promise(function(e,n){t.setActive(!1),e()})},setActive:function(t){var e=this;this.isActive=t,g.forEach(function(n,r){n.d3Selection.on("mouseenter",t?e.onContinentMouseEnter:null).on("mouseleave",t?e.onContinentMouseLeave:null).on("mouseup",t?e.onContinentMouseUp:null)})},update:function(t){var e={time:t,someContinentIsHighlighted:!1};g.forEach(function(t){return t.update(e,b)}),this.spawnPaths(t),b++,this.isActive&&window.requestAnimationFrame(this.update)},spawnPaths:function(t){var e=this;x.forEach(function(n,r){b-n.lastSpawnTime<C||n.elements.length>=n.maxCount||Math.random()>n.spawnFreq||e.spawnPath(r,t)})},spawnPath:function(t,e){var n=x[t],r="calm-"+t+"-"+Math.floor(e),i=Math.floor(N+Math.random()*H),o=O+Math.random()*j,s=D+Math.random()*R,u=A+Math.random()*I,l=-q+2*Math.random()*q,c=-z+2*Math.random()*z,f=-z+2*Math.random()*z,h=void 0,d=v.append("path").attr("id",r).attr("d",n.pathStr).attr("stroke","rgb("+i+","+i+","+i+")").attr("stroke-width",o).attr("stroke-opacity",s).attr("stroke-linecap","round").attr("transform","rotate("+l+","+y+","+w+"), translate("+c+","+f+")").attr("atlas:dashlen",u);P&&(h=v.append("linearGradient").attr("id",r+"-g").attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0),h.selectAll("stop").data([{offset:"0%",color:"rgba("+i+","+i+","+i+",0.0)"},{offset:"20%",color:"rgba("+i+","+i+","+i+","+.6*s+")"},{offset:"80%",color:"rgba("+i+","+i+","+i+","+.95*s+")"},{offset:"100%",color:"rgba("+i+","+i+","+i+","+s+")"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),d.attr("stroke","url(#"+r+"-g)"));var p=L+Math.random()*T,g=d.node(),m=g.getTotalLength();d.attr("stroke-dasharray","0 "+m),d.transition().duration(u/(1+u)*p).ease("linear").attrTween("stroke-dasharray",this.tweenPathIn).each("end",function(){a["default"].select(this).attr("stroke-dasharray","0 0 "+u*m+" 0 0 "+m)}).transition().duration((1-u/(1+u))*p).ease("linear").attrTween("stroke-dasharray",this.tweenPathOut).each("end",function(){var t=this;setTimeout(function(){a["default"].select(t).remove(),n.elements.splice(n.elements.indexOf(t),1)},1)}),P&&h.transition().duration(u/(1+u)*p).ease("linear").attrTween("x1",function(){return function(t){return g.getPointAtLength(0).x}}).attrTween("y1",function(){return function(t){return g.getPointAtLength(0).y}}).attrTween("x2",function(){return function(t){return g.getPointAtLength(t*u*m).x}}).attrTween("y2",function(){return function(t){return g.getPointAtLength(t*u*m).y}}).transition().duration((1-u)/(1+u)*p).ease("linear").attrTween("x1",function(){return function(t){return g.getPointAtLength(t*(1-u)*m).x}}).attrTween("y1",function(){return function(t){return g.getPointAtLength(t*(1-u)*m).y}}).attrTween("x2",function(){return function(t){return g.getPointAtLength(u*m+t*(1-u)*m).x}}).attrTween("y2",function(){return function(t){return g.getPointAtLength(u*m+t*(1-u)*m).y}}).transition().duration(u/(1+u)*p).ease("linear").attrTween("x1",function(){return function(t){return g.getPointAtLength((1-u)*m+t*u*m).x}}).attrTween("y1",function(){return function(t){return g.getPointAtLength((1-u)*m+t*u*m).y}}).attrTween("x2",function(){return function(t){return g.getPointAtLength(m).x}}).attrTween("y2",function(){return function(t){return g.getPointAtLength(m).y}}).each("end",function(){a["default"].select(this).remove()}),n.lastSpawnTime=b,n.elements.push(g)},tweenPathIn:function(){var t=this.getTotalLength(),e=parseFloat(this.getAttribute("dashlen")),n=a["default"].interpolateString("0 "+t,e*t+" "+t);return function(t){return n(t)}},tweenPathOut:function(){var t=this.getTotalLength(),e=parseFloat(this.getAttribute("dashlen")),n=a["default"].interpolateString("0 0 "+e*t+" 0 0 "+t,"0 "+t+" "+e*t+" 0 0 "+t);return function(t){return n(t)}},onContinentMouseEnter:function(t){t.highlightLevel!==l["default"].HIGHLIGHT_LEVELS.SELECTED&&(this.setContinentHighlight(t,l["default"].HIGHLIGHT_LEVELS.HIGHLIGHTED),this.mouseLeaveTimeout&&clearTimeout(this.mouseLeaveTimeout))},onContinentMouseLeave:function(t){var e=80;this.mouseLeaveTimeout=setTimeout(function(){var e=void 0;if(g.some(function(n){return n===t||n.highlightLevel!==l["default"].HIGHLIGHT_LEVELS.HIGHLIGHTED&&n.highlightLevel!==l["default"].HIGHLIGHT_LEVELS.SELECTED?void 0:(e=n,!0)}),e){var n=e.highlightLevel===l["default"].HIGHLIGHT_LEVELS.SELECTED?l["default"].HIGHLIGHT_LEVELS.UNSELECTED:l["default"].HIGHLIGHT_LEVELS.UNHIGHLIGHTED;t&&t.highlightLevel!==l["default"].HIGHLIGHT_LEVELS.SELECTED&&(t.highlightLevel=n)}else!function(){var e=t.highlightLevel===l["default"].HIGHLIGHT_LEVELS.SELECTED?l["default"].HIGHLIGHT_LEVELS.UNSELECTED:l["default"].HIGHLIGHT_LEVELS.NONE;g.forEach(function(t){t.highlightLevel!==l["default"].HIGHLIGHT_LEVELS.SELECTED&&(t.highlightLevel=e)})}()},e)},onContinentMouseUp:function(t){console.log('TODO: implement "START AGAIN" popup when popups are implemented')},setContinentHighlight:function(t,e){var n=void 0;n=e===l["default"].HIGHLIGHT_LEVELS.SELECTED||g.some(function(t){return t.highlightLevel===l["default"].HIGHLIGHT_LEVELS.SELECTED})?l["default"].HIGHLIGHT_LEVELS.UNSELECTED:l["default"].HIGHLIGHT_LEVELS.UNHIGHLIGHTED,t&&g.forEach(function(r){r===t?r.highlightLevel=e:r.highlightLevel!==l["default"].HIGHLIGHT_LEVELS.SELECTED&&(r.highlightLevel=n)})},openCallout:function(t){var e=this;this.calloutTimeout||(this.calloutTimeout=setTimeout(function(){e.setCallout(),e.calloutTimeout=null},t))},setCallout:function(){f["default"].changeCallout(null,d["default"].metadata.calm.header,d["default"].metadata.calm.body)}},e.exports=n["default"]},{"../scss/variables.json":9,"../static/emotionsData.json":36,"./Continent.js":12,"./dispatcher.js":16,d3:2,lodash:4}],15:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("lodash"),a=r(i),o=t("d3"),s=r(o),u=t("tween.js"),l=r(u),c=t("./dispatcher.js"),f=r(c),h=t("./Circle.js"),d=(r(h),t("./Continent.js")),p=r(d),g=t("../static/emotionsData.json"),m=r(g),v=t("../scss/variables.json"),y=r(v),w=t("./popupManager.js"),b=r(w),x=void 0,E=void 0,M=void 0,_=void 0,k=0,C=void 0,S={isInited:!1,isActive:!1,init:function(t){var e=this;this.sectionContainer=t,this.update=this.update.bind(this),this.defaultEmotionHelper=this.getDefaultEmotionHelper();var n=document.createElement("div");n.id="continent-labels",t.appendChild(n),E=s["default"].select(t).append("svg").attr("width","100%").attr("height","100%");var r=t.offsetWidth,i=t.offsetHeight,o=void 0;M=.55*r,_=.5*i,o={w:r,h:i,centerX:M,centerY:_},x=a["default"].values(f["default"].EMOTIONS).map(function(t){return new p["default"](t,E,o)}),this.initLabels(n),Object.keys(this.transitions).forEach(function(t){e.transitions[t]=e.transitions[t].bind(e)}),this.onContinentMouseEnter=this.onContinentMouseEnter.bind(this),this.onContinentMouseLeave=this.onContinentMouseLeave.bind(this),this.onContinentClick=this.onContinentClick.bind(this),this.isInited=!0},setEmotion:function(t,e){var n=this;return new Promise(function(r,i){if(C){var a=x.find(function(t){return t.id===C});if(t)if(n.zoomedInContinent)n.zoomedInContinent!==e&&n.transitions.gatherContinent(n.zoomedInContinent,!0),n.transitions.gatherContinent(C),setTimeout(function(){n.transitions.scaleContinents(x.map(function(t){return t.id}),1),n.transitions.panToContinent(null,C),f["default"].changeCallout(null,m["default"].metadata.continents.header,m["default"].metadata.continents.body),r()},1e3*y["default"].continents.spread.delay.out);else{a.highlightLevel=p["default"].HIGHLIGHT_LEVELS.UNSELECTED;var o=x.find(function(e){return e.id===t});n.setContinentHighlight(o,p["default"].HIGHLIGHT_LEVELS.SELECTED),r()}else x.forEach(function(t){return t.highlightLevel=p["default"].HIGHLIGHT_LEVELS.NONE}),f["default"].changeCallout(null,m["default"].metadata.continents.header,m["default"].metadata.continents.body),n.zoomedInContinent?(n.transitions.gatherContinent(n.zoomedInContinent,!0),n.transitions.panToContinent(null,C,!0),setTimeout(function(){var t=x.map(function(t){return t.id});n.transitions.scaleContinents(t,0,void 0,0).then(function(){return n.transitions.scaleContinents(t,1)}).then(function(){r()})},1)):r()}else if(t)if(n.zoomedInContinent)n.transitions.gatherContinent(e),setTimeout(function(){n.transitions.scaleContinents(x.map(function(t){return t.id}),1),n.transitions.panToContinent(null,e),f["default"].changeCallout(null,m["default"].metadata.continents.header,m["default"].metadata.continents.body),r()},1e3*y["default"].continents.spread.delay.out);else{var o=x.find(function(e){return e.id===t});n.setContinentHighlight(o,p["default"].HIGHLIGHT_LEVELS.SELECTED),r()}else r();if(t!==e||t&&!b["default"].exists("continents",t)){var s=t?m["default"].emotions[t].continent.desc:null;b["default"].manage("continents",t,s)}C=t,n.zoomedInContinent=null})},getDefaultEmotionHelper:function(){var t=Object.keys(f["default"].EMOTIONS),e=t[Math.floor(Math.random()*t.length)];return f["default"].EMOTIONS[e]},initLabels:function(t){var e=this;x.forEach(function(n){var r=document.createElement("div");r.innerHTML='<a href="#continents:'+n.id+'"><h3>'+n.name.toUpperCase()+"</h3></a>",r.style.left=Math.round(M+n.x+n.label.x)+"px",r.style.top=Math.round(_+n.y+n.label.y)+"px",r.setAttribute("data-popuptarget","continents:"+n.id),n.name.toLowerCase()===e.defaultEmotionHelper.toLowerCase()&&r.classList.add("default-interactive-helper"),t.appendChild(r)})},open:function(t){this.setActive(!0),t&&t.firstSection?this.setContinentIntroPositions(!0):s["default"].selectAll("#continent-labels div").style("opacity",1),this.update()},close:function(){var t=this;return new Promise(function(e,n){b["default"].closeAll();var r=x.find(function(t){return t.id===C});r&&r.highlightLevel===p["default"].HIGHLIGHT_LEVELS.SELECTED?!function(){var n=1;t.transitions.scaleContinents(x.filter(function(t){return t!==r}).map(function(t){return t.id}),0),t.transitions.panToContinent(r.id),setTimeout(function(){n=t.transitions.focusZoomedOutContinent(r.id)},1e3*y["default"].continents.spread.delay["in"]),setTimeout(function(){t.transitions.spreadFocusedContinent(r.id,n)},1e3*y["default"].continents.spread.delay["in"]),setTimeout(function(){t.setActive(!1),t.zoomedInContinent=r.id,e()},1e3*(y["default"].continents.spread.delay["in"]+y["default"].continents.spread.duration["in"]))}():e()})},setActive:function(t){var e=this;this.isActive=t,x.forEach(function(n,r){n.d3Selection.on("mouseenter",t?e.onContinentMouseEnter:null).on("mouseleave",t?e.onContinentMouseLeave:null).on("click",t?e.onContinentClick:null,!0)}),s["default"].select("#main").on("click",t?this.onBackgroundClick:null,!1)},setContinentIntroPositions:function(t){var e=this.sectionContainer.offsetWidth,n=this.sectionContainer.offsetHeight,r=Math.sqrt(e*e+n*n)/2;x.forEach(function(e){t?e.addTween({introSpreadRad:e.introSpreadMaxRad*r},1e3*y["default"].continents.introSpread.duration.out,1e3*y["default"].continents.introSpread.delay.out,l["default"].Easing.Cubic.InOut):(e.addTween({introSpreadRad:0},1e3*y["default"].continents.introSpread.duration["in"],1e3*y["default"].continents.introSpread.delay["in"],l["default"].Easing.Cubic.InOut),f["default"].changeCallout(null,m["default"].metadata.continents.header,m["default"].metadata.continents.body),s["default"].selectAll("#continent-labels div").style("opacity",1))})},update:function(t){this.tweens&&a["default"].values(this.tweens).forEach(function(e){e.update(t)});var e={time:t,someContinentIsHighlighted:x.some(function(t){return t.isHighlighted})};x.forEach(function(t){return t.update(e,k)}),k++,this.isActive&&window.requestAnimationFrame(this.update)},transitions:{focusZoomedOutContinent:function(t){var e=x.find(function(e){return e.id===t}),n=.45*E.node().getBoundingClientRect().height/e.size;return e.addTween({scaleX:n,scaleY:n},1e3*y["default"].continents.spread.duration["in"],0,l["default"].Easing.Quadratic.InOut),n},focusZoomedInContinent:function(t){},panToContinent:function(t,e,n){this.panTweenTimeout&&clearTimeout(this.panTweenTimeout);var r=_-(this.sectionContainer.offsetHeight*(parseInt(y["default"].states.containers.bottom.replace("%",""))/100)+50),i=x.find(function(e){return e.id===t}),a=x.find(function(t){return t.id===e}),o={x:M-(a?a.x:0),y:_-(a?a.y-r:0)},u=M,c=_;i&&(u-=i.x,c-=i.y-r);var f=void 0,h=void 0,d=void 0,p=void 0;n?(f=0,h=0,d=l["default"].Easing.Linear.None,p=l["default"].Easing.Linear.None):t?(f=1e3*y["default"].continents.panX.duration["in"],h=1e3*y["default"].continents.panY.duration["in"],d=l["default"].Easing.Quadratic.InOut,p=l["default"].Easing.Quadratic.InOut):(f=1e3*y["default"].continents.panX.duration.out,h=1e3*y["default"].continents.panY.duration.out,d=l["default"].Easing.Quadratic.In,p=l["default"].Easing.Quadratic.Out),this.addTween(o,{x:u},f,d).onUpdate(function(){var t=this;x.forEach(function(e){e.centerX=t.x})}).start(),this.addTween(o,{y:c},h,p).onUpdate(function(){var t=this;x.forEach(function(e){e.centerY=t.y})}).start(),s["default"].selectAll("#continent-labels div").style("opacity",i?0:1)},spreadFocusedContinent:function(t,e){var n=x.find(function(e){return e.id===t});n.spreadCircles(E.node(),e)},gatherContinent:function(t,e){var n=x.find(function(e){return e.id===t});n.gatherCircles(e)},scaleContinents:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?1200:arguments[3],i=r;return n&&Object.keys(n).length&&(i=r+(a["default"].max(a["default"].values(n))||0)),new Promise(function(a,o){var s=x.filter(function(e){return~t.indexOf(e.id)});s.forEach(function(t){(e&&t.spawnConfig.freq<0||!e&&t.spawnConfig.freq>0)&&(t.spawnConfig.freq*=-1),t.addTween({scaleX:e,scaleY:e},r+(n[t.id]||0),0,l["default"].Easing.Quadratic.InOut)}),setTimeout(function(){a()},i)})}},addTween:function(t,e,n){var r=this,i=arguments.length<=3||void 0===arguments[3]?l["default"].Easing.Linear.None:arguments[3];this.tweens||(this.tweens={});var a=Object.keys(e).sort().join(",");return this.tweens[a]&&this.tweens[a].stop(),this.tweens[a]=new l["default"].Tween(t).to(e,n).onComplete(function(){delete r.tweens[a]}).easing(i),this.tweens[a]},onContinentMouseEnter:function(t){t.highlightLevel!==p["default"].HIGHLIGHT_LEVELS.SELECTED&&(this.setContinentHighlight(t,p["default"].HIGHLIGHT_LEVELS.HIGHLIGHTED),this.mouseLeaveTimeout&&clearTimeout(this.mouseLeaveTimeout))},onContinentMouseLeave:function(t){var e=80;this.mouseLeaveTimeout=setTimeout(function(){var e=void 0;if(x.some(function(n){return n===t||n.highlightLevel!==p["default"].HIGHLIGHT_LEVELS.HIGHLIGHTED&&n.highlightLevel!==p["default"].HIGHLIGHT_LEVELS.SELECTED?void 0:(e=n,!0)}),e){var n=e.highlightLevel===p["default"].HIGHLIGHT_LEVELS.SELECTED?p["default"].HIGHLIGHT_LEVELS.UNSELECTED:p["default"].HIGHLIGHT_LEVELS.UNHIGHLIGHTED;t&&t.highlightLevel!==p["default"].HIGHLIGHT_LEVELS.SELECTED&&(t.highlightLevel=n)}else!function(){var e=t.highlightLevel===p["default"].HIGHLIGHT_LEVELS.SELECTED?p["default"].HIGHLIGHT_LEVELS.UNSELECTED:p["default"].HIGHLIGHT_LEVELS.NONE;x.forEach(function(t){t.highlightLevel!==p["default"].HIGHLIGHT_LEVELS.SELECTED&&(t.highlightLevel=e)})}()},e)},onContinentClick:function(t){s["default"].event&&s["default"].event.stopImmediatePropagation(),f["default"].navigate(f["default"].SECTIONS.CONTINENTS,t.id)},onBackgroundClick:function(){f["default"].navigate(f["default"].HOME)},setContinentHighlight:function(t,e){var n=void 0;n=e===p["default"].HIGHLIGHT_LEVELS.SELECTED||x.some(function(t){return t.highlightLevel===p["default"].HIGHLIGHT_LEVELS.SELECTED})?p["default"].HIGHLIGHT_LEVELS.UNSELECTED:p["default"].HIGHLIGHT_LEVELS.UNHIGHLIGHTED,t&&x.forEach(function(r){r===t?r.highlightLevel=e:r.highlightLevel!==p["default"].HIGHLIGHT_LEVELS.SELECTED&&(r.highlightLevel=n)})}};n["default"]=S,e.exports=n["default"]},{"../scss/variables.json":9,"../static/emotionsData.json":36,"./Circle.js":11,"./Continent.js":12,"./dispatcher.js":16,"./popupManager.js":33,d3:2,lodash:4,"tween.js":8}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("events"),i={EVENTS:{NAVIGATE:"navigate",NAVIGATE_COMPLETE:"navigateComplete",CHANGE_EMOTION_STATE:"changeEmotionState",CHANGE_CALLOUT:"changeCallout",MODAL_CHANGE:"modalChange"},SECTIONS:{CONTINENTS:"continents",STATES:"states",ACTIONS:"actions",TRIGGERS:"triggers",MOODS:"moods",CALM:"calm",MORE:"more"},HOME:"home",EMOTIONS:{ANGER:"anger",FEAR:"fear",DISGUST:"disgust",SADNESS:"sadness",ENJOYMENT:"enjoyment"},DEFAULT_EMOTION:"anger",MORE_INFO:{title:"More Information",items:[{label:"The Annex",page:"annex",pageName:"Annex"},{label:"About",page:"about"},{label:"Donate",page:"donate"},{label:"Further Reading",page:"further"}]},ANNEX_SECTIONS:["annex-episode-timeline","annex-partially-charted","annex-traits","annex-signals","annex-psychopathologies","annex-scientific-basis","annex-impediment-antidote","annex-intrinsic-remedial"],ANNEX_DATA_2_PAGE:{psychopathology:"annex-psychopathologies","personality-trait":"annex-traits",signals:"annex-signals","partially-charted":"annex-partially-charted","scientific-basis":"annex-scientific-basis","triggers-timeline":"annex-episode-timeline","impediment-antidote":"annex-impediment-antidote","intrinsic-or-intentional":"annex-intrinsic-remedial"},navigate:function(t,e,n){var r=e||n;if(t&&!this.validateSection(t)&&t!==this.HOME)throw new Error('Invalid section "'+t+'".');if(e&&!this.validateEmotion(e))throw new Error('Invalid emotion "'+e+'".');this.emit(this.EVENTS.NAVIGATE,t,r)},changeCallout:function(t,e,n){this.emit(this.EVENTS.CHANGE_CALLOUT,t,e,n)},setEmotionState:function(t,e){this.emit(this.EVENTS.CHANGE_EMOTION_STATE,t,e)},validateSection:function(t){var e=this;return Object.keys(this.SECTIONS).some(function(n){return e.SECTIONS[n]===t})},validateEmotion:function(t){var e=this;return Object.keys(this.EMOTIONS).some(function(n){return e.EMOTIONS[n]===t})},validateMorePage:function(t){var e=this;return t?this.MORE_INFO.items.some(function(n){return n.page===t?!0:0===t.indexOf("annex")&&e.ANNEX_SECTIONS.indexOf(t)>-1?!0:!1}):!1},getMorePageName:function(t){if(0===t.indexOf("annex")&&this.ANNEX_SECTIONS.indexOf(t)>-1)return"Annex";var e=this.MORE_INFO.items.filter(function(e){return e.page===t});return e.length?e[0].pageName||e[0].label:""}};Object.assign(i,r.EventEmitter.prototype),n["default"]=i,e.exports=n["default"]},{events:3}],17:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=t("./App.js"),a=r(i);(0,a["default"])(document.getElementById("main"))},{"./App.js":10}],18:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("d3"),a=r(i),o=t("lodash"),s=r(o),u=t("./dispatcher.js"),l=r(u),c=t("../static/emotionsData.json"),f=r(c),h=t("../scss/variables.json"),d=r(h),p=t("./states.js"),g=r(p),m=t("./actions.js"),v=r(m);n["default"]={isInited:!1,currentEmotion:null,moodsData:null,backgroundSections:[g["default"],v["default"]],init:function(t){this.sectionContainer=t,this.onElementOver=this.onElementOver.bind(this),this.onElementOut=this.onElementOut.bind(this),this.onElementClick=this.onElementClick.bind(this),this.onBackgroundClick=this.onBackgroundClick.bind(this),this.overlayContainer=document.createElement("div"),this.overlayContainer.id="moods-overlay-container",t.appendChild(this.overlayContainer),this.isInited=!0},setEmotion:function(t){var e=this;return new Promise(function(n,r){~s["default"].values(l["default"].EMOTIONS).indexOf(t)||(t="anger");var i=e.currentEmotion;e.currentEmotion=t,e.overlayContainer.removeAttribute("style"),i&&e.overlayContainer.classList.remove(i),e.overlayContainer.classList.add(e.currentEmotion),g["default"].applyEventListenersToEmotion(t,{mouseover:e.onElementOver,mouseout:e.onElementOut,click:e.onElementClick}),v["default"].applyEventListenersToEmotion(t,{mouseover:e.onElementOver,mouseout:e.onElementOut,click:e.onElementClick}),e.openCallout(500),setTimeout(function(){n()},d["default"].states.backgrounded.duration["in"])})},open:function(){this.openCallout(1500)},close:function(){var t=this;return g["default"].applyEventListenersToEmotion(this.currentEmotion,{mouseover:null,mouseout:null,click:null}),v["default"].applyEventListenersToEmotion(this.currentEmotion,{mouseover:null,mouseout:null,click:null}),document.querySelector("#main").removeEventListener("click",this.onBackgroundClick,!0),new Promise(function(e,n){clearTimeout(t.calloutTimeout),t.overlayContainer.classList.remove("visible"),e()})},onElementOver:function(t){t||(t=a["default"].event),t.stopImmediatePropagation(),this.overlayContainer.classList.add("visible"),document.querySelector("#main").removeEventListener("click",this.onBackgroundClick,!0),clearTimeout(this.mouseOutTimeout)},onElementOut:function(t){var e=this;t||(t=a["default"].event),t.stopImmediatePropagation(),this.mouseOutTimeout=setTimeout(function(){e.overlayContainer.classList.remove("visible"),document.querySelector("#main").addEventListener("click",e.onBackgroundClick,!0)},100)},onElementClick:function(t){t||(t=a["default"].event),t.stopImmediatePropagation(),this.overlayContainer.classList.add("visible"),this.setCallout(!0)},onBackgroundClick:function(t){t.stopImmediatePropagation(),this.setCallout(!1)},openCallout:function(t){var e=this;this.calloutTimeout||(this.calloutTimeout=setTimeout(function(){e.setCallout(!1),e.calloutTimeout=null},t))},setCallout:function(t){if(t){var e=f["default"].emotions[this.currentEmotion].moods[0];l["default"].changeCallout(this.currentEmotion,e.name,e.desc)}else l["default"].changeCallout(this.currentEmotion,f["default"].metadata.moods.header,f["default"].metadata.moods.body)}},e.exports=n["default"]},{"../scss/variables.json":9,"../static/emotionsData.json":36,"./actions.js":13,"./dispatcher.js":16,"./states.js":34,d3:2,lodash:4}],19:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.about,this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){if(this.wrapper){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div");t.classList.add("tb"),e.classList.add("tb-row"),n.classList.add("tb-row"),e.appendChild(u.makeBlock(this.data.title,this.data.desc));var r=document.createElement("div");r.classList.add("sub-blocks"),this.data.subsections.forEach(function(t){r.appendChild(u.makeBlock(t.title,t.desc))}),n.appendChild(r),n.appendChild(r),t.appendChild(e),t.appendChild(n),this.wrapper.appendChild(t)}},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active"),this.wrapper&&document.querySelector(".sub-blocks").scrollTo(0,0)},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],20:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=i(a),s=t("lodash"),u=(i(s),t("smoothscroll")),l=i(u),c=t("./utils.js"),f=r(c),h=t("../dispatcher.js"),d=(i(h),t("../../scss/variables.json")),p=(i(d),[{header:"Step 1",name:"Pre-Condition",nodes:[]},{header:"Step 2",name:"Trigger",scrollTo:"trigger",nodes:[{name:"Event",outward:!0,above:!0,scrollTo:"event"},{name:"Perception",outward:!0,above:!1,scrollTo:"perception"}]},{header:"Step 3",name:"State",scrollTo:"state",nodes:[{name:"Physical Changes",outward:!1,above:!0},{name:"Psychological Changes",
outward:!1,above:!1}]},{header:"Step 4",name:"Response",nodes:[]},{header:"Step 5",name:"Post-Condition",nodes:[]}]);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.annex["triggers-timeline"],this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){if(this.wrapper){this.sectionContainer.appendChild(f.makeAnnexBackNav(this.data.title)),this.makeChart();var t=document.createElement("div");t.classList.add("timeline-content"),this.data.content.forEach(function(e){var n=document.createElement("p");n.textContent=e.txt,e.id&&(n.id="tl-content-"+e.id),t.appendChild(n)}),this.wrapper.appendChild(t)}},handleChartClick:function(t){if(t.scrollTo){var e=o["default"].select("#tl-content-"+t.scrollTo);if(!e)return;var n=this.sectionContainer.offsetHeight,r=e.node().getBoundingClientRect().top+this.wrapper.scrollTop;(0,l["default"])(r-n/2,500,null,this.wrapper)}},makeChart:function(){var t=this,e="#D4B49B",n="#CBC2BB",r="#B4ABA4",i=60,a=10,s=i/2,u=this.sectionContainer.offsetWidth/p.length,l=this.wrapper.offsetHeight-100,c=(u-i)/2,f=(l-3*i)/3/2,h=Math.min(c,f);u=2*h+i;var d=o["default"].svg.arc().outerRadius(h).innerRadius(h-15),g=o["default"].svg.arc().outerRadius(h),m=o["default"].layout.pie().sort(null).padAngle(.05).value(function(t){return t}),v=o["default"].select(this.wrapper).append("svg");v.attr("width",p.length*u).attr("height",l),this.wrapper.style.width=p.length*u+"px";var y=v.append("defs"),w=y.append("marker").attr("id","arrow").attr("markerWidth",6).attr("markerHeight",6).attr("viewBox","-3 -3 6 6").attr("refX",-1).attr("refY",0).attr("markerUnits","strokeWidth").attr("orient","auto");w.append("polygon").attr("points","-1,0 -3,3 3,0 -3,-3").attr("fill",r);var b=v.append("g").attr("transform","translate(0,0)");b.append("rect").attr("width",u*p.length).attr("height",l).attr("y",0).attr("x",0).attr("fill","#E8D6C7").attr("opacity",1).attr("stroke","#E8D6C7"),b.append("rect").attr("width",2*u).attr("height",l-10-40).attr("y",40).attr("x",2*u).attr("fill",n).attr("opacity",.3).attr("stroke",n),b.append("text").attr("class","selective-text").attr("x",2*u+u/2).attr("y",l-15).text("Selective Filter Period");var x=b.selectAll(".section").data(p),E=x.enter().append("g").attr("class","section").attr("transform",function(t,e){var n=e*u;return"translate("+n+", 0)"});E.append("g").attr("class","main").attr("transform",function(t,e){var n=u/2,r=l/2;return p[e-1]&&p[e-1].nodes.length?"translate("+n+", "+r+") rotate(30)":"translate("+n+", "+r+") rotate(-30)"}),E.filter(function(t){return t.scrollTo}).append("circle").attr("class","eventable").attr("cx",u/2).attr("cy",l/2).attr("r",h).style("opacity",0).on("click",t.handleChartClick.bind(t)),E.append("text").attr("x",u/2).attr("y",l/2).attr("dy",3).text(function(t){return t.name}),E.append("text").attr("x",u/2).attr("y",20).attr("dy",3).text(function(t){return t.header});var M=x.select(".main").selectAll(".arcs").data(function(t,r){var i=m(t.nodes.length?[33,33,33]:[100]);return 1===i.length?i[0].clr="#fff":p[r-1]&&p[r-1].nodes.length?(i[0].clr="#fff",i[1].clr=n,i[2].clr=e):(i[0].clr=e,i[1].clr=n,i[2].clr="#fff"),i}),_=M.enter().append("g").attr("class","arcs");_.append("path").attr("d",function(t){return 100===t.data?g(t):d(t)}).attr("fill",function(t){return t.clr});var k=x.selectAll(".node").data(function(t,e){return t.nodes}),C=k.enter().append("g").attr("class","node").attr("transform",function(t,e){var n=u/2,r=t.above?l/2-(2*h+s):l/2+(2*h+s);return"translate("+n+", "+r+")"});C.append("circle").attr("r",h).attr("cx",0).attr("cy",0).attr("fill",function(t,r){return t.above?e:n}).filter(function(t){return t.scrollTo}).classed("eventable",!0).on("click",t.handleChartClick.bind(t)),C.append("text").attr("dy",3).text(function(t){return t.name}),C.append("line").attr("x1",function(t,e){return 0}).attr("x2",function(t,e){return 0}).attr("y1",function(t,e){return t.above?t.outward?h:h+s:t.outward?-h:-(h+s)}).attr("y2",function(t,e){var n=s-a;return t.above?t.outward?h+n:h+a:t.outward?-(h+n):-(h+a)}).attr("marker-end","url(#arrow)"),b.selectAll(".main-lines").data(p).enter().append("line").attr("class","main-lines").attr("x1",function(t,e){return p[e+1]?e*u+u/2+h:void 0}).attr("x2",function(t,e){if(p[e+1]){var n=(e+1)*u+u/2-h;return n-a}}).attr("y1",function(t,e){return p[e+1]?l/2:void 0}).attr("y2",function(t,e){return p[e+1]?l/2:void 0}).attr("marker-end","url(#arrow)"),b.selectAll(".header-lines").data(p).enter().append("line").attr("class","header-lines").style("display",function(t,e){return e>0&&e<p.length?"block":"none"}).attr("x1",function(t,e){return e*u-15}).attr("x2",function(t,e){return e*u+15}).attr("y1",function(t,e){return 20}).attr("y2",function(t,e){return 20}).attr("marker-end","url(#arrow)");var S=(p.length-1)*u+u/2,L=l/2+h,T=u/2,A="M "+S+" "+L+" V "+(l-10)+" H "+T+" V "+(L+a);b.append("path").attr("class","reset-path").attr("d",A).attr("marker-end","url(#arrow)")},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4,smoothscroll:5}],21:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.annex["impediment-antidote"],this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){this.wrapper&&(this.sectionContainer.appendChild(u.makeAnnexBackNav(this.data.title)),this.wrapper.appendChild(u.makeTable(this.data.desc,this.data.emotions)))},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],22:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.annex["intrinsic-or-intentional"],this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){this.wrapper&&(this.sectionContainer.appendChild(u.makeAnnexBackNav(this.data.title)),this.wrapper.appendChild(u.makeTable(this.data.desc,this.data.emotions)))},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],23:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.annex["partially-charted"],this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){this.wrapper&&(this.sectionContainer.appendChild(u.makeAnnexBackNav(this.data.title)),this.wrapper.appendChild(u.makeTable(this.data.desc,this.data.emotions)))},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],24:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.annex.psychopathology,this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){this.wrapper&&(this.sectionContainer.appendChild(u.makeAnnexBackNav(this.data.title)),this.wrapper.appendChild(u.makeTable(this.data.desc,this.data.emotions)))},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],25:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.annex["scientific-basis"],this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){this.wrapper&&(this.sectionContainer.appendChild(u.makeAnnexBackNav(this.data.title)),this.wrapper.appendChild(u.makeTable(this.data.desc,[])))},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],26:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.annex.signals,this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){this.wrapper&&(this.sectionContainer.appendChild(u.makeAnnexBackNav(this.data.title)),this.wrapper.appendChild(u.makeTable(this.data.desc,this.data.emotions)))},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],27:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.annex["personality-trait"],this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){this.wrapper&&(this.sectionContainer.appendChild(u.makeAnnexBackNav(this.data.title)),this.wrapper.appendChild(u.makeTable(this.data.desc,this.data.emotions)))},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],28:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=(r(s),t("../dispatcher.js")),l=i(u),c=t("../../scss/variables.json");i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.annex,this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},makeButton:function(t){var e=document.createElement("button");return e.textContent=t.title,e.setAttribute("data-annexkey",t.key),e.addEventListener("click",function(e){l["default"].navigate(l["default"].SECTIONS.MORE,null,l["default"].ANNEX_DATA_2_PAGE[t.key])}),e},setContent:function(){var t=this;if(this.wrapper){var e=Object.keys(this.data).map(function(e){return{key:e,title:t.data[e].title}});e.sort(function(t,e){return t.title<e.title?-1:t.title>e.title?1:0});var n=document.createElement("h4");n.classList.add("annex-title"),n.textContent="Welcome to the Annex, home to additional information regarding emotions research.",this.wrapper.appendChild(n);var r=document.createElement("p");r.classList.add("annex-helper"),r.textContent="Explore the topics below to learn more:",this.wrapper.appendChild(r);var i=document.createElement("ul");i.classList.add("annex-btn-list"),e.forEach(function(e){if(e.key&&e.title){var n=document.createElement("li");n.appendChild(t.makeButton(e)),i.appendChild(n)}}),this.wrapper.appendChild(i)}},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],29:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e.donate,this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},setContent:function(){if(this.wrapper){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div");t.classList.add("tb"),e.classList.add("tb-row"),n.classList.add("tb-row"),e.appendChild(u.makeBlock(this.data.title,this.data.desc));var r=document.createElement("div");r.classList.add("sub-blocks"),r.appendChild(u.makeLinkBlock(this.data.link)),n.appendChild(r),t.appendChild(e),t.appendChild(n),this.wrapper.appendChild(t)}},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],30:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=t("d3"),o=(i(a),t("lodash")),s=(i(o),t("./utils.js")),u=r(s),l=t("../dispatcher.js"),c=(i(l),t("../../scss/variables.json"));i(c);n["default"]={isInited:!1,currentEmotion:null,wrapper:null,init:function(t,e){this.data=e["further-reading"],this.sectionContainer=t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.sectionContainer.appendChild(this.wrapper),this.setContent(),this.isInited=!0},makeLink:function(t,e){var n=document.createElement("li"),r=document.createElement("a");return r.href=t,r.target="_blank",r.innerHTML=e,n.appendChild(r),n},setContent:function(){var t=this;if(this.wrapper){var e=document.createElement("div"),n=document.createElement("div");e.classList.add("tb"),n.classList.add("tb-row"),n.appendChild(u.makeBlock(this.data.title,this.data.desc)),e.appendChild(n),this.data.links&&this.data.links.length&&!function(){var n=document.createElement("div");n.classList.add("tb-row");var r=document.createElement("div");r.classList.add("sub-blocks");var i=document.createElement("ul");i.classList.add("block","link-list"),t.data.links.forEach(function(e){i.appendChild(t.makeLink(e.link,e.desc))}),r.appendChild(i),n.appendChild(r),e.appendChild(n)}(),this.wrapper.appendChild(e)}},setEmotion:function(t){return new Promise(function(t,e){t()})},open:function(){this.sectionContainer.classList.add("active")},close:function(){return this.sectionContainer.classList.remove("active"),new Promise(function(t,e){t()})}},e.exports=n["default"]},{"../../scss/variables.json":9,"../dispatcher.js":16,"./utils.js":31,d3:2,lodash:4}],31:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=document.createElement("div"),r=document.createElement("h3"),i=document.createElement("p");return n.classList.add("block"),r.classList.add("title"),i.classList.add("desc"),r.innerHTML=t,i.innerHTML=e,n.appendChild(r),n.appendChild(i),n}function a(t){var e=document.createElement("div"),n=document.createElement("h3"),r=document.createElement("a");return e.classList.add("block","link"),n.classList.add("title"),r.href=t,r.target="_blank",r.innerHTML=t,n.appendChild(r),e.appendChild(n),e}function o(t){var e=document.createElement("div"),n=document.createElement("button");return e.classList.add("annex-back-nav"),n.textContent=t,e.appendChild(n),n.addEventListener("click",function(t){l["default"].navigate("more",null,"annex")}),e}function s(t,e,n){var r=document.createElement("div");r.classList.add("annex-table-wrapper");var i=document.createElement("table");if(n||i.classList.add("annex-table"),t){var a=document.createElement("tr");a.classList.add("title");var o=document.createElement("td");o.setAttribute("colspan",2),o.textContent=t,a.appendChild(o),i.appendChild(a)}return e.forEach(function(t){var e=document.createElement("tr");n||e.classList.add("content");var r=document.createElement("td"),a=document.createElement("td");if(n||r.classList.add("upper"),r.textContent=t.name,t.children){var o=s(t.desc,t.children,!0);a.classList.add("has-sub-table"),a.appendChild(o)}else a.textContent=t.desc;e.appendChild(r),e.appendChild(a),i.appendChild(e)}),n?i:(r.appendChild(i),r)}Object.defineProperty(n,"__esModule",{value:!0}),n.makeBlock=i,n.makeLinkBlock=a,n.makeAnnexBackNav=o,n.makeTable=s;var u=t("../dispatcher.js"),l=r(u)},{"../dispatcher.js":16}],32:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("d3"),a=(r(i),t("lodash")),o=(r(a),t("./dispatcher.js")),s=r(o),u=t("../static/secondaryData.json"),l=r(u),c=t("../scss/variables.json"),f=(r(c),t("./more-pages/about.js")),h=r(f),d=t("./more-pages/donate.js"),p=r(d),g=t("./more-pages/further.js"),m=r(g),v=t("./more-pages/annex.js"),y=r(v),w=t("./more-pages/annex-episode-timeline.js"),b=r(w),x=t("./more-pages/annex-impediment-antidote.js"),E=r(x),M=t("./more-pages/annex-intrinsic-remedial.js"),_=r(M),k=t("./more-pages/annex-partially-charted.js"),C=r(k),S=t("./more-pages/annex-psychopathologies.js"),L=r(S),T=t("./more-pages/annex-scientific-basis.js"),A=r(T),I=t("./more-pages/annex-signals.js"),O=r(I),j=t("./more-pages/annex-traits.js"),N=r(j);n["default"]={isInited:!1,currentEmotion:null,currentPage:null,previousPage:null,previousSection:null,pages:{},containers:{},init:function(t){this.sectionContainer=t,this.initContainers(),this.initialPages(),document.querySelector("#more-close").addEventListener("click",this.onCloseButtonClicked.bind(this)),this.isInited=!0},setPreviousSection:function(t){this.previousSection=t},setEmotion:function(t,e,n,r){var i=this;return console.log("Set Emotion: ",t,e),this.previousPage=this.currentPage,this.currentPage=n,this.currentEmotion=t,new Promise(function(t,e){i.previousPage&&i.pages[i.previousPage].close(),i.currentPage&&i.pages[i.currentPage]&&(i.pages[i.currentPage].isInited||i.pages[i.currentPage].init(i.containers[i.currentPage],l["default"]),i.pages[i.currentPage].open(),i.pages[i.currentPage].setEmotion()),t()})},open:function(){this.toggleMoreClass(!0)},close:function(){return this.toggleMoreClass(!1),new Promise(function(t,e){t()})},onCloseButtonClicked:function(){s["default"].navigate(this.previousSection,this.currentEmotion,null)},initContainers:function(){var t=this,e=void 0;s["default"].MORE_INFO.items.forEach(function(n){e=document.createElement("div");"more-"+n.page;e.id="more-"+n.page,e.classList.add("more-child"),t.sectionContainer.appendChild(e),t.containers[n.page]=e}),s["default"].ANNEX_SECTIONS.forEach(function(n){e=document.createElement("div");e.id="more-"+n,e.classList.add("more-child"),t.sectionContainer.appendChild(e),t.containers[n]=e})},initialPages:function(){this.pages.about=h["default"],this.pages.donate=p["default"],this.pages.further=m["default"],this.pages.annex=y["default"],this.pages["annex-episode-timeline"]=b["default"],this.pages["annex-partially-charted"]=C["default"],this.pages["annex-traits"]=N["default"],this.pages["annex-signals"]=O["default"],this.pages["annex-psychopathologies"]=L["default"],this.pages["annex-scientific-basis"]=A["default"],this.pages["annex-impediment-antidote"]=E["default"],this.pages["annex-intrinsic-remedial"]=_["default"]},toggleMoreClass:function(t){var e=document.querySelector("body");e.classList;t?e.classList.add("more-on"):e.classList.remove("more-on")}},e.exports=n["default"]},{"../scss/variables.json":9,"../static/secondaryData.json":37,"./dispatcher.js":16,"./more-pages/about.js":19,"./more-pages/annex-episode-timeline.js":20,"./more-pages/annex-impediment-antidote.js":21,"./more-pages/annex-intrinsic-remedial.js":22,"./more-pages/annex-partially-charted.js":23,"./more-pages/annex-psychopathologies.js":24,"./more-pages/annex-scientific-basis.js":25,"./more-pages/annex-signals.js":26,"./more-pages/annex-traits.js":27,"./more-pages/annex.js":28,"./more-pages/donate.js":29,"./more-pages/further.js":30,d3:2,lodash:4}],33:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){r(this,t),this.selected=null,this.template=null,this.popups={},this.init()}return i(t,[{key:"init",value:function(){this.template||this.initTemplate(),this.template.classList.add("popup-template")}},{key:"open",value:function(t){this.closeAll();var e=this.template.cloneNode(!0);e.querySelector(".body").textContent=t.desc,e.querySelector(".close").addEventListener("click",this.onPopupCloseButtonClick.bind(this,t.id),!1),t.target.appendChild(e),t.target.classList.add("popped"),t.popup=e,this.popups[t.id]=t,setTimeout(function(){e.style.opacity=1},1);var n=e.offsetWidth+100;n=Math.min(n,250),e.style.width=n+"px"}},{key:"resetPopup",value:function(t){if(this.popups[t]){var e=this.popups[t].target,n=this.popups[t].popup;n.removeEventListener("transitionend",this.onTransitionOut,!1),n.classList.remove("transition-out"),e.classList.add("popped"),n.style.opacity=1}}},{key:"onTransitionOut",value:function(t,e){if(this.popups[t]&&!this.popups[t].abortTransition){var n=this.popups[t].target,r=this.popups[t].popup;r.removeEventListener("transitionend",this.onTransitionOut,!1),r.querySelector(".close").removeEventListener("click",this.onPopupCloseButtonClick,!1),n.removeChild(r),delete this.popups[t]}}},{key:"close",value:function(t){if("active"!==this.popups[t].state){var e=this.popups[t].target,n=this.popups[t].popup;n.classList.add("transition-out"),e.classList.remove("popped"),n.addEventListener("transitionend",this.onTransitionOut.bind(this,t),!1),n.style.opacity=0}}},{key:"closeAll",value:function(){var t=this;Object.keys(this.popups).forEach(function(e){t.popups[e].state="",t.close(e)})}},{key:"onPopupCloseButtonClick",value:function(t,e){e.preventDefault(),e.stopPropagation(),this.popups[t].state="",this.closeAll()}},{key:"initTemplate",value:function(){this.template=document.createElement("div");var t=document.createElement("button");t.classList.add("close"),t.innerHTML="&times;";var e=document.createElement("h3");e.classList.add("title");var n=document.createElement("p");n.classList.add("body"),this.template.appendChild(t),this.template.appendChild(e),this.template.appendChild(n),document.body.appendChild(this.template)}},{key:"makeID",value:function(t,e){return t+":"+e}},{key:"getTarget",value:function(t){return document.querySelector('[data-popuptarget="'+t+'"]')}},{key:"manage",value:function(t,e,n){var r=this.makeID(t,e);Object.keys(this.popups);if(e&&t){if(this.popups[r]){if("active"===this.popups[r].state)return;this.abortTransition=!0,this.resetPopup(r)}if(this.popups[r]&&"active"===this.popups[r].state)return;var i=this.getTarget(r);if(!i)return;this.selected=r,this.open({target:i,desc:n,id:r,state:"active"})}else e||(this.selected=null,this.closeAll())}},{key:"exists",value:function(t,e){var n=this.makeID(t,e);return this.popups[n]?!0:!1}}]),t}(),o=new a;n["default"]=o,e.exports=n["default"]},{}],34:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("d3"),a=r(i),o=t("lodash"),s=r(o),u=t("./dispatcher.js"),l=r(u),c=t("../static/emotionsData.json"),f=r(c),h=t("../scss/variables.json"),d=r(h),p=1e3;n["default"]={isInited:!1,emotions:["anger","fear","disgust","sadness","enjoyment"],sectionContainer:null,labelContainers:null,graphContainers:null,xScale:null,yScale:null,areaGenerators:null,transitions:null,statesData:null,emotionStates:null,currentEmotion:null,isBackgrounded:!1,mouseOutTimeout:null,init:function(t){this.sectionContainer=t,this.applyTransitions=this.applyTransitions.bind(this),this.initContainers(t),this.initLabels(t),this.setUpGraphs(t),this.transitions=this.setUpTransitions(),this.onStateMouseOver=this.onStateMouseOver.bind(this),this.onStateMouseOut=this.onStateMouseOut.bind(this),this.onStateClick=this.onStateClick.bind(this),this.onBackgroundClick=this.onBackgroundClick.bind(this),this.isInited=!0},initContainers:function(t){s["default"].values(l["default"].EMOTIONS).forEach(function(e){var n=document.createElement("div");n.classList.add("states-container"),n.classList.add(e);var r=document.createElement("div");r.classList.add("graph-container"),n.appendChild(r),t.appendChild(n)})},initLabels:function(t){var e=this;this.labelContainers={},s["default"].values(l["default"].EMOTIONS).forEach(function(t){var n=a["default"].select("."+t+".states-container"),r=n.append("div").classed("label-container",!0);e.labelContainers[t]=r}),this.backgroundedLabel=a["default"].select(t).append("div").attr("id","backgrounded-state-label"),this.backgroundedLabel.append("h3")},setUpGraphs:function(t){var e=this,n={top:20,right:20,bottom:50,left:20},r=t.querySelector(".graph-container"),i=r.offsetWidth-n.left-n.right,o=r.offsetHeight-n.top-n.bottom;this.xScale=a["default"].scale.linear().domain([0,10]).range([0,i]),this.yScale=a["default"].scale.linear().domain([0,10]).range([o,0]);var u=a["default"].svg.axis().scale(this.xScale).orient("bottom").ticks(10).tickFormat(function(t){return""}).tickSize(10),c=a["default"].scale.ordinal().domain(["LEAST INTENSE","MOST INTENSE"]).range(this.xScale.range()),f=a["default"].svg.axis().scale(c).orient("bottom").tickSize(25);this.graphContainers={},this.emotionStates={},s["default"].values(l["default"].EMOTIONS).forEach(function(t,r){var i=document.querySelector("#states ."+t+" .graph-container"),s=a["default"].select(i).append("svg").attr("width",i.offsetWidth).attr("height",i.offsetHeight),l=s.append("g").attr("transform","translate("+n.left+","+n.top+")");l.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(u),l.append("g").attr("class","x axis labels").attr("transform","translate(0,"+o+")").call(f).selectAll(".tick text").attr("text-anchor",function(t,e){return e?"end":"start"}).attr("style",null),e.graphContainers[t]=a["default"].select(i),e.emotionStates[t]={index:r,data:null,ranges:null,scale:0}});var h=a["default"].select(t).append("svg").classed("states-defs",!0);this.setUpDefs(h.append("defs"),this.xScale,this.yScale),this.areaGenerators=this.setUpAreaGenerators(o,this.xScale,this.yScale)},renderLabels:function(t){var e=this,n=this,r=this.emotionStates[this.currentEmotion].data,i=this.labelContainers[this.currentEmotion].selectAll("div").data(t),a={},o=this.yScale.range()[0];a[l["default"].EMOTIONS.ANGER]=function(t){return t-100},a[l["default"].EMOTIONS.DISGUST]=a[l["default"].EMOTIONS.ANGER],a[l["default"].EMOTIONS.ENJOYMENT]=a[l["default"].EMOTIONS.ANGER],a[l["default"].EMOTIONS.FEAR]=a[l["default"].EMOTIONS.ANGER],
a[l["default"].EMOTIONS.SADNESS]=function(t,e){return t+.3*Math.pow(e[1].x/10,2)*o},i.enter().append("div"),i.classed(this.currentEmotion+" label",!0).html(function(t,e){return"<h3>"+r[e].name.toUpperCase()+"</h3>"}).style({left:function(t){return Math.round(n.xScale(t[1].x)+20)+"px"},top:function(t){return Math.round(a[e.currentEmotion](n.yScale(t[1].y),t))+"px"}}).each(function(){var t=this;setTimeout(function(){t.classList.add("visible")},p)}),i.exit().remove()},setEmotion:function(t){var e=this;return new Promise(function(n,r){~s["default"].values(l["default"].EMOTIONS).indexOf(t)||(t="anger");var i=e.currentEmotion;e.currentEmotion=t;var a=e.emotionStates[t],o=!a.data;o&&e.renderEmotion(t);var u=0;i&&!function(){var t=e.graphContainers[i],n=e.labelContainers[i];t.classed("active",!1),n.classed("active",!1),t.on("transitionend",function(e){t.on("transitionend",null),t.style("transform",null),n.style("transform",null),t.classed("transitioning",!1),n.classed("transitioning",!1)});var r=document.querySelector("#states .graph-container").offsetWidth;u=1.25*r,a.index<e.emotionStates[i].index&&(u*=-1),setTimeout(function(){t.style("transform","translateX("+-u+"px)"),n.style("transform","translateX("+-u+"px)")},1e3*d["default"].emotions.panX.delay)}();var c=e.graphContainers[t],f=e.labelContainers[t];c.classed("transitioning")?c.on("transitionend",null):(c.classed("transitioning",!1),c.style("transform","translateX("+u+"px)"),f.classed("transitioning",!1),f.style("transform","translateX("+u+"px)")),setTimeout(function(){c.classed("transitioning active",!0),c.style("transform","translateX(0)"),f.classed("transitioning active",!0),f.style("transform","translateX(0)")},1e3*d["default"].emotions.panX.delay),e.isBackgrounded?(o&&e.setEmotionScale(t,1,!0),setTimeout(function(){e.setBackgroundedState(null)},1e3*d["default"].emotions.panX.delay)):(setTimeout(function(){o&&e.setEmotionScale(t,1,!1)},1e3*d["default"].emotions.scale["in"].delay),e.renderLabels(a.ranges[1]),setTimeout(function(){e.graphContainers[t].selectAll(".axis").classed("visible",!0)},1),e.resetCallout()),e.setActive(!e.isBackgrounded);var h=void 0;if(i)h=1e3*(d["default"].emotions.panX.delay+d["default"].emotions.panX.duration);else if(o){var p=e.emotionStates[e.currentEmotion].data,g=e.transitions[e.currentEmotion].delay;h=g(null,p.length-1)+e.transitions[e.currentEmotion].duration}else h=d["default"].states.backgrounded.duration["in"];setTimeout(function(){n()},h)})},renderEmotion:function(t){var e=this,n=this.parseStates(t),r=this.emotionStates[t];r.data=n,r.ranges={0:this.transformRanges(n,t,0),1:this.transformRanges(n,t,1)};var i=this.graphContainers[t].select("g"),a=i.selectAll("path.area").data(this.emotionStates[t].ranges[0]).enter(),o=this.currentEmotion+"-gradient";a.append("linearGradient").attr("xlink:href","#"+o).attr("id",function(t,e){return o+"-"+e}).attr("x1",function(t){return e.xScale(t[0].x)}).attr("x2",function(t){return e.xScale(t[2].x)});var s=a.append("path").attr("class","area").attr("d",this.areaGenerators[this.currentEmotion]).attr("fill",function(t,e){return"url(#"+o+"-"+e+")"}).call(this.applyEffects.bind(this));window.navigator.userAgent&&~window.navigator.userAgent.toLowerCase().indexOf("gecko")&&~window.navigator.userAgent.toLowerCase().indexOf("firefox")&&s.style("mix-blend-mode","normal"),r.rendered=!0},setEmotionScale:function(t,e,n){var r=this.graphContainers[t].select("g"),i=this.emotionStates[t].ranges[e];i||(i=this.emotionStates[t].ranges[e.toString()]=this.transformRanges(this.emotionStates[t].data,t,e)),r.selectAll("path.area").data(i).call(this.applyTransitions,n?"immediate":null),this.emotionStates[t].scale=e},open:function(t){this.setBackgrounded(t&&t.inBackground,t),!t||t.sectionName!==l["default"].SECTIONS.STATES&&t.sectionName!==l["default"].SECTIONS.ACTIONS||a["default"].select("#main").on("click",this.onBackgroundClick,!1)},close:function(){var t=this;return new Promise(function(e,n){if(t.hideChrome(),t.setActive(!1),a["default"].select("#main").on("click",null,!1),!t.currentEmotion)return void e();var r=t.emotionStates[t.currentEmotion],i=t.transformRanges(r.data,t.currentEmotion,0),o=t.graphContainers[t.currentEmotion],s=t.labelContainers[t.currentEmotion],u=o.selectAll("path.area");u.size()?u.data(i).call(t.applyTransitions,"close",function(){setTimeout(function(){o.selectAll("path.area").remove(),o.selectAll("linearGradient").remove(),s.selectAll("div").remove(),r.data=null,u.data([]),e()},1)}):e()})},setActive:function(t){this.currentEmotion&&(this.graphContainers[this.currentEmotion].selectAll("path.area").on("mouseover",null).on("mouseout",null).on("click",null,!0),this.labelContainers[this.currentEmotion].selectAll("div").select("h3").on("mouseover",null).on("mouseout",null).on("click",null,!0),t&&(this.graphContainers[this.currentEmotion].selectAll("path.area").on("mouseover",this.onStateMouseOver).on("mouseout",this.onStateMouseOut).on("click",this.onStateClick,!0),this.labelContainers[this.currentEmotion].selectAll("div").select("h3").on("mouseover",this.onStateMouseOver).on("mouseout",this.onStateMouseOut).on("click",this.onStateClick,!0)))},setBackgrounded:function(t,e){var n=this;return new Promise(function(r,i){!t&&n.sectionContainer.classList.contains("backgrounded")||t&&!n.sectionContainer.classList.contains("backgrounded")?n.sectionContainer.classList.add("states-in-out"):n.sectionContainer.classList.remove("states-in-out"),n.sectionContainer.classList[t?"add":"remove"]("backgrounded"),n.sectionContainer.classList[e&&e.sectionName===l["default"].SECTIONS.ACTIONS?"add":"remove"]("actions"),n.sectionContainer.classList[e&&e.sectionName===l["default"].SECTIONS.TRIGGERS?"add":"remove"]("triggers"),n.sectionContainer.classList[e&&e.sectionName===l["default"].SECTIONS.MOODS?"add":"remove"]("moods"),t||n.backgroundedLabel.classed("visible",!1),n.hideChrome(),n.setActive(!t),n.isBackgrounded=t,r()})},applyEventListenersToEmotion:function(t,e){var n=this;Object.keys(e).forEach(function(r){n.graphContainers[t].on(r,e[r])})},hideChrome:function(){this.currentEmotion&&(this.labelContainers[this.currentEmotion].selectAll("div").classed("visible",!1).selectAll("h3").style("opacity",null),this.graphContainers[this.currentEmotion].selectAll(".axis").classed("visible",!1)),l["default"].changeCallout()},parseStates:function(t){if(this.statesData&&this.statesData[t])return this.statesData[t];var e=f["default"].emotions[t].states.map(function(t){return Object.assign({},t,{name:t.name.toLowerCase()})});if(e=e.filter(function(t){return!(!t.range.min||!t.range.max)}),e=e.sort(function(t,e){var n=e.range.min+e.range.max-(t.range.min+t.range.max);return n||(n=t.range.min-e.range.min),n||(t.name>e.name?n=-1:t.name<e.name&&(n=1)),n}),t===l["default"].EMOTIONS.FEAR){var n=e.findIndex(function(t){return"panic"===t.name});n>-1&&e.splice(n+1,0,e.splice(n,1)[0])}return this.statesData=this.statesData||{},this.statesData[t]=e,e},transformRanges:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return this.stateRangeTransformers[e](t,n)},stateRangeTransformers:{isosceles:function(t,e){return t.map(function(t,n){var r=[],i=t.range.min-1,a=t.range.max,o=a-i,s=i+.5*o;return r.push({x:i,y:0}),r.push({x:s,y:e*s}),r.push({x:a,y:0}),r})},offsetPoints:function(t,e,n){if(t.length!==e.length)throw new Error("`points` and `offsets` must be the same length.");t.forEach(function(t,r){t[1].x+=e[r][0],t[1].y+=e[r][1]*n})},anger:function(t,e){var n=this.isosceles(t,e),r={annoyance:[-.5,0],frustration:[-1.5,-.5],argumentativeness:[0,0],bitterness:[.5,0],exasperation:[-.5,0],vengefulness:[.5,0],fury:[0,0]},i=t.map(function(t){return t.name}).map(function(t){return r[t]||[0,0]});return this.offsetPoints(n,i,e),n},disgust:function(t,e){var n=this.isosceles(t,e),r={dislike:[0,0],aversion:[-.25,-.15],distaste:[.25,.15],repugnance:[0,0],abhorrence:[-.25,-.3],revulsion:[0,0],loathing:[0,0]},i=t.map(function(t){return t.name}).map(function(t){return r[t]||[0,0]});return this.offsetPoints(n,i,e),n},enjoyment:function(t,e){var n=this.isosceles(t,e),r={"sensory pleasures":[0,0],"compassion-joy":[-.25,-.25],amusement:[-.15,-.15],rejoicing:[.15,.15],schadenfreude:[0,0],relief:[0,0],pride:[-.15,-.15],fiero:[.1,.1],naches:[.4,.4],wonder:[0,0],debauchery:[-.15,-.15],excitement:[.15,.15],ecstasy:[0,0]},i=t.map(function(t){return t.name}).map(function(t){return r[t]||[0,0]});return this.offsetPoints(n,i,e),n},fear:function(t,e){var n=this.isosceles(t,e),r={trepidation:[0,0],nervousness:[-.5,0],anxiety:[0,0],dread:[-.5,-.5],desperation:[-1,-1],panic:[-.7,-.8],horror:[-.35,-.4],terror:[0,0]},i=t.map(function(t){return t.name}).map(function(t){return r[t]||[0,0]});return this.offsetPoints(n,i,e),n},sadness:function(t,e){var n=this.isosceles(t,1.25*e),r={disappointment:[0,0],discouragement:[-.5,-.25],distraughtness:[.25,.25],resignation:[.75,.5],helplessness:[-.5,-.5],hopelessness:[-.5,-.5],misery:[0,0],despair:[-.1,0],grief:[.3,.5],sorrow:[.7,1],anguish:[0,.5]},i=t.map(function(t){return t.name}).map(function(t){return r[t]||[0,0]});return this.offsetPoints(n,i,e),n}},setUpDefs:function(t,e,n){t.append("filter").attr("id","sadness-blur-0").attr("x",-16).attr("y",-16).attr("width",128).attr("height",128).append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",0),t.append("filter").attr("id","sadness-blur-1").attr("xlink:href","#sadness-blur-0").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",1),t.append("filter").attr("id","sadness-blur-2").attr("xlink:href","#sadness-blur-0").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",2),t.append("filter").attr("id","sadness-blur-3").attr("xlink:href","#sadness-blur-0").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",3),t.append("linearGradient").attr("id","states-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",e(0)).attr("x2",e(10)).attr("y1",n(0)).attr("y2",n(0)),t.append("linearGradient").attr("id","anger-gradient").attr("xlink:href","#states-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(228, 135, 102, 0.2)"},{offset:"100%",color:"rgba(204, 28, 43, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","disgust-gradient").attr("xlink:href","#states-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(0, 142, 69, 0.3)"},{offset:"56%",color:"rgba(0, 122, 61, 0.8)"},{offset:"100%",color:"rgba(0, 104, 55, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","enjoyment-gradient").attr("xlink:href","#states-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(241, 196, 83, 0.8)"},{offset:"100%",color:"rgba(248, 136, 29, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","fear-gradient").attr("xlink:href","#states-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(248, 58, 248, 0.1)"},{offset:"100%",color:"rgba(143, 39, 139, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","sadness-gradient").attr("xlink:href","#states-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(200, 220, 240, 1.0)"},{offset:"56%",color:"rgba(30, 152, 211, 1.0)"},{offset:"100%",color:"rgba(64, 70, 164, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color})},setUpAreaGenerators:function(t,e,n){return{anger:a["default"].svg.area().x(function(t){return e(t.x)}).y0(t).y1(function(t){return n(t.y)}),disgust:a["default"].svg.area().x(function(t){return e(t.x)}).y0(t).y1(function(t){return n(t.y)}).interpolate(function(t){var e=t[0][0],n=t[0][1],r=t[1][0],i=t[1][1],o=t[2][0],s=t[2][1],u=20,l=10,c=function(t,e,n,r){return(e-t)*n*r+t},f=function(t,e,n,r,i){var a=1+1*(Math.random()-.05)/u,o=Math.pow(Math.pow(n-t,2)+Math.pow(r-e,2),.5),s={x:c(t,n,i,a),y:c(e,r,i,a)},f=(Math.random()-.5)*o/l,h={x:(n-t)/o*f,y:(r-e)/o*f};return{x:s.x+h.x,y:s.y-h.y}},h=[{x:e,y:n}],d=[{x:r,y:i}];a["default"].range(1,u-2).forEach(function(t){h.push(f(e,n,r,i,t/u)),d.push(f(r,i,o,s,t/u))}),h.push({x:r,y:i}),d.push({x:o,y:s});var p=a["default"].svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("basis"),g=p(h).replace("M",""),m=p(d).replace("M","");return g+"L"+m}),enjoyment:a["default"].svg.area().x(function(t){return e(t.x)}).y0(t).y1(function(t){return n(t.y)}).interpolate(function(t){var n=t[1][1],r=e(1),i=t[0].join(" ")+" C"+t[0].join(" ")+","+(t[0][0]-r)+" "+n+","+t[1].join(" ")+" C"+(t[2][0]+r)+" "+n+","+t[2].join(" ")+","+t[2].join(" ");return i}),fear:a["default"].svg.area().x(function(t){return e(t.x)}).y0(t).y1(function(t){return n(t.y)}).interpolate(function(t){function e(t,e){function n(t,e,n,r){return Math.pow(1-r,2)*t+2*(1-r)*r*e+Math.pow(r,2)*n}function r(t,e,r){return n(t[0][e],t[1][e],t[2][e],r)}return[r(t,0,e),r(t,1,e)]}var n=1,r=.7,i=t[0][0],a=t[0][1],o=t[1][0],s=t[1][1],u=t[2][0],l=t[2][1],c=[t[0],[i+n*(o-i),a],t[1]],f=[t[1],[u,s+(1-r)*(l-s)],t[2]],h={left:[.3,.5,.76],right:[.14,.4,.75]},d=i+","+a;return h.left.forEach(function(t){var n=e(c,t);d+="L"+n[0]+","+n[1]}),d+="L"+t[1][0]+","+t[1][1],h.right.forEach(function(t){var n=e(f,t);d+="L"+n[0]+","+n[1]}),d+="L"+t[2][0]+","+t[2][1]+"L"+t[0][0]+","+t[0][1]}),sadness:a["default"].svg.area().x(function(t){return e(t.x)}).y0(t).y1(function(t){return n(t.y)}).interpolate("basis")}},setUpTransitions:function(){return{anger:{ease:a["default"].ease("back-out",3.5),delay:function(t,e){return 500+100*Math.random()*e},duration:500},disgust:{ease:a["default"].ease("poly-in",4),delay:function(t,e){return 150+100*Math.random()*e},duration:1e3},enjoyment:{ease:function(){var t=arguments.length<=0||void 0===arguments[0]?.25:arguments[0],e=1-t,n=e*(1-e)+e,r=e*(1-n)+n,i=e*(1-r)+r,a=2*Math.sqrt(t),o=a*Math.sqrt(t),s=o*Math.sqrt(t),u=s*Math.sqrt(t),l=1/(1+a+o+s),c=l+l*a,f=c+l*o,h=f+l*s,d=l+l*a/2,p=c+l*o/2,g=f+l*s/2,m=h+l*u/2,v=1/(l*l);return function(t){return t>=1?1:l>t?v*t*t:c>t?v*(t-=d)*t+e:f>t?v*(t-=p)*t+n:h>t?v*(t-=g)*t+r:v*(t-=m)*t+i}}(.35),delay:function(t,e){return 500+150*Math.random()*e},duration:750},fear:{ease:a["default"].ease("elastic-in",1.5,.75),delay:function(t,e){return 500+100*Math.random()*e},duration:750},sadness:{ease:a["default"].ease("back-out",2),delay:function(t,e){return 150+1250*Math.random()},duration:4e3},close:{ease:a["default"].ease("ease-out"),delay:function(t,e){return 50*Math.random()*e},duration:800},immediate:{ease:a["default"].ease("linear"),delay:0,duration:0}}},applyEffects:function(t){"sadness"===this.currentEmotion&&(setTimeout(function(){t.attr("filter","url(#sadness-blur-0)")},.6*this.transitions.sadness.duration),setTimeout(function(){t.attr("filter","url(#sadness-blur-1)")},.8*this.transitions.sadness.duration),setTimeout(function(){t.attr("filter","url(#sadness-blur-2)")},.9*this.transitions.sadness.duration),setTimeout(function(){t.attr("filter","url(#sadness-blur-3)")},1*this.transitions.sadness.duration))},applyTransitions:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=this.transitions[e||this.currentEmotion],i=!1;t.transition().ease(r.ease).delay(r.delay).duration(r.duration).attr("d",this.areaGenerators[this.currentEmotion]).each("end",function(){n&&!i&&(n.apply(void 0,arguments),i=!0)})},onStateMouseOver:function(t,e){var n=this.emotionStates[this.currentEmotion].data[e];if(!n)throw new Error("statesData not found for onStateMouseOver at index "+e);this.isBackgrounded?(this.displayBackgroundedStates([n.name]),l["default"].setEmotionState(n.name,!1)):this.displayHighlightedStates([n.name])},onStateMouseOut:function(t,e){this.isBackgrounded?(this.displayBackgroundedStates(null),l["default"].setEmotionState(null,!1)):this.displayHighlightedStates(null)},onStateClick:function(t,e){a["default"].event&&a["default"].event.stopImmediatePropagation();var n=this.emotionStates[this.currentEmotion].data[e];this.isBackgrounded?l["default"].setEmotionState(n.name,!0):(this.setHighlightedState(n.name),l["default"].changeCallout(this.currentEmotion,n.name,n.desc))},onBackgroundClick:function(){this.isBackgrounded?l["default"].setEmotionState(null,!0):(this.setHighlightedState(null),this.resetCallout())},setBackgroundedState:function(t){this.backgroundedState=t,this.displayBackgroundedStates(null),this.setHighlightedState(t)},displayBackgroundedStates:function(t){var e=this,n="",r={};t?1===t.length&&(n=t[0]):n=this.backgroundedState,s["default"].values(l["default"].EMOTIONS).forEach(function(t){r[t]=t===e.currentEmotion}),n?(this.backgroundedLabel.select("h3").html(n),this.backgroundedLabel.classed("visible",!0),this.backgroundedLabel.classed(r)):(this.backgroundedLabel.classed("visible",!1),setTimeout(function(){e.backgroundedLabel.classed(r)},1e3*d["default"].states.highlighted.out)),this.displayHighlightedStates(t)},setHighlightedState:function(t){this.highlightedState=t,this.displayHighlightedStates(null)},displayHighlightedStates:function(t){var e=this;if(this.currentEmotion){!t&&this.highlightedState&&(t=[this.highlightedState]);var n=this.graphContainers[this.currentEmotion],r=this.labelContainers[this.currentEmotion];t&&t.length?!function(){var i=e.emotionStates[e.currentEmotion].data.map(function(e){return!!~t.indexOf(e.name)});n.selectAll("path.area").classed("unhighlighted",function(t,e){return!i[e]}),r.selectAll("div h3").classed("unhighlighted",function(t,e){return!i[e]})}():(n.selectAll("path.area").classed("unhighlighted",!1),r.selectAll("div h3").classed("unhighlighted",!1))}},resetCallout:function(){l["default"].changeCallout(this.currentEmotion,f["default"].metadata.states.header,f["default"].metadata.states.body)}},e.exports=n["default"]},{"../scss/variables.json":9,"../static/emotionsData.json":36,"./dispatcher.js":16,d3:2,lodash:4}],35:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("d3"),a=r(i),o=t("lodash"),s=r(o),u=t("./dispatcher.js"),l=r(u),c=t("../static/emotionsData.json"),f=r(c),h=t("../scss/variables.json"),d=r(h),p=t("./states.js"),g=r(p),m=t("./actions.js"),v=r(m),y=3,w={APPRAISAL:1,DATABASE:2,IMPULSE:3},b="M0,0.1C3.1-3,9.3-4.5,13.6-4.6C7.9-0.3,2.8,5.2,0,12C-2.7,5.2-8-0.1-13.6-4.6C-9-4.3-3.4-3.1,0,0.1z";n["default"]={isInited:!1,currentEmotion:null,triggersData:null,backgroundSections:[g["default"],v["default"]],labelContainers:null,graphContainers:null,init:function(t){this.sectionContainer=t,this.initContainers(t);var e=this.setUpGraphs(t);this.initLabels(t,e),this.triggersData=this.parseTriggers(e),this.drawHorizon(t),this.setUpHitAreas(t),this.onHitAreaMouseOver=this.onHitAreaMouseOver.bind(this),this.onHitAreaMouseOut=this.onHitAreaMouseOut.bind(this),this.onHitAreaClick=this.onHitAreaClick.bind(this),this.isInited=!0},initContainers:function(t){s["default"].values(l["default"].EMOTIONS).forEach(function(e){var n=document.createElement("div");n.classList.add("triggers-container"),n.classList.add(e);var r=document.createElement("div");r.classList.add("graph-container"),n.appendChild(r),t.appendChild(n)})},initLabels:function(t,e){var n=this;this.labelContainers={},s["default"].values(l["default"].EMOTIONS).forEach(function(e){var r=(1-d["default"].triggers.bottom.replace("%","")/100)*t.offsetHeight,i=a["default"].select(".triggers-container."+e),o=i.append("div").classed("label-container",!0);o.append("div").attr("class","arrows-container").append("svg").attr("width",t.offsetWidth).attr("height",r).append("g").attr("transform","translate("+.5*t.offsetWidth+","+r+")");n.labelContainers[e]=o}),this.phaseLabelContainer=a["default"].select(t).append("div").attr("id","trigger-phase-labels"),this.phaseLabelContainer.selectAll("h3.label").data(f["default"].metadata.triggers.steps).enter().append("h3").classed("label",!0).text(function(t){return t.header.toUpperCase()}).style("top",function(t,n){switch(n){case 0:return-1.4*e+"px";case 1:return-.9*e+"px";case 2:return-.65*e+"px"}})},setUpGraphs:function(t){var e=this,n=t.querySelector(".graph-container"),r=n.offsetWidth,i=n.offsetHeight,o={top:0*i,right:0*r,bottom:d["default"].triggers.bottom.replace("%","")/100*i,left:0*r},u=r-o.left-o.right,c=i-o.top-o.bottom,f=Math.min(.6*c,.5*u);this.haloPieLayout=a["default"].layout.pie().value(function(t){return 1}).startAngle(-.5*Math.PI).endAngle(.5*Math.PI),this.haloArcGenerator=a["default"].svg.arc().innerRadius(.8*f).outerRadius(f),this.graphContainers={},s["default"].values(l["default"].EMOTIONS).forEach(function(n,r){var i=t.querySelector("."+n+" .graph-container"),s=a["default"].select(i).append("svg").attr("width",i.offsetWidth).attr("height",i.offsetHeight),l=s.append("g").attr("transform","translate("+(o.left+.5*u)+","+(o.top+c)+")");e.graphContainers[n]=l});var h=a["default"].select(t).append("svg").classed("triggers-defs",!0);return this.setUpDefs(h.append("defs"),f),f},parseTriggers:function(t){var e=void 0,n=void 0,r=void 0,i=void 0,a=this.sectionContainer.offsetWidth/this.sectionContainer.offsetHeight;a>1.75?(e=-.9*Math.PI,n=.8*Math.PI,r=1.05*t,i=.15*t):a>1.4?(e=-.8*Math.PI,n=.6*Math.PI,r=1.15*t,i=.225*t):a>1?(e=-.7*Math.PI,n=.4*Math.PI,r=1.25*t,i=.3*t):(e=-.6*Math.PI,n=.2*Math.PI,r=1.35*t,i=.375*t);var o={};return s["default"].values(l["default"].EMOTIONS).forEach(function(t){var a=f["default"].emotions[t].triggers.length,s=Math.floor(a/2);o[t]=f["default"].emotions[t].triggers.concat().sort(function(t,e){return e>t?-1:t>e?1:0}).map(function(t,o){return{name:t,angle:e+n*(o+(s>o?.5:1.5))/(a+1),radius:r+i*((o+1)%y)/(y-1),arrowLength:.4}})}),o},setUpDefs:function(t,e){t.append("radialGradient").attr("id","triggers-radial-gradient").attr("gradientUnits","userSpaceOnUse").attr("cx",0).attr("cy",0).attr("r",e),t.append("radialGradient").attr("id","triggers-anger-radial-gradient").attr("xlink:href","#triggers-radial-gradient").selectAll("stop").data([{offset:"84%",color:"rgba(228, 135, 102, 0.2)"},{offset:"100%",color:"rgba(204, 28, 43, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("radialGradient").attr("id","triggers-disgust-radial-gradient").attr("xlink:href","#triggers-radial-gradient").selectAll("stop").data([{offset:"84%",color:"rgba(0, 142, 69, 0.3)"},{offset:"100%",color:"rgba(0, 104, 55, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("radialGradient").attr("id","triggers-enjoyment-radial-gradient").attr("xlink:href","#triggers-radial-gradient").selectAll("stop").data([{offset:"84%",color:"rgba(241, 196, 83, 0.8)"},{offset:"100%",color:"rgba(248, 136, 29, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("radialGradient").attr("id","triggers-fear-radial-gradient").attr("xlink:href","#triggers-radial-gradient").selectAll("stop").data([{offset:"84%",color:"rgba(248, 58, 248, 0.1)"},{offset:"100%",color:"rgba(143, 39, 139, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("radialGradient").attr("id","triggers-sadness-radial-gradient").attr("xlink:href","#triggers-radial-gradient").selectAll("stop").data([{offset:"84%",color:"rgba(200, 220, 240, 1.0)"},{offset:"100%",color:"rgba(64, 70, 164, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","triggers-linear-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0),t.append("linearGradient").attr("id","triggers-anger-linear-gradient").attr("xlink:href","#triggers-linear-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(228, 135, 102, 0.2)"},{offset:"100%",color:"rgba(204, 28, 43, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","triggers-disgust-linear-gradient").attr("xlink:href","#triggers-linear-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(0, 142, 69, 0.3)"},{offset:"56%",color:"rgba(0, 122, 61, 0.8)"},{offset:"100%",color:"rgba(0, 104, 55, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","triggers-enjoyment-linear-gradient").attr("xlink:href","#triggers-linear-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(241, 196, 83, 0.8)"},{offset:"100%",color:"rgba(248, 136, 29, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","triggers-fear-linear-gradient").attr("xlink:href","#triggers-linear-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(248, 58, 248, 0.1)"},{offset:"100%",color:"rgba(143, 39, 139, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),t.append("linearGradient").attr("id","triggers-sadness-linear-gradient").attr("xlink:href","#triggers-linear-gradient").selectAll("stop").data([{offset:"0%",color:"rgba(200, 220, 240, 1.0)"},{offset:"56%",color:"rgba(30, 152, 211, 1.0)"},{offset:"100%",color:"rgba(64, 70, 164, 1.0)"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color})},drawHorizon:function(t){var e=document.createElement("div");e.classList.add("horizon"),t.insertBefore(e,t.childNodes[0])},setUpHitAreas:function(t){var e=this,n=t.offsetWidth,r=(1-d["default"].triggers.bottom.replace("%","")/100)*t.offsetHeight,i=this.haloArcGenerator.innerRadius(),o=document.createElement("div");o.id="trigger-hit-area-container",t.appendChild(o);var s=a["default"].select(o).append("svg").attr("width",o.offsetWidth).attr("height",o.offsetHeight),u=s.append("g").attr("transform","translate("+.5*n+","+r+")");u.append("rect").attr("class","hit-area").attr("x",-n/2).attr("y",-r).attr("width",n).attr("height",r).on("mouseover",function(){e.onHitAreaMouseOver(w.APPRAISAL)}).on("mouseout",function(){e.onHitAreaMouseOut(w.APPRAISAL)}).on("click",function(){e.onHitAreaClick(w.APPRAISAL)}),u.append("path").data(this.haloPieLayout([{}])).attr("class","hit-area").attr("d",this.haloArcGenerator).on("mouseover",function(){e.onHitAreaMouseOver(w.DATABASE)}).on("mouseout",function(){e.onHitAreaMouseOut(w.DATABASE)}).on("click",function(){e.onHitAreaClick(w.DATABASE)});var l=a["default"].svg.arc().innerRadius(0).outerRadius(i);u.append("path").data(this.haloPieLayout([{}])).attr("class","hit-area").attr("d",l).on("mouseover",function(){e.onHitAreaMouseOver(w.IMPULSE)}).on("mouseout",function(){e.onHitAreaMouseOut(w.IMPULSE)}).on("click",function(){e.onHitAreaClick(w.IMPULSE)}),a["default"].select("#header").on("click",function(){e.onHitAreaClick(null)})},setEmotion:function(t){var e=this;return new Promise(function(n,r){~s["default"].values(l["default"].EMOTIONS).indexOf(t)||(t="anger");var i=e.currentEmotion;e.currentEmotion=t;var o=0;i&&!function(){var e=a["default"].select(".triggers-container."+i);e.classed("active",!1),e.on("transitionend",function(t){e.on("transitionend",null),e.style("transform",null),e.classed("transitioning",!1)});var n=document.querySelector("#triggers .graph-container").offsetWidth,r=s["default"].values(l["default"].EMOTIONS);o=1.25*n,r.indexOf(t)<r.indexOf(i)&&(o*=-1),setTimeout(function(){e.style("transform","translateX("+-o+"px)")},1e3*d["default"].emotions.panX.delay)}();var u=a["default"].select(".triggers-container."+t);u.classed("transitioning")?u.on("transitionend",null):(u.classed("transitioning",!1),u.style("transform","translateX("+o+"px)")),setTimeout(function(){u.classed("transitioning active",!0),u.style("transform","translateX(0)")},1e3*d["default"].emotions.panX.delay),e.renderGraph(e.currentEmotion),e.renderLabels(e.currentEmotion),e.openCallout(500),document.querySelector("#triggers .horizon").classList.add("visible"),e.phaseLabelContainer.selectAll("h3.label").classed("visible",!1);var c=void 0;c=i?1e3*(d["default"].emotions.panX.delay+d["default"].emotions.panX.duration):d["default"].states.backgrounded.duration["in"],setTimeout(function(){n()},c)})},renderGraph:function(t){var e=this.graphContainers[t],n=e.selectAll("path.halo");if(!n.size()){n=n.data(this.haloPieLayout([{}]));var r="triggers-"+t+"-radial-gradient",i=n.enter();i.append("radialGradient").attr("xlink:href","#"+r).attr("id",r+"-halo"),i.append("path").classed("halo "+t,!0).attr("d",this.haloArcGenerator).attr("fill","url(#"+r+"-halo)").style("opacity",0).transition().duration(1e3).style("opacity",1),n.exit().transition().duration(600).style("opacity",0).remove()}},renderLabels:function(t){var e=this,n=t?this.triggersData[t]:[];t=t||this.currentEmotion;var r=(1-d["default"].triggers.bottom.replace("%","")/100)*this.sectionContainer.offsetHeight,i=this.labelContainers[t],a=i.selectAll("div.label").data(n),o=a.enter().append("div").classed("label "+t,!0).style("opacity",1).style("transform",function(t){var n=.5*e.sectionContainer.offsetWidth+Math.cos(t.angle)*t.radius,i=r+Math.sin(t.angle)*t.radius;return"translate("+n+"px,"+i+"px)"});o.append("h4").html(function(t){return t.name}),a.exit().transition().duration(600).style("opacity",0).remove();var s=i.select(".arrows-container g").selectAll("g.arrow").data(n),u="triggers-"+t+"-linear-gradient",l=s.enter();l.append("linearGradient").attr("xlink:href","#"+u).attr("id",function(t,e){return u+"-arrow-"+e}).attr("x1",function(t){return Math.cos(t.angle)*t.radius*.95}).attr("x2",function(t){return Math.cos(t.angle)*t.radius*(1-t.arrowLength)}).attr("y1",function(t){return Math.sin(t.angle)*t.radius*.95}).attr("y2",function(t){return Math.sin(t.angle)*t.radius*(1-t.arrowLength)});var c=l.append("g").classed("arrow "+t,!0).style("opacity",1);c.append("line").attr("x1",function(t){return Math.cos(t.angle)*t.radius*.95}).attr("x2",function(t){return Math.cos(t.angle)*t.radius*(1-t.arrowLength)}).attr("y1",function(t){return Math.sin(t.angle)*t.radius*.95}).attr("y2",function(t){return Math.sin(t.angle)*t.radius*(1-t.arrowLength)}).attr("stroke",function(t,e){return"url(#"+u+"-arrow-"+e+")"}),c.append("path").attr("d",b).attr("transform",function(t){return"translate("+Math.cos(t.angle)*t.radius*(1-t.arrowLength)+","+Math.sin(t.angle)*t.radius*(1-t.arrowLength)+") rotate("+(180*t.angle/Math.PI+90)+")"}),s.exit().transition().duration(600).style("opacity",0).remove(),this.phaseLabelContainer.attr("class",t)},open:function(){this.openCallout(1500)},close:function(){var t=this;return new Promise(function(e,n){clearTimeout(t.calloutTimeout),document.querySelector("#states").classList.remove("faded"),document.querySelector("#actions").classList.remove("faded"),t.renderLabels(null),t.currentEmotion&&t.graphContainers[t.currentEmotion].selectAll("path.halo").remove(),document.querySelector("#triggers .horizon").classList.remove("visible"),e()})},onHitAreaMouseOver:function(t){this.displayHighlightedHitArea(t)},onHitAreaMouseOut:function(t){this.displayHighlightedHitArea(null)},onHitAreaClick:function(t){a["default"].event&&a["default"].event.stopImmediatePropagation(),this.setHighlightedHitArea(t)},setHighlightedHitArea:function(t){this.highlightedHitArea=t,this.displayHighlightedHitArea(),this.setCallout(t)},displayHighlightedHitArea:function(t){t=t||this.highlightedHitArea||null;var e=this.graphContainers[this.currentEmotion],n=a["default"].select("#states"),r=a["default"].select("#actions");
switch(t){case w.APPRAISAL:e.classed("muted",!0),n.classed("faded",!0),r.classed("faded",!0);break;case w.DATABASE:e.classed("muted",!1),n.classed("faded",!0),r.classed("faded",!0);break;case w.IMPULSE:e.classed("muted",!0),n.classed("faded",!1),r.classed("faded",!1);break;default:e.classed("muted",!1),n.classed("faded",!1),r.classed("faded",!1)}this.phaseLabelContainer.selectAll("h3.label").classed("visible",function(e,n){return n+1===t})},openCallout:function(t){var e=this;this.calloutTimeout||(this.calloutTimeout=setTimeout(function(){e.setCallout(!1),e.calloutTimeout=null},t))},setCallout:function(t){t?l["default"].changeCallout(this.currentEmotion,f["default"].metadata.triggers.steps[t-1].header,f["default"].metadata.triggers.steps[t-1].body):l["default"].changeCallout(this.currentEmotion,f["default"].metadata.triggers.header,f["default"].metadata.triggers.body)}},e.exports=n["default"]},{"../scss/variables.json":9,"../static/emotionsData.json":36,"./actions.js":13,"./dispatcher.js":16,"./states.js":34,d3:2,lodash:4}],36:[function(t,e,n){e.exports={emotions:{anger:{continent:{name:"Anger",desc:"The Anger actions differ not only in their strength but also in how they deal with what triggered the anger. "},states:[{name:"Annoyance",desc:"The mildest state of anger, never felt very strongly.",range:{min:1,max:2},actions:{all:["suppress","be passive-aggressive","simmer/brood"],con:["suppress"],des:["suppress","be passive-aggressive","simmer/brood"],both:["suppress"]}},{name:"Frustration",desc:"A loss of patience with a person or task.",range:{min:1,max:10},actions:{all:["suppress","quarrel","insult","undermine","scream/yell","simmer/brood","be passive-aggressive"],con:["suppress"],des:["quarrel","insult","undermine","scream/yell","suppress","simmer/brood","be passive-aggressive"],both:["suppress"]}},{name:"Argumentativeness",desc:"An inclination to partake in unfriendly verbal disagreements.",range:{min:2,max:10},actions:{all:["suppress","quarrel","insult","undermine","distract","avoid","simmer/brood"],con:["suppress"],des:["quarrel","insult","undermine","suppress","distract","avoid","simmer/brood"],both:["suppress"]}},{name:"Bitterness",desc:"The residue from having been repeatedly angry, usually due to feeling that the world is populated by people or events that block pursuit of what is important to you.",range:{min:3,max:10},actions:{all:["suppress","insult","undermine","dispute","scream/yell","simmer/brood","be passive-aggressive"],con:["suppress"],des:["insult","undermine","dispute","scream/yell","suppress","simmer/brood","be passive-aggressive"],both:["suppress"]}},{name:"Exasperation",desc:"The feeling of losing patience with a person or task that is generating an overload of frustration.",range:{min:4,max:7},actions:{all:["suppress","quarrel","insult","undermine","be passive-aggressive","dispute","scream/yell","simmer/brood"],con:["suppress"],des:["quarrel","insult","undermine","suppress","be passive-aggressive","dispute","scream/yell","simmer/brood"],both:["suppress"]}},{name:"Vengefulness",desc:"A strong desire to harm someone who has harmed you.",range:{min:5,max:10},actions:{all:["","quarrel","insult","undermine","dispute","scream/yell","use physical force","suppress","simmer/brood"],con:[""],des:["quarrel","insult","undermine","dispute","scream/yell","use physical force","suppress","simmer/brood"],both:[]}},{name:"Fury",desc:"The highest, most intense state of anger, often resulting in a loss of control. May also result in violent actions.",range:{min:10,max:10},actions:{all:["","quarrel","insult","undermine","scream/yell","use physical force","suppress","simmer/brood"],con:[""],des:["quarrel","insult","undermine","scream/yell","use physical force","suppress","simmer/brood"],both:[]}}],actions:[{name:"Quarrel",desc:"Verbally oppose in a manner intended to escalate the disagreement."},{name:"Insult",desc:"Disparage the other person in a offensive or hurtful way that is likely to escalate the conflict rather than resolve it."},{name:"Undermine",desc:"Take action to make someone or something weaker or less effective, usually in a secret or gradual way."},{name:"Dispute",desc:"Disagree in a manner that may escalate the dispute."},{name:"Scream/yell",desc:"Lose control of how one speaks; speak in a loud volume and, when screaming, in a higher pitch."},{name:"Use physical force",desc:"Harm or constrain someone, an action that may be deliberately chosen or the result of a loss of control over how one acts."},{name:"Be firm",desc:"Convey that one's position is strongly held, not likely to be abandoned."},{name:"Withdraw",desc:"Physically or mentally leave the scene of the conflict."},{name:"Take a time out",desc:"Announce intention to withdraw to prevent escalation of the conflict."},{name:"Practice patience",desc:"Regard the conflict as an opportunity to not lose one's temper."},{name:"Suppress",desc:"Try to avoid feeling or acting upon the emotion that is being experienced."},{name:"Distract",desc:"Engage in other activities in an attempt to avoid feeling this emotion."},{name:"Avoid",desc:"Either physically stay away from someone or something, or internally keep one’s mind away from what is triggering the anger."},{name:"Simmer/brood",desc:"Act in a way that makes clear that angry actions are building or being contemplated."},{name:"Be passive-aggressive",desc:"Take indirect actions that have an angry undercurrent."},{name:"Remove the interference",desc:"Attempt to eliminate whatever is blocking the pursuit of a goal."}],triggers:["Interference with locomotion","Interference with action","Rejection by a loved one","Encountering offensive beliefs","Being put down by an authority figure","Inefficiency or bureaucracy","Being wrongfully accused"],moods:[{name:"Irritable",desc:"A readiness, a need to become angry. Filtering perceptions to see provocations not noticed when not irritable."}]},fear:{continent:{name:"Fear",desc:"Fear is the response to perceived danger."},states:[{name:"Trepidation",desc:"A sense of slight danger, often pending but not immediate.",range:{min:1,max:3},actions:{all:["hesitate","ruminate","worry"],con:["hesitate"],des:["ruminate","worry"],both:[]}},{name:"Nervousness",desc:"Perception of a danger that you do not know how to respond to.",range:{min:2,max:7},actions:{all:["hesitate","ruminate","worry"],con:["hesitate"],des:["ruminate","worry"],both:[]}},{name:"Anxiety",desc:"Apprehensiveness about an anticipated or unspecified threat.",range:{min:1,max:10},actions:{all:["hesitate","withdraw","freeze","ruminate","worry"],con:["hesitate","withdraw","freeze"],des:["withdraw","freeze","ruminate","worry"],both:["withdraw","freeze"]}},{name:"Dread",desc:"Anticipation of severe danger from which there is no protection or escape.",range:{min:6,max:10},actions:{all:["withdraw","freeze","scream/yell","ruminate","worry"],con:["withdraw","freeze"],des:["withdraw","freeze","scream/yell","ruminate","worry"],both:["withdraw","freeze"]}},{name:"Desperation",desc:"Realization of the futility of our attempts to reduce danger.",range:{min:9,max:10},actions:{all:["avoid","hesitate","freeze","scream/yell","ruminate"],con:["avoid","hesitate","freeze"],des:["avoid","hesitate","freeze","scream/yell","ruminate"],both:["avoid","hesitate","freeze"]}},{name:"Panic",desc:"A consequence of desperation.",range:{min:10,max:10},actions:{all:["withdraw","freeze","scream/yell","ruminate","worry"],con:["withdraw","freeze","scream/yell"],des:["withdraw","freeze","scream/yell","ruminate","worry"],both:["withdraw","freeze","scream/yell"]}},{name:"Horror",desc:"A mixture of fear and disgust which probably alternate quickly rather than merge together.",range:{min:10,max:10},actions:{all:["withdraw","freeze","scream/yell"],con:["withdraw","freeze","scream/yell"],des:["withdraw","freeze","scream/yell"],both:["withdraw","freeze","scream/yell"]}},{name:"Terror",desc:"The most extreme fear that can be felt.",range:{min:10,max:10},actions:{all:["withdraw","freeze","scream/yell"],con:["withdraw","freeze","scream/yell"],des:["withdraw","freeze","scream/yell"],both:["withdraw","freeze","scream/yell"]}}],actions:[{name:"Withdraw",desc:"Physically or mentally leave the scene of the threat."},{name:"Avoid",desc:"Either physically stay away from someone or something, or internally keep one’s mind away from what is triggering the fear."},{name:"Hesitate",desc:"Hold back in doubt or indecision, often momentarily."},{name:"Freeze",desc:"Become incapable of acting or speaking."},{name:"Scream/yell",desc:"Lose control of how one speaks; speak in a loud volume and, when screaming, in a higher pitch."},{name:"Reframe",desc:"Reconsider the emotional trigger in an attempt to reduce or eliminate it."},{name:"Be mindful",desc:"Accept how you feel and recognize that it's temporary. "},{name:"Breathe",desc:"Focus awareness on breathing in order to diminish fearful feelings. "},{name:"Ruminate",desc:"Repetitively think about the emotional experience."},{name:"Worry",desc:"Anticipate the possibility of harm."},{name:"Distract",desc:"Engage in other activities in an attempt to avoid feeling this emotion."}],triggers:["Threat of losing status","Threat to safety","Sudden loss of gravity","Snake-like shapes","Threat of losing job","Thunder","Public speaking"],moods:[{name:"Apprehensive",desc:"Expecting harm but not knowing how to avoid it. Perceiving threats when they are not there, or magnifying the seriousness of a threat."}]},disgust:{continent:{name:"Disgust",desc:"We are disgusted by anything that is literally or physically toxic. "},states:[{name:"Aversion",desc:"A desire to avoid something noxious.",range:{min:2,max:7},actions:{all:["withdraw","avoid","dehumanize"],con:["withdraw","avoid"],des:["dehumanize"],both:[]}},{name:"Dislike",desc:"Disapproval of a thing, person or action.",range:{min:1,max:5},actions:{all:["withdraw","avoid","dehumanize"],con:["withdraw","avoid"],des:["avoid","dehumanize"],both:["avoid"]}},{name:"Distaste",desc:"Offense caused by a taste or smell; metaphorically, offense caused by sights or actions.",range:{min:2,max:7},actions:{all:["withdraw","avoid","vomit",""],con:["withdraw","avoid","vomit"],des:[""],both:[]}},{name:"Repugnance",desc:"Repulsion to something literally or figuratively toxic.",range:{min:2,max:9},actions:{all:["withdraw","avoid","dehumanize"],con:["withdraw","avoid"],des:["avoid","dehumanize"],both:["avoid"]}},{name:"Loathing",desc:"Intense repulsion to a thing or person.",range:{min:9,max:10},actions:{all:["withdraw","avoid","dehumanize"],con:["withdraw"],des:["avoid","dehumanize"],both:[]}},{name:"Revulsion",desc:"Very strong repulsion that usually implies a movement away from the source.",range:{min:8,max:10},actions:{all:["withdraw","avoid","vomit","dehumanize"],con:["withdraw","avoid","vomit"],des:["dehumanize"],both:[]}},{name:"Abhorrence",desc:"Extreme repulsion to the look, smell or taste of toxic sustances, or to highly offensive actions.",range:{min:8,max:10},actions:{all:["withdraw","avoid","dehumanize"],con:["withdraw","avoid"],des:["dehumanize"],both:[]}}],actions:[{name:"Withdraw",desc:"Physically or mentally leave the scene of what is triggering the disgust."},{name:"Avoid",desc:"Either phsyically stay away from someone or something, or internally keep one's mind away from what is triggering the disgust."},{name:"Vomit",desc:"Expel material from the stomach via the mouth; metaphorically denotes very intense disgust."},{name:"Dehumanize",desc:"Treat someone as though he or she is not a human being; deprive someone of human qualities, personality or spirit."}],triggers:["Rotting or decay","Anything coming out of the body","Unfamiliar religious customs","Eating insects or raw meat","Fans of an opposing sports team"],moods:[{name:"Sour",desc:"Not commonly a mood, it can occur as a mood when there is a generalized feeling of repugnance or revulsion — usually of low intensity."}]},sadness:{continent:{name:"Sadness",desc:"We experience sadness at the actual or perceived loss of a person to whom we are attached, such as a parent or child, a lover or a close friend; at a loss of our own health or social status; and at a loss of an object that we value highly."},states:[{name:"Disappointment",desc:"A feeling that expectations are not being met.",range:{min:1,max:5},actions:{all:["seek comfort","mourn","withdraw","ruminate","feel ashamed"],con:["seek comfort","mourn"],des:["withdraw","ruminate","mourn","feel ashamed"],both:["mourn"]}},{name:"Distraughtness",desc:"Agitated sadness. Felt intensely and often for long periods.",range:{min:2,max:8},actions:{all:["seek comfort","protest","withdraw","feel ashamed"],con:["seek comfort","protest"],des:["withdraw","protest","feel ashamed"],both:["protest"]}},{name:"Discouragement",desc:"A feeling that there is no way to cope with an actual or potential loss.",range:{min:2,max:8},actions:{all:["seek comfort","mourn","protest","withdraw","ruminate"],con:["seek comfort","mourn","protest"],des:["withdraw","ruminate","mourn"],both:["mourn"]}},{name:"Resignation",desc:"Acceptance that nothing can be done to prevent an important loss.",range:{min:1,max:10},actions:{all:["seek comfort","withdraw","protest","ruminate","mourn","protect","feel ashamed"],con:["seek comfort","withdraw","protest"],des:["withdraw","ruminate","mourn","protect","feel ashamed"],both:["withdraw"]}},{name:"Helplessness",desc:"Realization of the inability to prevent or cope with loss.",range:{min:5,max:10},actions:{all:["seek comfort","protest","withdraw","ruminate","feel ashamed"],con:["seek comfort","protest"],des:["withdraw","ruminate","protest","feel ashamed"],both:["protest"]}},{name:"Misery",desc:"An intense, prolonged feeling of anguish.",range:{min:6,max:10},actions:{all:["seek comfort","mourn","protest","withdraw","ruminate"],con:["seek comfort","mourn","protest"],des:["withdraw","ruminate","mourn","protest"],both:["mourn","protest"]}},{name:"Grief",desc:"Anguish aroused by the death of a loved one. Varies over time, from very intense at the time of the death to intermittently moderate as time goes on.",range:{min:7,max:10},actions:{all:["seek comfort","mourn","protest","withdraw","ruminate","feel ashamed"],con:["seek comfort","mourn","protest"],des:["withdraw","ruminate","mourn","protest","feel ashamed"],both:["mourn","protest"]}},{name:"Despair",desc:"Resigned anguish.",range:{min:7,max:10},actions:{all:["seek comfort","mourn","withdraw","ruminate"],con:["seek comfort","mourn"],des:["withdraw","ruminate","mourn"],both:["mourn"]}},{name:"Sorrow",desc:"Response to an important loss.",range:{min:7,max:10},actions:{all:["seek comfort","mourn","withdraw","ruminate","feel ashamed"],con:["seek comfort","mourn"],des:["withdraw","ruminate","mourn","feel ashamed"],both:["mourn"]}},{name:"Anguish",desc:"Intense agitation. Protesting form of despair over an actual or expected loss.",range:{min:10,max:10},actions:{all:["seek comfort","mourn","protest","withdraw","ruminate"],con:["seek comfort","mourn","protest"],des:["withdraw","ruminate","mourn","protest"],both:["mourn","protest"]}},{name:"Hopelessness",desc:"NEED DESCRIPTION",range:{min:6,max:10},actions:{all:["seek comfort","mourn","withdraw","ruminate","feel ashamed"],con:["seek comfort","mourn"],des:["withdraw","ruminate","mourn","feel ashamed"],both:["mourn"]}}],actions:[{name:"Seek comfort",desc:"Seek help or support from others."},{name:"Withdraw",desc:"Physically or mentally leave the scene of what is triggering the sadness."},{name:"Ruminate",desc:"Repetitively think about the emotional experience."},{name:"Mourn",desc:"Focus on the loss."},{name:"Protest",desc:"Complain about the loss, knowing that the complaint will not recover what was lost."},{name:"Feel ashamed",desc:"Feel the need to hide how one feels about what or who is lost."},{name:"Distract",desc:"Engage in other activities in an attempt to avoid feeling this emotion."}],triggers:["Losing a loved one","Being rejected by someone important","Perceived loss of status","Not being invited to a party","Losing a treasured belonging"],moods:[{name:"Dysphoria (or feeling blue)",desc:"Feelings of resignation, discouragement or disappointment that endure for a long period. The anguished side of sadness does not transform into a mood."}]},enjoyment:{continent:{name:"Enjoyment",desc:"The pursuit of what feels good is a primary motive in our lives. "},states:[{name:"Sensory Pleasures",desc:"NEED DESCRIPTION",range:{min:1,max:5},actions:{all:["seek more",""],con:["seek more"],des:[""],both:[]}},{name:"Relief",desc:"When something expected to be unplesant, especialy the threat of harm, is avoided or comes to an end.",range:{min:2,max:10},actions:{all:["exclaim","engage/connect","savor","indulge"],con:["exclaim","engage/connect","savor","indulge"],des:["indulge"],both:["indulge"]}},{name:"Amusement",desc:"Light, playful, humorous feelings of enjoyment.",range:{min:2,max:8},actions:{all:["seek more","maintain","exclaim","engage/connect","indulge"],con:["seek more","maintain","exclaim","engage/connect","indulge"],des:["indulge"],both:["indulge"]}},{name:"Excitement",desc:"Energetic pursuit that, unlike other enjoyable emotions, is rarely felt slightly, but ranges from mid to high in intesnity. May merge with any of the emotions generate a very active form of that emotion.",range:{min:6,max:10},actions:{all:["seek more","maintain","exclaim","engage/connect","indulge"],con:["seek more","maintain","exclaim","engage/connect","indulge"],des:["indulge"],both:["indulge"]}},{name:"Ecstasy",desc:"Rapturous delight. A state of very great happiness, nearly overwhelming.",range:{min:9,max:10},actions:{all:["maintain","savor","indulge"],con:["maintain","savor","indulge"],des:["indulge"],both:["indulge"]}},{name:"Fiero",desc:"An Italian word that descrives the enjoyment felt when you have met a challenge that stretched your capabilities.",range:{min:3,max:10},actions:{all:["seek more","maintain","engage/connect","savor","indulge","gloat"],con:["seek more","maintain","engage/connect","savor","indulge"],des:["gloat","engage/connect","savor","indulge"],both:["engage/connect","savor","indulge"]}},{name:"Naches",desc:"The Yiddish word for feelings of pride in the accomplishments, or sometimes just the existence, of your actual offspring, or mentored offspring. Crucial for motivating the nurture of infants and children.",range:{min:3,max:10},actions:{all:["exclaim","engage/connect","savor","gloat"],con:["exclaim","engage/connect","savor"],des:["gloat","exclaim","engage/connect","savor"],both:["exclaim","engage/connect","savor"]}},{name:"Wonder",desc:"Experiencing something that is very surprising, beautiful, amazing, or hard to believe.",range:{min:5,max:10},actions:{all:["seek more","exclaim","engage/connect","savor","indulge"],con:["seek more","exclaim","engage/connect","savor","indulge"],des:["indulge"],both:["indulge"]}},{name:"Schadenfreude",desc:"Enjoying the misfortunes of another person, usually a rival.",range:{min:3,max:8},actions:{all:["","seek more","maintain","gloat","exclaim","engage/connect"],con:[""],des:["seek more","maintain","gloat","exclaim","engage/connect"],both:[]}},{name:"Rejoicing",desc:"A warm, uplifting feeling that people experience when they see acts of human goodness, kindness, and compassion. Also called elevation.",range:{min:2,max:8},actions:{all:["seek more","exclaim","engage/connect","savor","indulge"],con:["seek more","exclaim","engage/connect","savor","indulge"],des:["indulge"],both:["indulge"]}},{name:"Compassion-joy",desc:"Enjoyment felt when you act compassionately, especially if your actions help to relieve another person's suffering.",range:{min:3,max:6},actions:{all:["seek more","exclaim","engage/connect","savor",""],con:["seek more","exclaim","engage/connect","savor"],des:[""],both:[]}},{name:"Pride",desc:"Wanting others to know the pleasure you feel in your own accomplishments or the accomplishments of another who you either nurtured directly or identified with.",range:{min:4,max:9},actions:{all:["seek more","exclaim","engage/connect","savor","indulge"],con:["seek more","exclaim","engage/connect","savor","indulge"],des:["exclaim","engage/connect","savor","indulge"],both:["exclaim","engage/connect","savor","indulge"]}},{name:"Debauchery",desc:"NEED DESCRIPTION",range:{min:6,max:10},actions:{all:["withdraw","engage/connect","seek more","maintain","savor","indulge"],con:["withdraw","engage/connect"],des:["seek more","maintain","engage/connect","savor","indulge"],both:["engage/connect"]}}],actions:[{name:"Withdraw",desc:"To physically or mentally leave the scene."},{name:"Seek more",desc:"To increase the enjoyable feelings."},{name:"Maintain",desc:"To continue to do what is necessary to continue the enjoyable feelings."},{name:"Gloat",desc:"To enjoy others envying your enjoyable state."},{name:"Exclaim",desc:"To vocally express enjoyment to others."},{name:"Engage/Connect",desc:"To desire connection and engagement with others to share in feelings of enjoyment."},{name:"Savor",desc:"To relish in the experience of good feelings about the felt and psychological experiences."},{name:"Indulge",desc:"Excessively engaging in the enjoyable feelings"}],triggers:["Sensory experience of nature","Helping others","Social interaction","Playing badminton","The taste of chocolate cake","Spending time with family","Places associated with enjoyable memories"],moods:[{name:"High",desc:"Generalized, non-specific feeling good not about any trigger; lasting hours."}]}},metadata:{intro:{header:"Welcome to Atlas of Emotion ",body:"This collection of maps was created by Paul and Eve Ekman to help you better understand your emotions, where they come from and the effects they have on your life.<br><br>Navigate by scrolling between sections or by using the right-hand navigation bar, and by clicking elements to dig deeper.<br><br>This is an opportunity for you to explore the vast world of emotions. The atlas begins with what scholars agree on and gradually introduces the Ekmans' working hypotheses about more complex subject matter."},continents:{header:"The Emotions",body:"Each emotion is represented as a continent. The movement of the continents reflects how emotions vary in strength and frequency in people's lives."},states:{header:"The States of an Emotion",body:"Each emotion contains a number of related but different states. These states differ not only in their nature but in their intensity. The states listed below are representative, not exhaustive."},actions:{header:"The Actions of a State",body:"Each emotional state can result in a number of likely actions. Click on a state to see whether an action is constructive or destructive.",qualities:[{header:"Constructive Actions",body:"Actions that further future collaboration with others."},{header:"Destructive Actions",body:"Actions that decrease the likelihood of being able to collaborate with others."},{header:"Ambiguous Actions",body:"Sometimes an action can be both constructive and destructive, depending on the context."}]},triggers:{header:"The Triggers of an Emotion",body:"Triggers automatically bring forth an emotion without consideration.",steps:[{header:"Event",body:"Some triggers are universal, some are cultural, and some are individual."},{header:"Perception",body:"We can become emotional about anything: the world around us, both novel and familiar, and our own expectations and memories."},{header:"Response",body:"It is very difficult to modify our emotional actions once triggered. Identifying what triggers our emotions may enable us to lead a more balanced emotional life."},{header:"Universal Triggers",body:"Universal triggers are innate, common to everyone. They affect us more intensely than learned triggers."},{header:"Learned Triggers",body:"Learned triggers are either cultural, stemming from widely shared experiences, or personal, arising from more individual experiences."}]},moods:{header:"The Mood of an Emotion",body:"Moods are longer-lasting cousins of emotions that cause the related emotion to be felt more frequently and intensely. It is not always apparent what triggers a mood."},calm:{header:"Achieving Calm",body:"Calm is a state of mind that is actively engaged in using intelligence and wisdom to evaulate the changing world.",secondary:{header:"Visit the Annex",body:'To learn more about emotions, click on "more information" to the right.'}}}}},{}],37:[function(t,e,n){e.exports={annex:{"personality-trait":{emotions:[{name:"Anger",desc:"A hostile person who is often angry, known to others by the frequency of anger responses to the world. Often anger occurs with any frustration, the threshold for frustration is low. Hostile people may regret afterwards and apologize for their anger, but nevertheless continue to respond angrily. Sometimes hostile people express their anger in a nasty way, using words to demean and cause psychological pain to the recipients."},{name:"Fear",desc:"A shy or timid person. This personality type is likely to avoid risks and uncomfortable situations. Timid people may perceive the world as full of difficult situations."},{name:"Disgust",desc:"A person who often feels disgusted by others may have an inflated sense of self worth and hyper aversion towards others. Someone who is disgusted or dissatisfied with everything can be unpleasant to be around."},{name:"Sadness",desc:"A somber person who is often feeling low may have clinical depression or simply have more frequent feelings of sadness. This person may hold a perspective about the world that things are hard and difficult."},{name:"Enjoyment",desc:"A cheerful person is also thought of as optimistic. This person sees the world in positive way and can be easily made to feel enjoyment and laughter."}],title:"Personality Trait",desc:"Certain personality traits relate to specific emotions."},psychopathology:{emotions:[{name:"Anger",desc:"Causing physical or verbal harm within inappropriate contexts, anger that is out of control, anger that is passive but persistently preoccupying.",children:[{name:"Intermittent Explosive Disorder",desc:"Characterized by impulsive aggressive and assaultive behaviors out of proportion to stressors."},{name:"Oppositional Defiance Disorder",desc:"Operationally distinct from conduct disorder which is characterized by behaviorally aggressive acts."},{name:"Antisocial Personality Disorder",desc:"Characterized by a pervasive pattern of disregard for the rights of other people that often manifests as hostility and/or aggression. Deceit and manipulation are also central features."},{name:"Disruptive Mood Dysregulation Disorder",desc:"Severe recurrent temper outbursts manifested verbally (e.g., verbal rages) and/or behaviorally (e.g., physical aggression toward people or property) that are grossly out of proportion in intensity or duration to the situation or provocation."}]},{name:"Fear",desc:"Anxiety states, involve prolonged fear without knowing the source of the threat as well as indcidents of panic (episodic attacks of severe anxiety).",children:[{name:"Social Anxiety Disorder",desc:"A persistent fear of one or more social or performance situations in which the person is exposed to unfamiliar people or to possible scrutiny by others. The individual fears that he or she will act in a way (or show anxietysymptoms) that will be embarrassing and humiliating."},{name:"Post-Traumatic Stress Disorder (PTSD)",desc:"A mental health condition that's triggered by an often overwhelming terrifying event — either experiencing it or witnessing it. Symptoms may include flashbacks, nightmares and severe anxiety, as well as uncontrollable thoughts about the event."},{name:"Avoidant Personality Disorder",desc:"Characterized by a pervasive pattern of social inhibition, feelings of inadequacy, and a hypersensitivity to negative evaluation. People with this disorder are intensely afraid that others will ridicule them, reject them, or criticize them."},{name:"Generalized Anxiety Disorder",desc:"An anxiety disorder that is characterized by excessive, uncontrollable and often irrational worry, that is, apprehensive expectation about events or activities."},{name:"Obsessive-Compulsive Disorder (OCD)",desc:"An anxiety disorder characterized by intrusive thoughts that produce uneasiness, apprehension, fear or worry (obsessions), repetitive behaviors aimed at reducing the associated anxiety (compulsions), or a combination of such obsessions and compulsions."}]},{name:"Disgust",desc:"The psychopathology of disgust includes feelings of disgust that prevent everyday interaction with the world, the self or others. The disgust can be a paralyzing feeling making simple interactions (such as eating) extremely painful if not impossible. Disgust and fear are both thought to contribute to various phobias, such as of small animals.",children:[{name:"Anorexia nervosa",desc:'Often coupled with a distorted self imagethat  may be maintained by various cognitive biases that alter how the affected individuals evaluates and thinks about their body, food, and eating. People with anorexia nervosa often view themselves as disgusting, overweight or "big" even when they are already underweight.'},{name:"Body Dysmorphic Disorder",desc:"A body-image disorder characterized by persistent and intrusive preoccupations with an imagined or slight defect in one's appearance, feeling disgusted by one’s appearance."},{name:"Bulimia",desc:"Need description."},{name:"Sexual Aversion Disorder",desc:"Characterized by disgust, fear, revulsion, or lack of desire in consensual relationships involving genital contact."}]},{name:"Sadness",desc:"Depression is a well known psychopathology, reported to effect over 25% of the population. When you have depression, it interferes with daily life and causes pain for both you and those who care about you. Depression is a common but serious illness.\n",children:[{name:"Major Depressive Disorder",desc:"Also known as clinical depression, major depression, or unipolar depression, is a mental disorder characterized by a pervasive and persistent low mood that is accompanied by low self-esteem and by a loss of interest or pleasure in normally enjoyable activities."},{name:"Dysthymia",desc:"Sometimes also called neurotic depression, dysthymic disorder, or chronic depression, is a mood disorder consisting of the same cognitive and physical problems as in depression, with less severe but longer-lasting symptoms."},{name:"Bipolar Disorder",desc:"Also known as bipolar affective disorder (and originally called manic-depressive illness), is a mental disorder characterized by periods of elevated mood and periods of depression."}]},{name:"Enjoyment",desc:"It is harder to imagine the drawbacks of enjoyable emotions contributing to challenges in managing our everyday relationships, work and getting our basic needs in comparison to other emotions. However pathological enjoyment is quite serious, the hyper elevated states of enjoyment can be quite delusional as well as an addition to feeling good which can lead to destructive behaviors.\n",children:[{name:"Mania/Manic Episode",desc:"Manic episode at its extreme is commonly characterized by frenzied, ungovernable exuberance — essentially elation not grounded in reality. Frequently, confidence and self-esteem are excessively enlarged, and grand, extravagant ideas are expressed, this is called ‘grandiosity’. Mania is often part of bipolar disorder."},{name:"Cyclothemia",desc:"The experience when moods noticeably shifts up and down from baseline. It may feel on top of the world for a time, followed by a low period when the feeling is somewhat blue. Between these cyclothymic highs and lows, the person may feel stable and fine."}]}],title:"Psychopathology",desc:"Each emotion relates to distinct psychopathologies, which describe a persistent behavior that interferes with one's ability to function."},signals:{emotions:[{name:"Anger",desc:null,children:[{name:"Signal",desc:"In the voice, anger generates a roar if not controlled; when controlled may have sharp edge that is very detectable. In the face, it includes glaring eyes, lowered brows and narrowed, tightened lips. When people hear or see an angry signal they are typically hurt just by the perception of the signal, and are likely to retaliate with angry actions."
},{name:"Message",desc:"The message of anger is to let the target know to “Get out of my way.”  Anger can carry a message ranging from threat to dissatisfaction."}]},{name:"Fear",desc:null,children:[{name:"Signal",desc:"Common signals are movement backwards, eyes very wide open lips stretched horizontally, eyebrows raised and drawn together. Screams will also accompany intense fear. Lesser fear signals can include heavy breathing, head position slightly backwards and away, and horizontally stretched lower lip including tightened neck muscles."},{name:"Message",desc:"The message of fear is “help me”, it can range from showing panic to low level concern."}]},{name:"Disgust",desc:null,children:[{name:"Signal",desc:"There are three facial expressions associated with disgust. The first is sticking the tongue out as if you are getting something out of your mouth. The second is raising the upper lip but it is relaxed and not tense, this can display gums and teeth depending on the shape of the mouth. The third is the wrinkling of the nose and the raising of the nostrils. All three can occur in unison or separately."},{name:"Message",desc:"The message of disgust is “get away from me”, this can show others that the target of disgust is to be kept away from or that it is unclean, dirty or socially/morally reprehensible."}]},{name:"Sadness",desc:null,children:[{name:"Signal",desc:"The signal of sadness includes a frown (lower lip pushed up and lip corners pulled slightly down), inner corners of the eyebrows drawn up and together in the center of the forehead, cheeks raised and can include tears. The vocalization of sadness can include sobs, heaving and quavering of voice."},{name:"Message",desc:"The message of sadness is “comfort me”. Witnessing tears is a powerful example of a signal that can even be seen by strangers."}]},{name:"Enjoyment",desc:null,children:[{name:"Signal",desc:"The enjoyment signal includes the Duchenne (authentic) smile, activation of a smile (lip corners facing up), and activation of the orbital eye muscles that tighten the lower eyelid and create wrinkling around the outer eye corners (especially with age). Enjoyment also includes vocal signals, for example the sound of relief (a sigh or exhalation) and the sound of amusement such as laughter and giggling."},{name:"Message",desc:"The message of enjoyment is “this feels good”, and is encouraging and engaging of social interaction."}]}],title:"Signal and Message",desc:"The signal to an emotion describes how the universal ways emotion is displayed on the face. There can also be vocal tone changes and body language but we have not included them here because they are often culturally informed, learned as opposed to universal. The message is what the emotion is telling us.\nAll emotions have a message which is responds to the world around us."},"partially-charted":{emotions:[{name:"Love",desc:"A strong attachment to another person, typically parent towards child and child towards parennt, but also between those romantically committed. Within loving relationships, anger, fear, sadness, disgust and enjoyment all can be experienced."},{name:"Envy",desc:"Although often misused as a synonym for jealousy, envy involves resenting and wanting what another person posseses. When feeling envy, anger, contempt, or sadness may also be felt."},{name:"Hate",desc:"Enduring anger focused on a particular person or group of persons. Over time hatred may generate the personality trait of hostility."},{name:"Embarrassment",desc:"Activated often by praise from another, also by a faux pas. No facial or vocal signal, but a blush which is only visible in light-skinned people."},{name:"Surprise",desc:"The briefest emotion, triggered by the sudden occurrence of an unexpected event. It often is a way station, leading, after more appraisal, to any of the other emotions."},{name:"Shame",desc:"Expecting others would be disgusted with you if they knew what you were thinking of or had done. It motivates a strong wish to prevent others from learning what you have done or thought."},{name:"Contempt",desc:"The last to appear in child declopment, it is a feeling of moral superiorit to the target. Often mixed with enjoyment."},{name:"Guilt",desc:"Regret about a past action, which motivates the wish to confess the wrongful action, hoping for forgiveness."},{name:"Jealousy",desc:"An emotional storyline involving three people: a desired person, a rival, and the person afraid of losing the commitmet of the desired person. During jealousy, anger, fear, disgust, sadness or surprise may be felt by any of the three people."}],title:"Partially-Charted Emotions",desc:"Half or less than half of emotion scientists believe there is convincing evidence that each of the following is an emotion."},"scientific-basis":{title:"The Scientific Basis For This Work",desc:'The Emotions Atlas is based on the consensus among scientists (in the choice of the five emotion continents and the relationship of emotions to moods, personality and psychopathology), the work of a few scientists who focused on the naming of states within emotions, dictionary definitions in the glossary, and theory or best guesses about the actions for each state and whether they are constructive or destructive. For more information, see "What Emotion Scientists Agree About", by Paul Ekman Perspectives in Psychological Science, 2016.'},"triggers-timeline":{content:[{txt:"Appraisal: the constant and subjective appraisal of the environment seen through the lens of our individual mind. \n",id:"appraisal"},{txt:"Event: the physical context including places, people and other sensual input as well as thoughts or memories. \n",id:"event"},{txt:"Assessment: the emotional alert database where universal/hardwired responses and acquired memories create the scripts behind all of our triggers. For example, from the environment we get a smell and in the emotion alert database is the stored memory of the shampoo our mother used in our childhood and we are triggered to experience an emotion of warm nostalgia of a happy childhood. ",id:"assessment"},{txt:"Trigger: the initiator of the physiological emotion response. Can be universal (sudden loss of ground under the feet creating fear) or learned (the smell of a certain shampoo). They are created from the combination of the automatic appraisal of the environment matching to some universal/hardwired or acquired script in the emotion alert database. When the trigger resembles something in the emotion alert database, it may be a highly accurate or distorted perception of the triggering event. ",id:"trigger"},{txt:"State: each emotion has a separate affect program. This occurs also in milliseconds. The affect program contains instructions for facial, vocal and postural signals, preset changes in physiology to support preset actions, learned changes in physiology to support learned actions – physical actions, words, memories, images. The instructions in an affect program generate impulses in milliseconds. \n",id:"state"},{txt:"Learned display rules (to regulate the signals) and learned feeling rules (to modify, amplify or suppress the subjective feelings) arise. We don’t know how quickly these occur. Do they occur before signals and actions, or immediately during the onset of signals and actions? Impulses are translated into actions and signals. ",id:null},{txt:"The Selective Filtering Period is initiated with the onset of actions and signals – perception is narrowed and distorted, filtering and interpreting information relevant to and consistent with the prevailing emotion. For example,when fear is aroused, there is a heightened sensitivity to real and imagined threats. ",id:null},{txt:"The gap between impulses (Step 2) and action/signals (Step 4) is variable, depending on: ",id:null},{txt:"• The individual characteristics of each person, the person’s emotional profile. ",id:null},{txt:"• The intensity of the appraised trigger. ",id:null},{txt:"• The momentary psychological state of the individual when the trigger is appraised (how much sleep the person had last night; what, if any, emotion the person last experienced or is currently experiencing, etc.).",id:null}],title:"Emotional Episode Timeline",desc:""},"impediment-antidote":{emotions:[{name:"Anger Antidotes",children:[{name:"Annoyance",desc:"Patience, open-mindedness, concern for others."},{name:"Exasperation",desc:"Letting go of grasping. Patience, inner calm. Trying to understand the causes and conditions that brought about the undesirable situation."},{name:"Frustration",desc:"Letting go, letting go of grasping, putting things in a larger perspective."},{name:"Argumentativeness",desc:"Making effort to understand the other’s perspective, cognitive empathy, benevolence, wishing to solve the problem through a mutually agreeable solution."},{name:"Vengefulness",desc:"In case of vengefulness, contemplating the negative effects of taking revenge, in the short and in the long term; forgiveness not as condoning harmful behavior but as breaking the cycle of resentment and hatred."},{name:"Fury",desc:"Take a break, physically and mentally, from the circumstances that brought fury about. Look at fury itself with the eye of awareness as if gazing to a raging fire and slowly let it calm down."}]},{name:"Anger Impediments",children:[]},{name:"Fear Antidotes",children:[{name:"Trepidation",desc:"Try to ponder what could be done. Calming the mind gives the best chance to find the appropriate solution to what caused the trepidation in the first place."},{name:"Nervousness",desc:"Try to ponder what could be done. Calming the mind gives the best chance to find the appropriate solution to what caused the trepidation in the first place."},{name:"Anxiety",desc:"Make a special effort of letting go of ruminations about the past and anticipations about the future."},{name:"Dread",desc:"Remain as calm as as possible. See what could be done for yourself and  for others as well."},{name:"Panic",desc:"Make the effort to see if anything could at least act as a mitigating factor (depending on the causes involved). "},{name:"Horror",desc:"Try to see if anything can be done. If that is not the case, take your distance to see if something can be done from afar. Respond with firmness and compassion, never with hatred. "},{name:"Terror",desc:"Instilling some calmness in the mind in order to take most appropriate decision."}]},{name:"Fear Impediments",children:[]},{name:"Disgust Antidotes",children:[{name:"Dislike",desc:"While evaluating impartially the ethical issues, generate compassion so as to find the best way to remedy to the causes and conditions that triggered your dislike."},{name:"Aversion",desc:"Evaluate impartially the degree of harmfulness, take the appropriate measures, and then let aversion dissolve in the space of mindful awareness."},{name:"Distaste",desc:"Evaluate impartially the degree of harmfulness, take the appropriate measures, and then let aversion dissolve in the space of mindful awareness."},{name:"Repugnance",desc:"Evaluate impartially the degree of harmfulness, take the appropriate measures, and then let aversion dissolve in the space of mindful awareness."},{name:"Loathing - Self",desc:"Use healthy regret to generate the determination to improve yourself; whenever possible, repair the harm caused to others. \nDo not fall into pessimistic guilt, thinking that you are fundamentally bad and that’s the way you are bound to remain. \nDo not underestimate the potential for change."},{name:"Loathing - Others",desc:"Adopt the outlook of a caring physician, who might deeply disapprove certain behaviors, but will focus on doing all that is possible to cure the person from her afflictions."},{name:"Revulsion",desc:"Adopt the outlook of a caring physician, who might deeply disapprove certain behaviors, but will focus on doing all that is possible to cure the person from her afflictions."},{name:"Abhorrence",desc:"In case of toxic substances or situations, do the best you can to calmly avoid them. In the case of actions, Adopt the outlook of a caring physician, who might deeply disapprove certain behaviors, but will focus on doing all that is possible to cure the person from her afflictions."}]},{name:"Disgust Impediments",children:[]},{name:"Sadness Antidotes",children:[{name:"Disappointment",desc:"Understand that sadness is natural in appropriate circumstances, but also that experiencing loss is part of life and that one should not let oneself be overwhelmed. Try to find a place of peace within oneself and think of constructive things that could be done instead."},{name:"Distraughtness",desc:"Understand that a permanent state of sadness will not bring any real benefit. \nIn the case of mourning someone, to fall in long-term sadness and despair should to be seen as an homage paid to that person. \nIt is better to pay homage by doing meaningful and altruistic acts."},{name:"Discouragement",desc:"Understand that a permanent state of sadness will not bring any real benefit. \nIn the case of mourning someone, to fall in long-term sadness and despair should to be seen as an homage paid to that person. \nIt is better to pay homage by doing meaningful and altruistic acts."},{name:"Helplessness",desc:"Understand that a permanent state of sadness will not bring any real benefit. \nIn the case of mourning someone, to fall in long-term sadness and despair should to be seen as an homage paid to that person. \nIt is better to pay homage by doing meaningful and altruistic acts."},{name:"Misery",desc:"Understand that a permanent state of sadness will not bring any real benefit. \nIn the case of mourning someone, to fall in long-term sadness and despair should to be seen as an homage paid to that person. \nIt is better to pay homage by doing meaningful and altruistic acts."},{name:"Grief",desc:"Understand that a permanent state of sadness will not bring any real benefit. \nIn the case of mourning someone, to fall in long-term sadness and despair should to be seen as an homage paid to that person. \nIt is better to pay homage by doing meaningful and altruistic acts."},{name:"Despair",desc:"Understand that a permanent state of sadness will not bring any real benefit. \nIn the case of mourning someone, to fall in long-term sadness and despair should to be seen as an homage paid to that person. \nIt is better to pay homage by doing meaningful and altruistic acts. Think also well that nothing is engraved in stone: there is always a potential for change."},{name:"Anguish",desc:"Realize that things and people are impermanent by nature. Revolting against this cannot lead to a fulfilled life."}]},{name:"Sadness Impediments",children:[]},{name:"Enjoyment Antidotes",children:[{name:"Schadenfreude",desc:"Perceive the destructive aspect of it and rather try to generate benevolence towards that person."},{name:"Pride",desc:"Humility. Putting things into perspective and realizing that there are many other people with similar or even better qualities than yours. Understanding that you could do all this not just thanks to the fact that you are so special, but see it as being the result of many interdepend causes and conditions in which others have taken part."}]},{name:"Enjoyment Impediments",children:[{name:"Sensory Pleasures",desc:"Being unable to appreciate the quality of the present moment."},{name:"Relief",desc:"To persist in worrying unnecessarily."},{name:"Amusement",desc:"Tendency to see things in negative ways."},{name:"Excitement",desc:"Pessimism and negative affects."},{name:"Ecstasy",desc:"Grasping, attachment, and any other afflictive mental state (animosity, envy, arrogance, etc)."},{name:"Fiero",desc:"Vanity, narcissism, failing to acknowledge with gratitude all those who contributed to make that achievement possible."},{name:"Naches",desc:"Pride mixed with arrogance and with partiality that makes you feel contemptuous about others’ achievements."},{name:"Wonder",desc:"Grasping. Unease."},{name:"Rejoicing",desc:"Envy, jealousy, pride."},{name:"Compassion-Joy",desc:"Regret of having done something good at the cost of some personal efforts. \nNarrow mindedness when caring only for a limited number of people who are close to you."}]}],title:"Impediments and Antidotes",desc:"Here are some ways to counteract emotional states. Impediments apply to blocking a positive emotion, antidotes apply to reversing negative ones."},"intrinsic-or-intentional":{emotions:[{name:"Anger",children:[{name:"Intrinsic",desc:"Quarrel, Insult, Undermine, Dispute, Scream/yell, Use physical force, Simmer/brood, Passive agressiveness"},{name:"Intentional",intentional:"Set limits, Be firm, Withdraw, Take a time out, Breathe, Practice patience, Reframe, Distract, Avoid, Remove the interference"}]},{name:"Fear",children:[{name:"Intrinsic",desc:"Withdraw, Avoid, Hesitate, Freeze, Scream/yell, Ruminate, Worry"},{name:"Intentional",intentional:"Reframe, Be mindful, Breathe, Distract"}]},{name:"Disgust",children:[{name:"Intrinsic",desc:"Withdraw, Avoid, Vomit, Dehumanize"},{name:"Intentional",intentional:"Withdraw, Avoid"}]},{name:"Sadness",children:[{name:"Intrinsic",desc:"Seek comfort, Withdraw, Mourn, Protest, Feel ashamed"},{name:"Intentional",intentional:"Withdraw, Distract"}]},{name:"Enjoyment",children:[{name:"Intrinsic",desc:"Seek more, Maintain, Exclaim, Engage/connect, Savor, Indulge"},{name:"Intentional",intentional:""}]}],title:"Intrinsic or Intentional",desc:"Actions can be intrinsic (take place without intent) or intentional (active attempt to enact change) or both."}},about:{subsections:[{title:"About the Ekmans",desc:"Paul Ekman is a renowned American psychologist who pioneered the field of emotion research through demonstrating the universality of facial expression of emotion and mapping all 43 muscle groups used in facial expression. His widely accessible research has gained him the unique status as working with both law enforcement (to train in identifying deception) and the Dalia Lama (to explore the philosophical underpinning of east and west approach to emotion). After 40 years on the faculty of UCSF he had been running a private training company, Paul Ekman Group, since 2001.\nEve Ekman is a Post Doctoral Scholar at UCSF’s Osher Center for Integrative Medicine. Eve’s research focuses on reducing stress to sustain empathy and meaning in work. She is a teacher trainer for Cultivating Emotional Balance, CEB, an emotion regulation and meditation intervention based in western science and contemplative practices of emotion designed by Paul Ekman and Buddhist scholar B. Alan Wallace. Eve adapts CEB to training care providers in medicine, education and criminal justice."},{title:"Why Use This Atlas?",desc:"A world without the pull of our emotions would be impossibly bland and dangerous. Anger, fear and disgust can save our lives. We need to understand and develop the skills to have choice about (1) when we become emotional or what brings forth an emotional response and (2) how we respond when we are emotional and what we say and do. These skills are not given to us by nature but we can learn them. Exploring this Atlas can help us to achieve a more balanced emotional life, involving choice (at least some of the time). The Atlas of Emotions will increase your understanding of what emotions are: how they happen, what occurs, what you need to know to gain heightened awareness of your emotions."},{title:"What is Emotional Awareness?",desc:"Why does emotional awareness help us to manage our emotional lives? The simple answer is: we live most of our days completely unaware of what emotions we are feeling and the words and actions that they motivate. Typically we are aware of our emotions after an emotional episode, especially if we then regret how we acted. The goal is to become aware of the impulse to act before acting, choosing whether to engage, and if so how to engage. This means understanding what triggers emotions, which triggers most people share, which triggers we are especially sensitive to, and which triggers usually result in a regrettable emotional episode. This isn’t easy to achieve, but exploring this Atlas provides the vital, necessary first step. In the Annex of the Atlas you will find suggestions about other practices you may want to adopt to heighten your awareness of your own emotions."},{title:"What is the link Between Emotion and Stress?",desc:"Our uncontrolled emotions make us susceptible to stress, in fact the definition of stress is an emotional over-arousal (too strong of an emotional experience that lasts too long and interferes with the rest of our life). The consequences of stress, especially prolonged stress, include poor sleep, negative moods, diminished cognitive functioning such as memory and focus, strain on our personal and professional relationships and a variety of poor physical health outcomes."},{title:"What is an Emotion?",desc:"An episode of emotion is actually a brief and succinct experience, one which does not always fit our expectations. Most emotions arise in under a twenty fifth of a second and last no longer than a few minutes. We often feel as though our emotions last much longer, however what we are remembering is likely a series of emotion episodes. The definition is as follows: \n\nEmotion is a process, a particular kind of very fast automatic appraisal influenced by our evolutionary and personal past, in which we sense that something important to our welfare is occurring, and a set of physiological changes and behaviors begin to deal with the situation. In particular, emotions efficiently coordinate diverse response systems, thereby helping us respond to important challenges or opportunities.\n\nLets unpack this definition. Emotion is a process, meaning there are a series of small stages that make up an emotion episode. This begins with our automatic appraisal, or perspective of the world as influenced by our personal experiences (our learned responses from prior life experiences) and evolutionary past (our hardwired responses which have been passed down genetically). Our appraisal helps us filter what is ‘an important event to our welfare’. Typically appraisal is so fast that we are totally unaware of it. Because our appraisal is influenced by our personal pasts we can have quite distinct responses to the world. Consider this example: you are walking down the street with a close friend and an approach car with its windows down is loudly playing a song. For you this song elicits a feeling of great sadness, it is the favorite song of a friend who died from cancer that was played at her or his eulogy. However for your friend, who did not know this person and has no association with the song there is no emotional response or perhaps annoyance about the loud noise. You are on the same street, with the same song but for you this is a learned and personal response. However, if that same car had to avoid a cat running through the road and suddenly veered on to the sidewalk behind, both you and your friend, irrespective of personal past, would jump backwards in fear. This is a universal response to an imminent threat. Emotions help us respond before we even have time to think “what is that car doing?”. This is the brilliance and burden of emotions, they can rally our physiological responses and behaviors for immediate behaviors to save our lives, but they arise without our choosing them and can feel quite out of our control. We will begin mapping our own emotion episodes as explorers immersed in this Atlas.\n\nThe end of this definition points to the evolutionary perspective of emotions, this means looking at emotions the way we look at our thumbs or eyelashes for their functional properties. While emotions do not serve the critical functions of allowing us to grasp or keeping dust from our eyes, they were just as critical for our survival in the environment of our evolutionary adaptedness. In addition to helping us respond to immediate threats (running from a saber tooth tiger in fear or standing up to a less threatening beast with anger) they also helped us in the social cohesion of a tribe through shared enjoyment. Importantly for our early survival, our emotion system includes our rapid internal response as well as a nonverbal signaling through our face."}],title:"About this Atlas",desc:"“To get to the new world we needed a map, and to achieve awareness of our emotions we need a map!” This statement from the Dalia Lama inspired the creation of this visual series of maps for the emotion atlas. The scientific and conceptual content is driven by Drs. Paul and Eve Ekman and the visualization was crafted by a design firm, Stamen. The Atlas uses research and hypothesis from life long emotion research of Dr. Ekman Sr. and Jr. Dr. Ekman’s teaching experiences of emotion skills. The intention for the Atlas of Emotion is to visually navigate the territories of our emotions."},donate:{title:"Support our Cause",desc:"This project was generously supported by the Dalia Lama Trust. To give back, and to help bring more emotion awareness to the world, consider donating here: ",link:"http://www.dalailamatrust.org/donate",imgs:[]},"further-reading":{links:[{link:"http://www.emotrak.com/",desc:"Learn more about your emotions through daily tracking with EmoTrak. Eve Ekman has developed a program which trains your emotional awareness through daily questions, reminders and suggested brief meditations all in your pocket through a phone based app."},{link:"http://greatergood.berkeley.edu/",desc:"Read about the latest research on the science of a meaningful life. Greater Good"},{link:"http://www.paulekman.com/",desc:"Learn more about the online trainings, writings and past works of Paul Ekman."},{link:"http://eveekman.com/",desc:"Learn more about the research and teaching of Eve Ekman"},{link:"http://stamen.com/",desc:"Learn more about the design work of visualizing information of Stamen."}],title:"Further Resources",desc:"Here are some of the publications that guided us, or that you might be interested in seeking out to learn more. "}}},{}]},{},[17]);